import"../chunks/DsnmJJEf.js";import"../chunks/CUseOi6C.js";import{au as et,ai as pe,av as Ce,aj as ye,_ as je,a as U,al as be,n as ut,ax as Ft,ak as Ye,at as nt,a5 as kt,S as Ue,$ as He,f as ce,am as k,m as _,an as C,ap as O,aw as fe,aq as Mt,ar as Wt}from"../chunks/BprpeBWN.js";import{e as st}from"../chunks/CZPh_rK3.js";import{i as Lt}from"../chunks/CyTbzA-V.js";import{a as g,s as Fe,b as qe}from"../chunks/B4vPMAZi.js";import{w as Pe,t as Le,g as Ht,v as qt,d as Je,a as it,e as It,j as Vt,r as Bt}from"../chunks/oy6xE-rC.js";import{i as we}from"../chunks/Ccr4XboW.js";import{i as he,g as Ut,a as xt,b as jt,m as ee,c as ve,w as ot,o as lt,t as Qe,d as Xe,e as Ve,f as dt,h as St,j as Jt,k as Kt,l as Me,n as zt,s as Gt,p as Te,q as u,r as bt,u as We,v as tt,F as Yt,x as gt,y as Qt,z as Xt,A as Zt,B as ea,C as mt,D as ct,E as $e,G as ta,H as At,I as Ae,J as Ze,K as aa,L as ra,M as na,N as sa,O as Pt,P as ia,Q as oa,R as ht,S as la,T as ca,U as ua,V as da,W as fa,X as yt,Y as Ke,Z as Re,_ as z,$ as va,a0 as pa,a1 as ba,a2 as Tt,a3 as De,a4 as Ne}from"../chunks/XnAfsRxt.js";import{r as Be,a as G,c as at,b as _t}from"../chunks/D64X-vIT.js";import{e as ft,f as Ct,h as ga,i as wt,s as vt,j as ma,u as Rt,k as ha,a as ya}from"../chunks/Coxj7Hfx.js";import{s as ze,r as Ge,p as _a}from"../chunks/QhW2L8Vr.js";import{f as wa,a as $a,r as Ea,s as Oa,p as ka}from"../chunks/Bqu-Bysb.js";import{P as Ia}from"../chunks/uSnB0-I-.js";import{P as xa}from"../chunks/DJjASS7M.js";function rt(b){return Array.from(b.querySelectorAll('[role="option"]:not([data-disabled])')).filter(e=>he(e))}function Sa(b){return e=>{const a=e.target,s=Ut(b);if(!s||!xt(a))return!1;const o=s.id;return!!(jt(a)&&o===a.htmlFor||a.closest(`label[for="${o}"]`))}}function Aa(){return{elements:{root:ee("label",{action:e=>({destroy:ve(e,"mousedown",s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})})})}}}const Pa=[u.ARROW_LEFT,u.ESCAPE,u.ARROW_RIGHT,u.SHIFT,u.CAPS_LOCK,u.CONTROL,u.ALT,u.META,u.ENTER,u.F1,u.F2,u.F3,u.F4,u.F5,u.F6,u.F7,u.F8,u.F9,u.F10,u.F11,u.F12],Ta={positioning:{placement:"bottom",sameWidth:!0},scrollAlignment:"nearest",loop:!0,defaultOpen:!1,closeOnOutsideClick:!0,preventScroll:!0,escapeBehavior:"close",forceVisible:!1,portal:"body",builder:"listbox",disabled:!1,required:!1,name:void 0,typeahead:!0,highlightOnHover:!0,onOutsideClick:void 0,preventTextSelectionOverflow:!0,rootElement:void 0},Ca=["trigger","menu","label"];function Ra(b){const e={...Ta,...b},a=ot(Pe(null)),s=ot(Pe(null)),o=e.selected??Pe(e.defaultSelected),v=lt(o,e?.onSelectedChange),l=Le(s,t=>t?p(t):void 0),f=e.open??Pe(e.defaultOpen),h=lt(f,e?.onOpenChange),te=Qe({...Xe(e,"open","defaultOpen","builder","ids"),multiple:e.multiple??!1}),{scrollAlignment:j,loop:L,closeOnOutsideClick:N,escapeBehavior:R,preventScroll:X,portal:F,forceVisible:Y,positioning:Z,multiple:P,arrowSize:J,disabled:ie,required:x,typeahead:ae,name:S,highlightOnHover:Q,onOutsideClick:Ee,preventTextSelectionOverflow:ge,rootElement:r}=te,I=r.get();Ve&&I===void 0?r.set(document):b?.portal===void 0&&F.set(I);const{name:i,selector:H}=dt(e.builder),A=Qe({...St(Ca),...e.ids}),{handleTypeaheadSearch:E}=Jt({onMatch:t=>{s.set(t),t.scrollIntoView({block:j.get()})},getCurrentItem(){return s.get()}});function p(t){const n=t.getAttribute("data-value"),w=t.getAttribute("data-label"),$=t.hasAttribute("data-disabled");return{value:n&&JSON.parse(n),label:w??t.textContent??void 0,disabled:!!$}}const M=t=>{v.update(n=>{if(P.get()){const $=Array.isArray(n)?[...n]:[];return ia(t,$,(Oe,B)=>Me(Oe.value,B.value))}return t})};function q(t){const n=p(t);M(n)}async function V(){h.set(!0),await et();const t=We(A.menu.get(),r.get());if(!he(t))return;const n=t.querySelector("[aria-selected=true]");he(n)&&s.set(n)}function y(){h.set(!1),s.set(null)}const T=Kt({open:h,forceVisible:Y,activeTrigger:a}),K=Le([v],([t])=>n=>Array.isArray(t)?t.some(w=>Me(w.value,n)):zt(n)?Me(t?.value,Gt(n,void 0)):Me(t?.value,n)),re=Le([l],([t])=>n=>Me(t?.value,n)),le=ee(i("trigger"),{stores:[h,s,ie,A.menu,A.trigger,A.label],returned:([t,n,w,$,Oe,B])=>({"aria-activedescendant":n?.id,"aria-autocomplete":"list","aria-controls":$,"aria-expanded":t,"aria-labelledby":B,"data-state":t?"open":"closed",id:Oe,role:"combobox",disabled:mt(w),type:e.builder==="select"?"button":void 0}),action:t=>{a.set(t);const n=ct(t),w=Te(ve(t,"click",()=>{t.focus(),h.get()?y():V()}),ve(t,"keydown",$=>{if(!h.get()){if(Pa.includes($.key)||$.key===u.TAB||$.key===u.BACKSPACE&&n&&t.value===""||$.key===u.SPACE&&bt(t))return;V(),et().then(()=>{if(v.get())return;const _e=We(A.menu.get(),r.get());if(!he(_e))return;const c=Array.from(_e.querySelectorAll(`${H("item")}:not([data-disabled]):not([data-hidden])`)).filter(ke=>he(ke));c.length&&($.key===u.ARROW_DOWN?(s.set(c[0]),c[0].scrollIntoView({block:j.get()})):$.key===u.ARROW_UP&&(s.set(tt(c)),tt(c).scrollIntoView({block:j.get()})))})}if($.key===u.TAB){y();return}if($.key===u.ENTER&&!$.isComposing||$.key===u.SPACE&&bt(t)){$.preventDefault();const B=s.get();B&&q(B),P.get()||y()}if($.key===u.ARROW_UP&&$.altKey&&y(),Yt.includes($.key)){$.preventDefault();const B=We(A.menu.get(),r.get());if(!he(B))return;const _e=rt(B);if(!_e.length)return;const c=_e.filter(pt=>!gt(pt)&&pt.dataset.hidden===void 0),ke=s.get(),de=ke?c.indexOf(ke):-1,Ie=L.get(),Nt=j.get();let xe;switch($.key){case u.ARROW_DOWN:xe=ea(c,de,Ie);break;case u.ARROW_UP:xe=Zt(c,de,Ie);break;case u.PAGE_DOWN:xe=Xt(c,de,10,Ie);break;case u.PAGE_UP:xe=Qt(c,de,10,Ie);break;case u.HOME:xe=c[0];break;case u.END:xe=tt(c);break;default:return}s.set(xe),xe?.scrollIntoView({block:Nt})}else if(ae.get()){const B=We(A.menu.get(),r.get());if(!he(B))return;E($.key,rt(B))}}));return{destroy(){a.set(null),w()}}}}),d=ee(i("menu"),{stores:[T,A.menu],returned:([t,n])=>({hidden:t?void 0:!0,id:n,role:"listbox",style:t?void 0:Ze({display:"none"})}),action:t=>{let n=Ae;const w=Te($e([T,F,N,Z,a],([$,Oe,B,_e,c])=>{n(),!(!$||!c)&&et().then(()=>{n();const ke=Sa(A.trigger.get());n=ta(t,{anchorElement:c,open:h,options:{floating:_e,focusTrap:null,modal:{closeOnInteractOutside:B,onClose:y,shouldCloseOnInteractOutside:de=>{if(Ee.get()?.(de),de.defaultPrevented)return!1;const Ie=de.target;return!(!xt(Ie)||Ie===c||c.contains(Ie)||ke(de))}},escapeKeydown:{handler:y,behaviorType:R},portal:At(t,Oe),preventTextSelectionOverflow:{enabled:ge}}}).destroy})}));return{destroy:()=>{w(),n()}}}}),{elements:{root:D}}=Aa(),{action:ne}=Ht(D),oe=ee(i("label"),{stores:[A.label,A.trigger],returned:([t,n])=>({id:t,for:n}),action:ne}),se=ee(i("option"),{stores:[K],returned:([t])=>n=>{const w=t(n.value);return{"data-value":JSON.stringify(n.value),"data-label":n.label,"data-disabled":mt(n.disabled),"aria-disabled":n.disabled?!0:void 0,"aria-selected":w,"data-selected":w?"":void 0,id:aa(),role:"option"}},action:t=>({destroy:Te(ve(t,"click",w=>{if(gt(t)){w.preventDefault();return}q(t),P.get()||y()}),$e(Q,w=>w?Te(ve(t,"mouseover",()=>{s.set(t)}),ve(t,"mouseleave",()=>{s.set(null)})):void 0))})}),W=ee(i("group"),{returned:()=>t=>({role:"group","aria-labelledby":t})}),m=ee(i("group-label"),{returned:()=>t=>({id:t})}),ue=ra({value:Le([v],([t])=>{const n=Array.isArray(t)?t.map(w=>w.value):t?.value;return typeof n=="string"?n:JSON.stringify(n)}),name:qt(S),required:x,prefix:e.builder}),me=ee(i("arrow"),{stores:J,returned:t=>({"data-arrow":!0,style:Ze({position:"absolute",width:`var(--arrow-size, ${t}px)`,height:`var(--arrow-size, ${t}px)`})})});return $e([s],([t])=>{if(!Ve)return;const n=We(A.menu.get(),r.get());he(n)&&rt(n).forEach(w=>{w===t?na(w):sa(w)})}),$e([h,X],([t,n])=>{if(!(!Ve||!t||!n))return Pt()}),{ids:A,elements:{trigger:le,group:W,option:se,menu:d,groupLabel:m,label:oe,hiddenInput:ue,arrow:me},states:{open:h,selected:v,highlighted:l,highlightedItem:s},helpers:{isSelected:K,isHighlighted:re,closeMenu:y},options:te}}const{name:Da}=dt("combobox");function Na(b){const e=Ra({...b,builder:"combobox",typeahead:!1}),a=Pe(""),s=Pe(!1),o=ee(Da("input"),{stores:[e.elements.trigger,a],returned:([v,l])=>({...Xe(v,"action"),role:"combobox",value:l,autocomplete:"off"}),action:v=>{const l=Te(ve(v,"input",h=>{!ct(h.target)&&!ht(h.target)||s.set(!0)}),oa(v,"input",h=>{ct(h.target)&&a.set(h.target.value),ht(h.target)&&a.set(h.target.innerText)})),{destroy:f}=e.elements.trigger(v);return{destroy(){f?.(),l()}}}});return $e(e.states.open,v=>{v||s.set(!1)}),{...e,elements:{...Xe(e.elements,"trigger"),input:o},states:{...e.states,touchedInput:s,inputValue:a}}}const{name:Se}=dt("dialog"),Fa={preventScroll:!0,escapeBehavior:"close",closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:"body",forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},Ma=["content","title","description"];function Dt(b){const e={...Fa,...b},a=Qe(Xe(e,"ids")),{preventScroll:s,escapeBehavior:o,closeOnOutsideClick:v,role:l,portal:f,forceVisible:h,openFocus:te,closeFocus:j,onOutsideClick:L}=a,N=ot.writable(null),R=Qe({...St(Ma),...e.ids}),X=e.open??Pe(e.defaultOpen),F=lt(X,e?.onOpenChange),Y=Le([F,h],([r,I])=>r||I);let Z=Ae;function P(r){const I=r.currentTarget,i=r.currentTarget;!he(I)||!he(i)||(F.set(!0),N.set(i))}function J(){F.set(!1)}const ie=ee(Se("trigger"),{stores:[F],returned:([r])=>({"aria-haspopup":"dialog","aria-expanded":r,type:"button"}),action:r=>({destroy:Te(ve(r,"click",i=>{P(i)}),ve(r,"keydown",i=>{i.key!==u.ENTER&&i.key!==u.SPACE||(i.preventDefault(),P(i))}))})}),x=ee(Se("overlay"),{stores:[Y,F],returned:([r,I])=>({hidden:r?void 0:!0,tabindex:-1,style:r?void 0:Ze({display:"none"}),"aria-hidden":!0,"data-state":I?"open":"closed"})}),ae=ee(Se("content"),{stores:[Y,R.content,R.description,R.title,F],returned:([r,I,i,H,A])=>({id:I,role:l.get(),"aria-describedby":i,"aria-labelledby":H,"aria-modal":r?"true":void 0,"data-state":A?"open":"closed",tabindex:-1,hidden:r?void 0:!0,style:r?void 0:Ze({display:"none"})}),action:r=>{let I=Ae,i=Ae,H=Ae;const A=$e([Y,v],([E,p])=>{i(),I(),H(),E&&(i=ca(r,{closeOnInteractOutside:p,onClose:J,shouldCloseOnInteractOutside(M){return L.get()?.(M),!M.defaultPrevented}}).destroy,I=ua(r,{handler:J,behaviorType:o}).destroy,H=da(r,{fallbackFocus:r}).destroy)});return{destroy:()=>{Z(),A(),i(),I(),H()}}}}),S=ee(Se("portalled"),{stores:f,returned:r=>({"data-portal":la(r)}),action:r=>{const I=$e([f],([i])=>{if(i===null)return Ae;const H=At(r,i);return H===null?Ae:fa(r,H).destroy});return{destroy(){I()}}}}),Q=ee(Se("title"),{stores:[R.title],returned:([r])=>({id:r})}),Ee=ee(Se("description"),{stores:[R.description],returned:([r])=>({id:r})}),ge=ee(Se("close"),{returned:()=>({type:"button"}),action:r=>({destroy:Te(ve(r,"click",()=>{J()}),ve(r,"keydown",i=>{i.key!==u.SPACE&&i.key!==u.ENTER||(i.preventDefault(),J())}))})});return $e([F,s],([r,I])=>{if(Ve){if(I&&r&&(Z=Pt()),r){const i=document.getElementById(R.content.get());yt({prop:te.get(),defaultEl:i})}return()=>{h.get()||Z()}}}),$e(F,r=>{!Ve||r||yt({prop:j.get(),defaultEl:N.get()})},{skipFirstRun:!0}),{ids:R,elements:{content:ae,trigger:ie,title:Q,description:Ee,overlay:x,close:ge,portalled:S},states:{open:F},options:a}}function $t(b,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=Ge(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"}],["circle",{cx:"12",cy:"12",r:"10"}]];Ke(b,ze({name:"earth"},()=>a,{get iconNode(){return s},children:(o,v)=>{var l=Ce(),f=ye(l);Je(f,()=>e.children??je),U(o,l)},$$slots:{default:!0}})),be()}function Et(b,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=Ge(e,["$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"16",r:"1"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3"}]];Ke(b,ze({name:"lock-keyhole"},()=>a,{get iconNode(){return s},children:(o,v)=>{var l=Ce(),f=ye(l);Je(f,()=>e.children??je),U(o,l)},$$slots:{default:!0}})),be()}function Wa(b,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=Ge(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];Ke(b,ze({name:"pencil"},()=>a,{get iconNode(){return s},children:(o,v)=>{var l=Ce(),f=ye(l);Je(f,()=>e.children??je),U(o,l)},$$slots:{default:!0}})),be()}function La(b,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=Ge(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];Ke(b,ze({name:"trash-2"},()=>a,{get iconNode(){return s},children:(o,v)=>{var l=Ce(),f=ye(l);Je(f,()=>e.children??je),U(o,l)},$$slots:{default:!0}})),be()}function Ot(b,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=Ge(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M18 21a8 8 0 0 0-16 0"}],["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"}]];Ke(b,ze({name:"users-round"},()=>a,{get iconNode(){return s},children:(o,v)=>{var l=Ce(),f=ye(l);Je(f,()=>e.children??je),U(o,l)},$$slots:{default:!0}})),be()}function Ha(b,e){pe(e,!0);const[a,s]=Fe(),o=()=>g(v,"$person",a);ft(e.webId);let v=Ct(Re,e.webId);ut();var l=Ft();Ye(()=>it(l,o().name)),U(b,l),be(),s()}var qa=ce("<li> </li>"),Va=ce('<li><div class="pl-4"><span class="font-medium"> </span></div></li>'),Ba=ce(`<li class="relative cursor-pointer rounded-md py-1 pl-8 pr-4
        data-[highlighted]:bg-magnum-100 data-[highlighted]:text-magnum-700">No results found</li>`),Ua=ce("<ul><!>  <!></ul>"),ja=ce('<div class="flex flex-col gap-1"><div class="relative"><!> <input/></div></div> <!>',1);function Ja(b,e){pe(e,!0);const[a,s]=Fe(),o=()=>g(ae,"$inputValue",a),v=()=>g(x,"$open",a),l=()=>g(Q,"$selected",a),f=()=>g(vt,"$session",a),h=()=>g(S,"$touchedInput",a),te=()=>g(i,"$friends",a),j=()=>g(J,"$input",a),L=()=>g(P,"$menu",a),N=()=>g(_(p),"$personByWebId",a),R=()=>g(_(E),"$personResourceResult",a),X=()=>g(ie,"$option",a),F=()=>g(_(M),"$matched",a);let Y=_a(e,"value",15),Z=nt(kt([]));const{elements:{menu:P,input:J,option:ie},states:{open:x,inputValue:ae,touchedInput:S,selected:Q},helpers:{isSelected:Ee,isHighlighted:ge}}=Na({multiple:!0,onSelectedChange:d=>{const D=d.next?.map(ne=>ne.value)??[];return He(Z,D,!0),Y(D),qe(ae,""),qe(x,!1),d.next}});Ue(()=>{Y().length!==l()?.length&&qe(Q,Y().map(d=>({value:d,label:""})))});let r;const I=d=>{clearTimeout(r),r=setTimeout(d,450)};ga(Re,f().info.webId,f().info.webId,{name:!0,knows:{name:!0}});let i=wt(Re,f().info.webId,wa.knows),H=nt("");Ue(()=>{const d=o();h()?I(()=>{He(H,d,!0)}):He(H,d,!0)});let A=fe(()=>te().filter(d=>d.name?.toLowerCase().includes(o().toLowerCase())||d["@id"]?.toLowerCase().includes(o().toLowerCase()))),E=fe(()=>ft(_(H))),p=fe(()=>Ct(Re,_(H))),M=fe(()=>wt(Re,_(H),$a.oidcIssuer));var q=ja(),V=ye(q),y=k(V),T=k(y);st(T,16,()=>_(Z),d=>d,(d,D)=>{Ha(d,{get webId(){return D}})});var K=C(T,2);Be(K),G(K,()=>({...j(),disabled:e.disabled||j().disabled,placeholder:"Name or webId"}),void 0,void 0,"svelte-1u6t5ph"),z(K,d=>J?.(d)),O(y),O(V);var re=C(V,2);{var le=d=>{var D=Ua();G(D,()=>({class:"menu",...L()}),void 0,void 0,"svelte-1u6t5ph");var ne=k(D);{var oe=W=>{var m=qa();G(m,me=>({...me}),[()=>X()({value:N()["@id"],label:N().name??N()["@id"],disabled:R().isPresent()!==!0||F().size===0})],void 0,"svelte-1u6t5ph");var ue=k(m,!0);O(m),z(m,me=>ie?.(me)),Ye(()=>it(ue,N().name??N()["@id"])),U(W,m)};we(ne,W=>{N()?.["@id"]&&!R()?.isError&&W(oe)})}var se=C(ne,2);st(se,17,()=>_(A),W=>W["@id"],(W,m)=>{var ue=Va();G(ue,w=>({...w}),[()=>X()({value:_(m)["@id"],label:_(m).name??_(m)["@id"]})],void 0,"svelte-1u6t5ph");var me=k(ue),t=k(me),n=k(t,!0);O(t),O(me),O(ue),z(ue,w=>ie?.(w)),Ye(()=>it(n,_(m).name??_(m)["@id"])),U(W,ue)},W=>{var m=Ba();U(W,m)}),O(D),z(D,W=>P?.(W)),va(3,D,()=>pa,()=>({duration:150,y:-5})),U(d,D)};we(re,d=>{v()&&d(le)})}U(b,q),be(),s()}var Ka=ce("<button><!></button>"),za=ce('<div><div></div> <div><h2>Visibility</h2> <p></p> <form class="svelte-1r4q63y"><div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="private"/><label for="private" aria-label="Private"><!></label></div> <div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="shared" aria-label="Shared"/><label for="shared" aria-label="Shared"><!></label> <!></div> <div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="public" aria-label="Public"/><label for="public" aria-label="Public"><!></label></div> <button type="submit">Confirm</button></form> <button><!></button></div></div>'),Ga=ce("<!> <!>",1);function Ya(b,e){pe(e,!0);const[a,s]=Fe(),o=()=>g(ie,"$open",a),v=()=>g(R,"$trigger",a),l=()=>g(X,"$portalled",a),f=()=>g(F,"$overlay",a),h=()=>g(Y,"$content",a),te=()=>g(Z,"$title",a),j=()=>g(P,"$description",a),L=()=>g(J,"$close",a),N=[],{elements:{trigger:R,portalled:X,overlay:F,content:Y,title:Z,description:P,close:J},states:{open:ie}}=Dt();var x=(E=>(E.private="private",E.shared="shared",E.public="public",E))(x||{});let ae=fe(()=>e.wac?e.wac.public.read?"public":Object.entries(e.wac.agent).some(([E,p])=>E!==e.self&&p.read)?"shared":"private":void 0);const S=kt({visibility:void 0,selected:[]});Ue(()=>{S.visibility=_(ae)});let Q=fe(()=>!!e.wac?.agent[e.self].control);Ue(()=>{if(!e.wac)return;const E=Object.entries(e.wac.agent).filter(([p,M])=>p!==e.self&&M.read===!0).map(([p])=>p);S.selected=E});const Ee=async E=>{if(E.preventDefault(),!e.wac)throw new Error;let p=JSON.parse(JSON.stringify(e.wac));if(S.visibility==="public")p.public.read=!0;else if(S.visibility==="shared"&&S.selected.length>0){p.public.read=!1;for(let M in p.agent)M!==e.self&&(p.agent[M].read=!1);S.selected.forEach(M=>{p.agent[M]??={read:!1,append:!1,write:!1,control:!1},p.agent[M].read=!0})}else p=void 0;await e.onchangewac(p),qe(ie,!1)};var ge=Ga(),r=ye(ge);{var I=E=>{var p=Ka();G(p,()=>({"aria-label":`Privacy and sharing: ${_(ae)}`,...v()}),void 0,void 0,"svelte-1r4q63y");var M=k(p);{var q=y=>{{let T=fe(()=>_(Q)?"green":"black");Et(y,{"aria-hidden":"true",get color(){return _(T)}})}},V=y=>{var T=Ce(),K=ye(T);{var re=d=>{{let D=fe(()=>_(Q)?"green":"black");Ot(d,{"aria-hidden":"true",get color(){return _(D)}})}},le=d=>{var D=Ce(),ne=ye(D);{var oe=se=>{{let W=fe(()=>_(Q)?"green":"black");$t(se,{"aria-hidden":"true",get color(){return _(W)}})}};we(ne,se=>{_(ae)===x.public&&se(oe)},!0)}U(d,D)};we(K,d=>{_(ae)===x.shared?d(re):d(le,!1)},!0)}U(y,T)};we(M,y=>{_(ae)===x.private?y(q):y(V,!1)})}O(p),z(p,y=>R?.(y)),U(E,p)},i=E=>{ba(E,{})};we(r,E=>{e.wac?E(I):E(i,!1)})}var H=C(r,2);{var A=E=>{var p=za();G(p,()=>({...l()}),void 0,void 0,"svelte-1r4q63y");var M=k(p);G(M,()=>({class:"overlay",...f()}),void 0,void 0,"svelte-1r4q63y"),z(M,c=>F?.(c));var q=C(M,2);G(q,()=>({class:"content",...h()}),void 0,void 0,"svelte-1r4q63y");var V=k(q);G(V,()=>({class:"title",...te()}),void 0,void 0,"svelte-1r4q63y"),z(V,c=>Z?.(c));var y=C(V,2);G(y,()=>({...j()}),void 0,void 0,"svelte-1r4q63y"),z(y,c=>P?.(c));var T=C(y,2),K=k(T),re=k(K);Be(re);var le,d=C(re),D=k(d);Et(D,{"aria-hidden":"true"}),O(d),O(K);var ne=C(K,2),oe=k(ne);Be(oe);var se,W=C(oe),m=k(W);Ot(m,{"aria-hidden":"true"}),O(W);var ue=C(W,2);{var me=c=>{{let ke=fe(()=>S.visibility!==x.shared);Ja(c,{get disabled(){return _(ke)},get value(){return S.selected},set value(de){S.selected=de}})}};we(ue,c=>{S.visibility===x.shared&&c(me)})}O(ne);var t=C(ne,2),n=k(t);Be(n);var w,$=C(n),Oe=k($);$t(Oe,{"aria-hidden":"true"}),O($),O(t),ut(2),O(T);var B=C(T,2);G(B,()=>({class:"close",...L()}),void 0,void 0,"svelte-1r4q63y");var _e=k(B);Tt(_e,{}),O(B),z(B,c=>J?.(c)),O(q),z(q,c=>Y?.(c)),O(p),z(p,c=>X?.(c)),Ye(()=>{le!==(le=x.private)&&(re.value=(re.__value=x.private)??""),se!==(se=x.shared)&&(oe.value=(oe.__value=x.shared)??""),w!==(w=x.public)&&(n.value=(n.__value=x.public)??"")}),It("submit",T,Ee),at(N,[],re,()=>(x.private,S.visibility),c=>S.visibility=c),at(N,[],oe,()=>(x.shared,S.visibility),c=>S.visibility=c),at(N,[],n,()=>(x.public,S.visibility),c=>S.visibility=c),U(E,p)};we(H,E=>{o()&&E(A)})}U(b,ge),be(),s()}function Qa(b,e){pe(e,!0);const[a,s]=Fe(),o=()=>g(l,"$resource",a),v=()=>g(vt,"$session",a),l=ft(e.uri);let f=nt(void 0);Ue(()=>{o().getWac().then(L=>{if(L.isError)throw L;He(f,L,!0)})});const{getResource:h,getSubject:te}=Rt(),j=async L=>{if(o()?.type!=="SolidLeaf")throw new Error("not a leaf");if(!_(f))throw new Error;let N=JSON.parse(JSON.stringify(_(f).wacRule));if(L===void 0){const P=await ma(o(),{fetch:v().fetch});if(P.isError)throw P;const J=P.wacUri;await h(J).delete()}else await o().setWac(L);const R=await o().getWac({ignoreCache:!0});if(R.isError)throw R;He(f,R,!0);const X=R.wacRule,F=X.public.read?"public":Object.entries(X.agent).some(([P,J])=>P!==v().info.webId&&J.read)?"shared":"private";De({data:{title:"Update successful",description:`Access was updated to ${F}`,type:Ne.success}}),N.public.read!==X.public.read&&De({data:{title:"TODO Notification successful",description:"Public geoindex was notified",type:Ne.success}});const Y=Object.keys(X.agent),Z=Object.keys(N.agent);for(let P of Y)Z.includes(P)||De({data:{title:"TODO Notification successful",description:`${te(Re,P)?.name} was notified`,type:Ne.success}})};{let L=fe(()=>_(f)?.wacRule);Ya(b,{get wac(){return _(L)},get self(){return v().info.webId},onchangewac:j})}be(),s()}const Xa=async(b,e,a,s)=>{const{name:o}=e.place;if(globalThis.confirm(`Do you really want to delete place ${o} (${e.place["@id"]})?`)){const l=a.getResource(e.place["@id"]);if(l.isError)throw l;const f=await ha(l,{fetch:s().fetch,dataset:a});f.isError?De({data:{type:Ne.error,title:"Deletion failed",description:f.name}}):De({data:{type:Ne.success,title:"Deletion successful",description:`Deleted place ${o}`}})}};var Za=ce('<div><div></div> <div><h2>Update Place</h2> <p></p> <form class="svelte-5hf8eu"><div class="field svelte-5hf8eu"><label for="name">Name</label> <input id="name" type="text" name="name" placeholder="name"/></div> <div class="field svelte-5hf8eu"><label for="description">Description</label> <textarea id="description" name="description" placeholder="description"></textarea></div> <button type="submit">Update place</button></form> <button><!></button></div></div>'),er=ce('<div class="controls svelte-5hf8eu"><!> <button><!></button> <button aria-label="Delete place"><!></button></div> <!>',1);function tr(b,e){pe(e,!0);const[a,s]=Fe(),o=()=>g(S,"$open",a),v=()=>g(vt,"$session",a),l=()=>g(Y,"$trigger",a),f=()=>g(Z,"$portalled",a),h=()=>g(P,"$overlay",a),te=()=>g(J,"$content",a),j=()=>g(ie,"$title",a),L=()=>g(x,"$description",a),N=()=>g(ae,"$close",a),{changeData:R,commitData:X,dataset:F}=Rt(),{elements:{trigger:Y,portalled:Z,overlay:P,content:J,title:ie,description:x,close:ae},states:{open:S}}=Dt(),Q={name:e.place.name,description:e.place.description,latitude:e.place.geo.latitude,longitude:e.place.geo.longitude},Ee=async q=>{q.preventDefault();const{name:V}=e.place,y=F.getResource(e.place["@id"]);if(y.isError)throw y;const T=R(e.place,y);T.name=Q.name,T.description=Q.description;const K=await X(T);if(K.isError)throw K;qe(S,!1),De({data:{title:"Update successful",description:`Updated place ${V}`,type:Ne.success}})};var ge=er(),r=ye(ge),I=k(r);Qa(I,{get uri(){return e.place["@id"]}});var i=C(I,2);G(i,()=>({"aria-label":"Edit place",...l()}),void 0,void 0,"svelte-5hf8eu");var H=k(i);Wa(H,{"aria-hidden":"true"}),O(i),z(i,q=>Y?.(q));var A=C(i,2);A.__click=[Xa,e,F,v];var E=k(A);La(E,{"aria-hidden":"true"}),O(A),O(r);var p=C(r,2);{var M=q=>{var V=Za();G(V,()=>({...f()}),void 0,void 0,"svelte-5hf8eu");var y=k(V);G(y,()=>({class:"overlay",...h()}),void 0,void 0,"svelte-5hf8eu"),z(y,m=>P?.(m));var T=C(y,2);G(T,()=>({class:"content",...te()}),void 0,void 0,"svelte-5hf8eu");var K=k(T);G(K,()=>({class:"title",...j()}),void 0,void 0,"svelte-5hf8eu"),z(K,m=>ie?.(m));var re=C(K,2);G(re,()=>({...L()}),void 0,void 0,"svelte-5hf8eu"),z(re,m=>x?.(m));var le=C(re,2),d=k(le),D=C(k(d),2);Be(D),O(d);var ne=C(d,2),oe=C(k(ne),2);Bt(oe),O(ne),ut(2),O(le);var se=C(le,2);G(se,()=>({class:"close",...N()}),void 0,void 0,"svelte-5hf8eu");var W=k(se);Tt(W,{}),O(se),z(se,m=>ae?.(m)),O(T),z(T,m=>J?.(m)),O(V),z(V,m=>Z?.(m)),It("submit",le,Ee),_t(D,()=>Q.name,m=>Q.name=m),_t(oe,()=>Q.description,m=>Q.description=m),U(q,V)};we(p,q=>{o()&&q(M)})}U(b,ge),be(),s()}Vt(["click"]);var ar=ce("<li><!></li>"),rr=ce('<ul data-testid="place-list"></ul>');function yr(b,e){pe(e,!1);const[a,s]=Fe(),o=()=>g(ka,"$placeResources",a),v=()=>g(l,"$data",a);let l=ya(xa,Ea.type,Oa.Place,null);Mt(()=>o(),()=>{o()}),Wt(),Lt();var f=rr();st(f,5,v,h=>h["@id"],(h,te)=>{var j=ar(),L=k(j);Ia(L,{get place(){return _(te)},children:(N,R)=>{tr(N,{get place(){return _(te)}})},$$slots:{default:!0}}),O(j),U(h,j)}),O(f),U(b,f),be(),s()}export{yr as component};
