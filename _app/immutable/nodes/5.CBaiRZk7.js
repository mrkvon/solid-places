import"../chunks/DsnmJJEf.js";import{aa as st,F as pe,ab as Ne,G as _e,w as ze,a as W,I as be,f as se,J as E,K as T,L as g,H as Le,a8 as Ke,Y as at,y as Te,b as Ee,g as v,ac as ve,n as It}from"../chunks/lTDvGL6K.js";import{I as Ge,X as vt,e as Je}from"../chunks/oRzLS26u.js";import{a as c,s as Fe,b as Ae}from"../chunks/DAH22-2q.js";import{w as Se,x as Me,g as Vt,y as Bt,v as Ye,j as xt,a as Ze,e as Ct,r as Ut}from"../chunks/HgQVWXPy.js";import{s as Qe,r as Xe,i as fe,p as St}from"../chunks/CpJVbNz-.js";import{i as $e,g as jt,a as Tt,b as Kt,m as ue,c as ye,w as ut,o as dt,t as et,d as tt,e as je,f as ft,h as At,j as Jt,k as zt,l as Be,n as Gt,s as Yt,p as De,q as p,r as gt,u as Ue,v as it,F as Qt,x as mt,y as Xt,z as Zt,A as en,B as tn,C as ht,D as ct,E as ke,G as nn,H as Pt,I as Re,J as nt,K as an,L as rn,M as sn,N as on,O as Rt,P as ln,Q as un,R as yt,S as dn,T as cn,U as vn,V as fn,W as pn,X as _t,Y as qe,Z as X,_ as Dt,$ as Nt,a0 as bn,a1 as We,a2 as He}from"../chunks/Cz_jGxej.js";import{s as Lt,r as Ve,a as Z,d as ot,b as $t}from"../chunks/YqoNChnQ.js";import{h as pt,i as Ft,j as gn,k as wt,b as rt,l as mn,u as Mt,m as hn,a as yn}from"../chunks/Ck_VzoUI.js";import{s as _n}from"../chunks/CDh15L9x.js";import{f as $n,a as wn,q as kn,r as En,s as On}from"../chunks/B4u9Tg37.js";import{s as In,c as xn,T as Cn,P as Sn}from"../chunks/CDyP8hrt.js";import{P as Tn}from"../chunks/BzEzGBMK.js";function lt(_){return Array.from(_.querySelectorAll('[role="option"]:not([data-disabled])')).filter(e=>$e(e))}function An(_){return e=>{const t=e.target,s=jt(_);if(!s||!Tt(t))return!1;const o=s.id;return!!(Kt(t)&&o===t.htmlFor||t.closest(`label[for="${o}"]`))}}function Pn(){return{elements:{root:ue("label",{action:e=>({destroy:ye(e,"mousedown",s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})})})}}}const Rn=[p.ARROW_LEFT,p.ESCAPE,p.ARROW_RIGHT,p.SHIFT,p.CAPS_LOCK,p.CONTROL,p.ALT,p.META,p.ENTER,p.F1,p.F2,p.F3,p.F4,p.F5,p.F6,p.F7,p.F8,p.F9,p.F10,p.F11,p.F12],Dn={positioning:{placement:"bottom",sameWidth:!0},scrollAlignment:"nearest",loop:!0,defaultOpen:!1,closeOnOutsideClick:!0,preventScroll:!0,escapeBehavior:"close",forceVisible:!1,portal:"body",builder:"listbox",disabled:!1,required:!1,name:void 0,typeahead:!0,highlightOnHover:!0,onOutsideClick:void 0,preventTextSelectionOverflow:!0,rootElement:void 0},Nn=["trigger","menu","label"];function Ln(_){const e={...Dn,..._},t=ut(Se(null)),s=ut(Se(null)),o=e.selected??Se(e.defaultSelected),m=dt(o,e?.onSelectedChange),u=Me(s,n=>n?h(n):void 0),d=e.open??Se(e.defaultOpen),$=dt(d,e?.onOpenChange),ee=et({...tt(e,"open","defaultOpen","builder","ids"),multiple:e.multiple??!1}),{scrollAlignment:H,loop:A,closeOnOutsideClick:x,escapeBehavior:F,preventScroll:ae,portal:V,forceVisible:J,positioning:re,multiple:L,arrowSize:Y,disabled:ie,required:M,typeahead:oe,name:P,highlightOnHover:z,onOutsideClick:ge,preventTextSelectionOverflow:de,rootElement:a}=ee,C=a.get();je&&C===void 0?a.set(document):_?.portal===void 0&&V.set(C);const{name:l,selector:G}=ft(e.builder),R=et({...At(Nn),...e.ids}),{handleTypeaheadSearch:I}=Jt({onMatch:n=>{s.set(n),n.scrollIntoView({block:H.get()})},getCurrentItem(){return s.get()}});function h(n){const r=n.getAttribute("data-value"),N=n.getAttribute("data-label"),O=n.hasAttribute("data-disabled");return{value:r&&JSON.parse(r),label:N??n.textContent??void 0,disabled:!!O}}const q=n=>{m.update(r=>{if(L.get()){const O=Array.isArray(r)?[...r]:[];return ln(n,O,(Oe,ne)=>Be(Oe.value,ne.value))}return n})};function B(n){const r=h(n);q(r)}async function Q(){$.set(!0),await st();const n=Ue(R.menu.get(),a.get());if(!$e(n))return;const r=n.querySelector("[aria-selected=true]");$e(r)&&s.set(r)}function w(){$.set(!1),s.set(null)}const i=zt({open:$,forceVisible:J,activeTrigger:t}),k=Me([m],([n])=>r=>Array.isArray(n)?n.some(N=>Be(N.value,r)):Gt(r)?Be(n?.value,Yt(r,void 0)):Be(n?.value,r)),S=Me([u],([n])=>r=>Be(n?.value,r)),j=ue(l("trigger"),{stores:[$,s,ie,R.menu,R.trigger,R.label],returned:([n,r,N,O,Oe,ne])=>({"aria-activedescendant":r?.id,"aria-autocomplete":"list","aria-controls":O,"aria-expanded":n,"aria-labelledby":ne,"data-state":n?"open":"closed",id:Oe,role:"combobox",disabled:ht(N),type:e.builder==="select"?"button":void 0}),action:n=>{t.set(n);const r=ct(n),N=De(ye(n,"click",()=>{n.focus(),$.get()?w():Q()}),ye(n,"keydown",O=>{if(!$.get()){if(Rn.includes(O.key)||O.key===p.TAB||O.key===p.BACKSPACE&&r&&n.value===""||O.key===p.SPACE&&gt(n))return;Q(),st().then(()=>{if(m.get())return;const we=Ue(R.menu.get(),a.get());if(!$e(we))return;const f=Array.from(we.querySelectorAll(`${G("item")}:not([data-disabled]):not([data-hidden])`)).filter(Ie=>$e(Ie));f.length&&(O.key===p.ARROW_DOWN?(s.set(f[0]),f[0].scrollIntoView({block:H.get()})):O.key===p.ARROW_UP&&(s.set(it(f)),it(f).scrollIntoView({block:H.get()})))})}if(O.key===p.TAB){w();return}if(O.key===p.ENTER&&!O.isComposing||O.key===p.SPACE&&gt(n)){O.preventDefault();const ne=s.get();ne&&B(ne),L.get()||w()}if(O.key===p.ARROW_UP&&O.altKey&&w(),Qt.includes(O.key)){O.preventDefault();const ne=Ue(R.menu.get(),a.get());if(!$e(ne))return;const we=lt(ne);if(!we.length)return;const f=we.filter(bt=>!mt(bt)&&bt.dataset.hidden===void 0),Ie=s.get(),he=Ie?f.indexOf(Ie):-1,xe=A.get(),Ht=H.get();let Ce;switch(O.key){case p.ARROW_DOWN:Ce=tn(f,he,xe);break;case p.ARROW_UP:Ce=en(f,he,xe);break;case p.PAGE_DOWN:Ce=Zt(f,he,10,xe);break;case p.PAGE_UP:Ce=Xt(f,he,10,xe);break;case p.HOME:Ce=f[0];break;case p.END:Ce=it(f);break;default:return}s.set(Ce),Ce?.scrollIntoView({block:Ht})}else if(oe.get()){const ne=Ue(R.menu.get(),a.get());if(!$e(ne))return;I(O.key,lt(ne))}}));return{destroy(){t.set(null),N()}}}}),K=ue(l("menu"),{stores:[i,R.menu],returned:([n,r])=>({hidden:n?void 0:!0,id:r,role:"listbox",style:n?void 0:nt({display:"none"})}),action:n=>{let r=Re;const N=De(ke([i,V,x,re,t],([O,Oe,ne,we,f])=>{r(),!(!O||!f)&&st().then(()=>{r();const Ie=An(R.trigger.get());r=nn(n,{anchorElement:f,open:$,options:{floating:we,focusTrap:null,modal:{closeOnInteractOutside:ne,onClose:w,shouldCloseOnInteractOutside:he=>{if(ge.get()?.(he),he.defaultPrevented)return!1;const xe=he.target;return!(!Tt(xe)||xe===f||f.contains(xe)||Ie(he))}},escapeKeydown:{handler:w,behaviorType:F},portal:Pt(n,Oe),preventTextSelectionOverflow:{enabled:de}}}).destroy})}));return{destroy:()=>{N(),r()}}}}),{elements:{root:b}}=Pn(),{action:D}=Vt(b),te=ue(l("label"),{stores:[R.label,R.trigger],returned:([n,r])=>({id:n,for:r}),action:D}),ce=ue(l("option"),{stores:[k],returned:([n])=>r=>{const N=n(r.value);return{"data-value":JSON.stringify(r.value),"data-label":r.label,"data-disabled":ht(r.disabled),"aria-disabled":r.disabled?!0:void 0,"aria-selected":N,"data-selected":N?"":void 0,id:an(),role:"option"}},action:n=>({destroy:De(ye(n,"click",N=>{if(mt(n)){N.preventDefault();return}B(n),L.get()||w()}),ke(z,N=>N?De(ye(n,"mouseover",()=>{s.set(n)}),ye(n,"mouseleave",()=>{s.set(null)})):void 0))})}),le=ue(l("group"),{returned:()=>n=>({role:"group","aria-labelledby":n})}),U=ue(l("group-label"),{returned:()=>n=>({id:n})}),y=rn({value:Me([m],([n])=>{const r=Array.isArray(n)?n.map(N=>N.value):n?.value;return typeof r=="string"?r:JSON.stringify(r)}),name:Bt(P),required:M,prefix:e.builder}),me=ue(l("arrow"),{stores:Y,returned:n=>({"data-arrow":!0,style:nt({position:"absolute",width:`var(--arrow-size, ${n}px)`,height:`var(--arrow-size, ${n}px)`})})});return ke([s],([n])=>{if(!je)return;const r=Ue(R.menu.get(),a.get());$e(r)&&lt(r).forEach(N=>{N===n?sn(N):on(N)})}),ke([$,ae],([n,r])=>{if(!(!je||!n||!r))return Rt()}),{ids:R,elements:{trigger:j,group:le,option:ce,menu:K,groupLabel:U,label:te,hiddenInput:y,arrow:me},states:{open:$,selected:m,highlighted:u,highlightedItem:s},helpers:{isSelected:k,isHighlighted:S,closeMenu:w},options:ee}}const{name:Fn}=ft("combobox");function qt(_){const e=Ln({..._,builder:"combobox",typeahead:!1}),t=Se(""),s=Se(!1),o=ue(Fn("input"),{stores:[e.elements.trigger,t],returned:([m,u])=>({...tt(m,"action"),role:"combobox",value:u,autocomplete:"off"}),action:m=>{const u=De(ye(m,"input",$=>{!ct($.target)&&!yt($.target)||s.set(!0)}),un(m,"input",$=>{ct($.target)&&t.set($.target.value),yt($.target)&&t.set($.target.innerText)})),{destroy:d}=e.elements.trigger(m);return{destroy(){d?.(),u()}}}});return ke(e.states.open,m=>{m||s.set(!1)}),{...e,elements:{...tt(e.elements,"trigger"),input:o},states:{...e.states,touchedInput:s,inputValue:t}}}const{name:Pe}=ft("dialog"),Mn={preventScroll:!0,escapeBehavior:"close",closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:"body",forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},qn=["content","title","description"];function Wt(_){const e={...Mn,..._},t=et(tt(e,"ids")),{preventScroll:s,escapeBehavior:o,closeOnOutsideClick:m,role:u,portal:d,forceVisible:$,openFocus:ee,closeFocus:H,onOutsideClick:A}=t,x=ut.writable(null),F=et({...At(qn),...e.ids}),ae=e.open??Se(e.defaultOpen),V=dt(ae,e?.onOpenChange),J=Me([V,$],([a,C])=>a||C);let re=Re;function L(a){const C=a.currentTarget,l=a.currentTarget;!$e(C)||!$e(l)||(V.set(!0),x.set(l))}function Y(){V.set(!1)}const ie=ue(Pe("trigger"),{stores:[V],returned:([a])=>({"aria-haspopup":"dialog","aria-expanded":a,type:"button"}),action:a=>({destroy:De(ye(a,"click",l=>{L(l)}),ye(a,"keydown",l=>{l.key!==p.ENTER&&l.key!==p.SPACE||(l.preventDefault(),L(l))}))})}),M=ue(Pe("overlay"),{stores:[J,V],returned:([a,C])=>({hidden:a?void 0:!0,tabindex:-1,style:a?void 0:nt({display:"none"}),"aria-hidden":!0,"data-state":C?"open":"closed"})}),oe=ue(Pe("content"),{stores:[J,F.content,F.description,F.title,V],returned:([a,C,l,G,R])=>({id:C,role:u.get(),"aria-describedby":l,"aria-labelledby":G,"aria-modal":a?"true":void 0,"data-state":R?"open":"closed",tabindex:-1,hidden:a?void 0:!0,style:a?void 0:nt({display:"none"})}),action:a=>{let C=Re,l=Re,G=Re;const R=ke([J,m],([I,h])=>{l(),C(),G(),I&&(l=dn(a,{closeOnInteractOutside:h,onClose:Y,shouldCloseOnInteractOutside(q){return A.get()?.(q),!q.defaultPrevented}}).destroy,C=cn(a,{handler:Y,behaviorType:o}).destroy,G=vn(a,{fallbackFocus:a}).destroy)});return{destroy:()=>{re(),R(),l(),C(),G()}}}}),P=ue(Pe("portalled"),{stores:d,returned:a=>({"data-portal":fn(a)}),action:a=>{const C=ke([d],([l])=>{if(l===null)return Re;const G=Pt(a,l);return G===null?Re:pn(a,G).destroy});return{destroy(){C()}}}}),z=ue(Pe("title"),{stores:[F.title],returned:([a])=>({id:a})}),ge=ue(Pe("description"),{stores:[F.description],returned:([a])=>({id:a})}),de=ue(Pe("close"),{returned:()=>({type:"button"}),action:a=>({destroy:De(ye(a,"click",()=>{Y()}),ye(a,"keydown",l=>{l.key!==p.SPACE&&l.key!==p.ENTER||(l.preventDefault(),Y())}))})});return ke([V,s],([a,C])=>{if(je){if(C&&a&&(re=Rt()),a){const l=document.getElementById(F.content.get());_t({prop:ee.get(),defaultEl:l})}return()=>{$.get()||re()}}}),ke(V,a=>{!je||a||_t({prop:H.get(),defaultEl:x.get()})},{skipFirstRun:!0}),{ids:F,elements:{content:oe,trigger:ie,title:z,description:ge,overlay:M,close:de,portalled:P},states:{open:V},options:t}}function kt(_,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let t=Xe(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"}],["circle",{cx:"12",cy:"12",r:"10"}]];Ge(_,Qe({name:"earth"},()=>t,{get iconNode(){return s},children:(o,m)=>{var u=Ne(),d=_e(u);Ye(d,()=>e.children??ze),W(o,u)},$$slots:{default:!0}})),be()}function Et(_,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let t=Xe(e,["$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"16",r:"1"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3"}]];Ge(_,Qe({name:"lock-keyhole"},()=>t,{get iconNode(){return s},children:(o,m)=>{var u=Ne(),d=_e(u);Ye(d,()=>e.children??ze),W(o,u)},$$slots:{default:!0}})),be()}function Wn(_,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let t=Xe(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];Ge(_,Qe({name:"pencil"},()=>t,{get iconNode(){return s},children:(o,m)=>{var u=Ne(),d=_e(u);Ye(d,()=>e.children??ze),W(o,u)},$$slots:{default:!0}})),be()}function Hn(_,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let t=Xe(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];Ge(_,Qe({name:"trash-2"},()=>t,{get iconNode(){return s},children:(o,m)=>{var u=Ne(),d=_e(u);Ye(d,()=>e.children??ze),W(o,u)},$$slots:{default:!0}})),be()}function Ot(_,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let t=Xe(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M18 21a8 8 0 0 0-16 0"}],["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"}]];Ge(_,Qe({name:"users-round"},()=>t,{get iconNode(){return s},children:(o,m)=>{var u=Ne(),d=_e(u);Ye(d,()=>e.children??ze),W(o,u)},$$slots:{default:!0}})),be()}var Vn=(_,e,t,s)=>e.onClickRemove(t()),Bn=se('<button type="button"><!></button>'),Un=se('<div class="tag svelte-nisp7u"> <!></div>');function jn(_,e){pe(e,!0);const[t,s]=Fe(),o=()=>c(m,"$person",t);pt(e.webId);let m=Ft(qe,e.webId);var u=Un(),d=E(u),$=T(d);{var ee=H=>{var A=Bn();A.__click=[Vn,e,o,m];var x=E(A);vt(x,{"aria-hidden":"true",size:"1.25rem"}),g(A),Le(()=>Lt(A,"aria-label",`Remove ${o().name}`)),W(H,A)};fe($,H=>{e.onClickRemove&&H(ee)})}g(u),Le(()=>Ze(d,`${o().name??""} `)),W(_,u),be(),s()}xt(["click"]);var Kn=se("<li> </li>"),Jn=se('<li><div><span class="font-medium"> </span></div></li>'),zn=se(`<li class="relative cursor-pointer rounded-md py-1 pl-8 pr-4
        data-[highlighted]:bg-magnum-100 data-[highlighted]:text-magnum-700">No results found</li>`),Gn=se("<ul><!>  <!></ul>"),Yn=se('<div><div><div class="selected-people svelte-8dggyk"></div> <input/></div></div> <!>',1);function Qn(_,e){pe(e,!0);const[t,s]=Fe(),o=()=>c(oe,"$inputValue",t),m=()=>c(M,"$open",t),u=()=>c(z,"$selected",t),d=()=>c(rt,"$session",t),$=()=>c(P,"$touchedInput",t),ee=()=>c(l,"$friends",t),H=()=>c(Y,"$input",t),A=()=>c(L,"$menu",t),x=()=>c(v(h),"$personByWebId",t),F=()=>c(v(I),"$personResourceResult",t),ae=()=>c(ie,"$option",t),V=()=>c(v(q),"$matched",t);let J=St(e,"value",15),re=Ke(at([]));const{elements:{menu:L,input:Y,option:ie},states:{open:M,inputValue:oe,touchedInput:P,selected:z},helpers:{isSelected:ge,isHighlighted:de}}=qt({multiple:!0,onSelectedChange:b=>{const D=b.next?.map(te=>te.value)??[];return Te(re,D,!0),J(D),Ae(oe,""),Ae(M,!1),b.next}});Ee(()=>{J().length!==u()?.length&&Ae(z,J().map(b=>({value:b,label:""})))});let a;const C=b=>{clearTimeout(a),a=setTimeout(b,450)};gn(qe,d().info.webId,d().info.webId,{name:!0,knows:{name:!0}});let l=wt(qe,d().info.webId,$n.knows),G=Ke("");Ee(()=>{const b=o();$()?C(()=>{Te(G,b,!0)}):Te(G,b,!0)});let R=ve(()=>ee().filter(b=>b.name?.toLowerCase().includes(o().toLowerCase())||b["@id"]?.toLowerCase().includes(o().toLowerCase()))),I=ve(()=>pt(v(G))),h=ve(()=>Ft(qe,v(G))),q=ve(()=>wt(qe,v(G),wn.oidcIssuer));const B=b=>{J(J().filter(D=>D!==b["@id"]))};var Q=Yn(),w=_e(Q),i=E(w),k=E(i);Je(k,20,()=>v(re),b=>b,(b,D)=>{jn(b,{get webId(){return D},onClickRemove:B})}),g(k);var S=T(k,2);Ve(S),Z(S,()=>({...H(),disabled:e.disabled||H().disabled,placeholder:"Name or webId"}),void 0,void 0,"svelte-8dggyk"),X(S,b=>Y?.(b)),g(i),g(w);var j=T(w,2);{var K=b=>{var D=Gn();Z(D,()=>({class:"menu",...A()}),void 0,void 0,"svelte-8dggyk");var te=E(D);{var ce=U=>{var y=Kn();Z(y,n=>({...n}),[()=>ae()({value:x()["@id"],label:x().name??x()["@id"],disabled:F().isPresent()!==!0||V().size===0})],void 0,"svelte-8dggyk");var me=E(y,!0);g(y),X(y,n=>ie?.(n)),Le(()=>Ze(me,x().name??x()["@id"])),W(U,y)};fe(te,U=>{x()?.["@id"]&&!F()?.isError&&U(ce)})}var le=T(te,2);Je(le,17,()=>v(R),U=>U["@id"],(U,y)=>{var me=Jn();Z(me,O=>({...O}),[()=>ae()({value:v(y)["@id"],label:v(y).name??v(y)["@id"]})],void 0,"svelte-8dggyk");var n=E(me),r=E(n),N=E(r,!0);g(r),g(n),g(me),X(me,O=>ie?.(O)),Le(()=>Ze(N,v(y).name??v(y)["@id"])),W(U,me)},U=>{var y=zn();W(U,y)}),g(D),X(D,U=>L?.(U)),Dt(3,D,()=>Nt,()=>({duration:150,y:-5})),W(b,D)};fe(j,b=>{m()&&b(K)})}W(_,Q),be(),s()}var Xn=se("<button><!></button>"),Zn=se('<div><div></div> <div><h2>Visibility</h2> <p></p> <form class="svelte-1r4q63y"><div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="private"/><label for="private" aria-label="Private"><!></label></div> <div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="shared" aria-label="Shared"/><label for="shared" aria-label="Shared"><!></label> <!></div> <div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="public" aria-label="Public"/><label for="public" aria-label="Public"><!></label></div> <button type="submit">Confirm</button></form> <button><!></button></div></div>'),ea=se("<!> <!>",1);function ta(_,e){pe(e,!0);const[t,s]=Fe(),o=()=>c(ie,"$open",t),m=()=>c(F,"$trigger",t),u=()=>c(ae,"$portalled",t),d=()=>c(V,"$overlay",t),$=()=>c(J,"$content",t),ee=()=>c(re,"$title",t),H=()=>c(L,"$description",t),A=()=>c(Y,"$close",t),x=[],{elements:{trigger:F,portalled:ae,overlay:V,content:J,title:re,description:L,close:Y},states:{open:ie}}=Wt();var M=(I=>(I.private="private",I.shared="shared",I.public="public",I))(M||{});let oe=ve(()=>e.wac?e.wac.public.read?"public":Object.entries(e.wac.agent).some(([I,h])=>I!==e.self&&h.read)?"shared":"private":void 0);const P=at({visibility:void 0,selected:[]});Ee(()=>{P.visibility=v(oe)});let z=ve(()=>!!e.wac?.agent[e.self].control);Ee(()=>{if(!e.wac)return;const I=Object.entries(e.wac.agent).filter(([h,q])=>h!==e.self&&q.read===!0).map(([h])=>h);P.selected=I});const ge=async I=>{if(I.preventDefault(),!e.wac)throw new Error;let h=JSON.parse(JSON.stringify(e.wac));if(P.visibility==="public")h.public.read=!0;else if(P.visibility==="shared"&&P.selected.length>0){h.public.read=!1;for(let q in h.agent)q!==e.self&&(h.agent[q].read=!1);P.selected.forEach(q=>{h.agent[q]??={read:!1,append:!1,write:!1,control:!1},h.agent[q].read=!0})}else h=void 0;await e.onchangewac(h),Ae(ie,!1)};var de=ea(),a=_e(de);{var C=I=>{var h=Xn();Z(h,()=>({"aria-label":`Privacy and sharing: ${v(oe)}`,...m()}),void 0,void 0,"svelte-1r4q63y");var q=E(h);{var B=w=>{{let i=ve(()=>v(z)?"green":"black");Et(w,{"aria-hidden":"true",get color(){return v(i)}})}},Q=w=>{var i=Ne(),k=_e(i);{var S=K=>{{let b=ve(()=>v(z)?"green":"black");Ot(K,{"aria-hidden":"true",get color(){return v(b)}})}},j=K=>{var b=Ne(),D=_e(b);{var te=ce=>{{let le=ve(()=>v(z)?"green":"black");kt(ce,{"aria-hidden":"true",get color(){return v(le)}})}};fe(D,ce=>{v(oe)===M.public&&ce(te)},!0)}W(K,b)};fe(k,K=>{v(oe)===M.shared?K(S):K(j,!1)},!0)}W(w,i)};fe(q,w=>{v(oe)===M.private?w(B):w(Q,!1)})}g(h),X(h,w=>F?.(w)),W(I,h)},l=I=>{bn(I,{})};fe(a,I=>{e.wac?I(C):I(l,!1)})}var G=T(a,2);{var R=I=>{var h=Zn();Z(h,()=>({...u()}),void 0,void 0,"svelte-1r4q63y");var q=E(h);Z(q,()=>({class:"overlay",...d()}),void 0,void 0,"svelte-1r4q63y"),X(q,f=>V?.(f));var B=T(q,2);Z(B,()=>({class:"content",...$()}),void 0,void 0,"svelte-1r4q63y");var Q=E(B);Z(Q,()=>({class:"title",...ee()}),void 0,void 0,"svelte-1r4q63y"),X(Q,f=>re?.(f));var w=T(Q,2);Z(w,()=>({...H()}),void 0,void 0,"svelte-1r4q63y"),X(w,f=>L?.(f));var i=T(w,2),k=E(i),S=E(k);Ve(S);var j,K=T(S),b=E(K);Et(b,{"aria-hidden":"true"}),g(K),g(k);var D=T(k,2),te=E(D);Ve(te);var ce,le=T(te),U=E(le);Ot(U,{"aria-hidden":"true"}),g(le);var y=T(le,2);{var me=f=>{{let Ie=ve(()=>P.visibility!==M.shared);Qn(f,{get disabled(){return v(Ie)},get value(){return P.selected},set value(he){P.selected=he}})}};fe(y,f=>{P.visibility===M.shared&&f(me)})}g(D);var n=T(D,2),r=E(n);Ve(r);var N,O=T(r),Oe=E(O);kt(Oe,{"aria-hidden":"true"}),g(O),g(n),It(2),g(i);var ne=T(i,2);Z(ne,()=>({class:"close",...A()}),void 0,void 0,"svelte-1r4q63y");var we=E(ne);vt(we,{}),g(ne),X(ne,f=>Y?.(f)),g(B),X(B,f=>J?.(f)),g(h),X(h,f=>ae?.(f)),Le(()=>{j!==(j=M.private)&&(S.value=(S.__value=M.private)??""),ce!==(ce=M.shared)&&(te.value=(te.__value=M.shared)??""),N!==(N=M.public)&&(r.value=(r.__value=M.public)??"")}),Ct("submit",i,ge),ot(x,[],S,()=>(M.private,P.visibility),f=>P.visibility=f),ot(x,[],te,()=>(M.shared,P.visibility),f=>P.visibility=f),ot(x,[],r,()=>(M.public,P.visibility),f=>P.visibility=f),W(I,h)};fe(G,I=>{o()&&I(R)})}W(_,de),be(),s()}function na(_,e){pe(e,!0);const[t,s]=Fe(),o=()=>c(u,"$resource",t),m=()=>c(rt,"$session",t),u=pt(e.uri);let d=Ke(void 0);Ee(()=>{o().getWac().then(A=>{if(A.isError)throw A;Te(d,A,!0)})});const{getResource:$,getSubject:ee}=Mt(),H=async A=>{if(o()?.type!=="SolidLeaf")throw new Error("not a leaf");if(!v(d))throw new Error;let x=JSON.parse(JSON.stringify(v(d).wacRule));if(A===void 0){const L=await mn(o(),{fetch:m().fetch});if(L.isError)throw L;const Y=L.wacUri;await $(Y).delete()}else await o().setWac(A);const F=await o().getWac({ignoreCache:!0});if(F.isError)throw F;Te(d,F,!0);const ae=F.wacRule,V=ae.public.read?"public":Object.entries(ae.agent).some(([L,Y])=>L!==m().info.webId&&Y.read)?"shared":"private";We({data:{title:"Update successful",description:`Access was updated to ${V}`,type:He.success}}),x.public.read!==ae.public.read&&We({data:{title:"TODO Notification successful",description:"Public geoindex was notified",type:He.success}});const J=Object.keys(ae.agent),re=Object.keys(x.agent);for(let L of J)re.includes(L)||We({data:{title:"TODO Notification successful",description:`${ee(qe,L)?.name} was notified`,type:He.success}})};{let A=ve(()=>v(d)?.wacRule);ta(_,{get wac(){return v(A)},get self(){return m().info.webId},onchangewac:H})}be(),s()}var aa=se('<img alt="" width="1rem" height="1rem"/>'),ra=se('<li><div><span class="font-medium"><!> </span></div></li>'),sa=se("<li>No results found</li>"),ia=se("<ul></ul>"),oa=se('<div><div><div class="selected-topics svelte-16y20vs"></div> <input/></div></div> <!>',1);function la(_,e){pe(e,!0);const[t,s]=Fe(),o=()=>c(L,"$inputValue",t),m=()=>c(re,"$open",t),u=()=>c(ie,"$selected",t),d=()=>c(Y,"$touchedInput",t),$=()=>c(C,"$query",t),ee=()=>c(V,"$input",t),H=()=>c(ae,"$menu",t),A=()=>c(J,"$option",t);let x=St(e,"value",15),F=Ke(at([]));const{elements:{menu:ae,input:V,option:J},states:{open:re,inputValue:L,touchedInput:Y,selected:ie},helpers:{isSelected:M,isHighlighted:oe}}=qt({multiple:!0,onSelectedChange:i=>{const k=i.next?.map(S=>S.value)??[];return Te(F,k,!0),x(k),Ae(L,""),Ae(re,!1),i.next}});Ee(()=>{x().length!==u()?.length&&Ae(ie,x().map(i=>({value:i,label:""})))});let P;const z=i=>{clearTimeout(P),P=setTimeout(i,450)},ge=Se("");Ee(()=>ge.set(v(de)));let de=Ke("");Ee(()=>{const i=o();d()?z(()=>{Te(de,i,!0)}):Te(de,i,!0)});const a=Me(ge,i=>({queryKey:["topic",i,"en"],queryFn:()=>In(i,"en"),initialData:[],initialDataUpdatedAt:0,staleTime:3e5})),C=xn(a);let l=ve(()=>$().data.filter(i=>i.label?.toLowerCase().includes(o().toLowerCase())||i.aliases.some(k=>k.toLowerCase().includes(o().toLowerCase()))));const G=i=>{console.log(i.uri,"****"),x(x().filter(k=>k!==i.uri)),x(x())};var R=oa(),I=_e(R),h=E(I),q=E(h);Je(q,20,()=>v(F),i=>i,(i,k)=>{Cn(i,{get uri(){return k},onClickRemove:G})}),g(q);var B=T(q,2);Ve(B),Z(B,()=>({...ee(),disabled:e.disabled||ee().disabled,placeholder:"Search topics"}),void 0,void 0,"svelte-16y20vs"),X(B,i=>V?.(i)),g(h),g(I);var Q=T(I,2);{var w=i=>{var k=ia();Z(k,()=>({class:"menu",...H()}),void 0,void 0,"svelte-16y20vs"),Je(k,21,()=>v(l),S=>S.id,(S,j)=>{var K=ra();Z(K,U=>({...U}),[()=>A()({value:v(j).uri,label:v(j).label})],void 0,"svelte-16y20vs");var b=E(K),D=E(b),te=E(D);{var ce=U=>{var y=aa();Le(()=>Lt(y,"src",v(j).image)),W(U,y)};fe(te,U=>{v(j).image&&U(ce)})}var le=T(te);g(D),g(b),g(K),X(K,U=>J?.(U)),Le(()=>Ze(le,` ${v(j).label??""}
            ${v(j).image??""} (${v(j).id??""})`)),W(S,K)},S=>{var j=sa();W(S,j)}),g(k),X(k,S=>ae?.(S)),Dt(3,k,()=>Nt,()=>({duration:150,y:-5})),W(i,k)};fe(Q,i=>{m()&&i(w)})}W(_,R),be(),s()}const ua=async(_,e,t,s)=>{const{name:o}=e.place;if(globalThis.confirm(`Do you really want to delete place ${o} (${e.place["@id"]})?`)){const u=t.getResource(e.place["@id"]);if(u.isError)throw u;const d=await hn(u,{fetch:s().fetch,dataset:t});d.isError?We({data:{type:He.error,title:"Deletion failed",description:d.name}}):We({data:{type:He.success,title:"Deletion successful",description:`Deleted place ${o}`}})}};var da=se('<div><div></div> <div><h2>Update Place</h2> <p></p> <form class="svelte-5hf8eu"><div class="field svelte-5hf8eu"><label for="name">Name</label> <input id="name" type="text" name="name" placeholder="name"/></div> <div class="field svelte-5hf8eu"><label for="description">Description</label> <textarea id="description" name="description" placeholder="description"></textarea></div> <!> <button type="submit">Update place</button></form> <button><!></button></div></div>'),ca=se('<div class="controls svelte-5hf8eu"><!> <button><!></button> <button aria-label="Delete place"><!></button></div> <!>',1);function va(_,e){pe(e,!0);const[t,s]=Fe(),o=()=>c(P,"$open",t),m=()=>c(rt,"$session",t),u=()=>c(J,"$trigger",t),d=()=>c(re,"$portalled",t),$=()=>c(L,"$overlay",t),ee=()=>c(Y,"$content",t),H=()=>c(ie,"$title",t),A=()=>c(M,"$description",t),x=()=>c(oe,"$close",t),{changeData:F,commitData:ae,dataset:V}=Mt(),{elements:{trigger:J,portalled:re,overlay:L,content:Y,title:ie,description:M,close:oe},states:{open:P}}=Wt(),z=at({name:e.place.name,description:e.place.description,latitude:e.place.geo.latitude,longitude:e.place.geo.longitude,topics:e.place.topic?.map(B=>B["@id"])??[]}),ge=async B=>{B.preventDefault();const{name:Q}=e.place,w=V.getResource(e.place["@id"]);if(w.isError)throw w;const i=F(e.place,w);i.name=z.name,i.description=z.description,i.topic=_n(...z.topics.map(S=>({"@id":S})));const k=await ae(i);if(k.isError)throw k;Ae(P,!1),We({data:{title:"Update successful",description:`Updated place ${Q}`,type:He.success}})};var de=ca(),a=_e(de),C=E(a);na(C,{get uri(){return e.place["@id"]}});var l=T(C,2);Z(l,()=>({"aria-label":"Edit place",...u()}),void 0,void 0,"svelte-5hf8eu");var G=E(l);Wn(G,{"aria-hidden":"true"}),g(l),X(l,B=>J?.(B));var R=T(l,2);R.__click=[ua,e,V,m];var I=E(R);Hn(I,{"aria-hidden":"true"}),g(R),g(a);var h=T(a,2);{var q=B=>{var Q=da();Z(Q,()=>({...d()}),void 0,void 0,"svelte-5hf8eu");var w=E(Q);Z(w,()=>({class:"overlay",...$()}),void 0,void 0,"svelte-5hf8eu"),X(w,y=>L?.(y));var i=T(w,2);Z(i,()=>({class:"content",...ee()}),void 0,void 0,"svelte-5hf8eu");var k=E(i);Z(k,()=>({class:"title",...H()}),void 0,void 0,"svelte-5hf8eu"),X(k,y=>ie?.(y));var S=T(k,2);Z(S,()=>({...A()}),void 0,void 0,"svelte-5hf8eu"),X(S,y=>M?.(y));var j=T(S,2),K=E(j),b=T(E(K),2);Ve(b),g(K);var D=T(K,2),te=T(E(D),2);Ut(te),g(D);var ce=T(D,2);la(ce,{get value(){return z.topics},set value(y){z.topics=y}}),It(2),g(j);var le=T(j,2);Z(le,()=>({class:"close",...x()}),void 0,void 0,"svelte-5hf8eu");var U=E(le);vt(U,{}),g(le),X(le,y=>oe?.(y)),g(i),X(i,y=>Y?.(y)),g(Q),X(Q,y=>re?.(y)),Ct("submit",j,ge),$t(b,()=>z.name,y=>z.name=y),$t(te,()=>z.description,y=>z.description=y),W(B,Q)};fe(h,B=>{o()&&B(q)})}W(_,de),be(),s()}xt(["click"]);var fa=se("<li><!></li>"),pa=se('<ul data-testid="place-list"></ul>');function Ca(_,e){pe(e,!0);const[t,s]=Fe(),o=()=>c(rt,"$session",t),m=()=>c(u,"$places",t);Ee(()=>{o().info.webId&&kn(o().info.webId,o().fetch).then(()=>{console.log("query run and finished")})});const u=yn(Tn,En.type,On.Place);var d=pa();Je(d,5,m,$=>$["@id"],($,ee)=>{var H=fa(),A=E(H);Sn(A,{get place(){return v(ee)},children:(x,F)=>{va(x,{get place(){return v(ee)}})},$$slots:{default:!0}}),g(H),W($,H)}),g(d),W(_,d),be(),s()}export{Ca as component};
