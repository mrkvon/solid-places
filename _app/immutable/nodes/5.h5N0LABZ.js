import"../chunks/DsnmJJEf.js";import{as as tt,ai as be,at as Te,aj as _e,_ as Je,a as q,al as ge,f as le,am as k,an as C,ap as _,ak as je,aq as st,a5 as Ot,b as Fe,$ as He,g as $,au as ve,n as It}from"../chunks/CVXStvyL.js";import{e as it}from"../chunks/C4xM10tr.js";import{a as h,s as Me,b as Ve}from"../chunks/DCLxvnlw.js";import{w as Ae,t as qe,g as Mt,v as Wt,c as Ke,f as xt,a as ot,e as Pt,r as Lt}from"../chunks/BXlc4ceW.js";import{i as ye}from"../chunks/Cgv_sWxw.js";import{i as he,g as qt,a as St,b as Ht,m as re,c as pe,w as lt,o as ct,t as Qe,d as Xe,e as Be,f as ut,h as At,j as Vt,k as Bt,l as We,n as Ut,s as jt,p as Ce,q as u,r as bt,u as Le,v as nt,F as Jt,x as gt,y as Kt,z as zt,A as Gt,B as Yt,C as mt,D as dt,E as $e,G as Qt,H as Ct,I as Se,J as Ze,K as Xt,L as Zt,M as en,N as tn,O as Tt,P as nn,Q as an,R as ht,S as rn,T as sn,U as on,V as ln,W as cn,X as yt,Y as ze,Z as Re,_ as ft,$ as z,a0 as dn,a1 as un,a2 as fn,a3 as De,a4 as Ne}from"../chunks/DIDDYduG.js";import{s as vn,r as Ue,a as G,c as at,b as _t}from"../chunks/GuTiBxeJ.js";import{h as vt,i as Rt,j as pn,k as wt,b as et,l as bn,u as Dt,m as gn,a as mn}from"../chunks/MZ-F8SYP.js";import{s as Ge,r as Ye,p as hn}from"../chunks/BwakM5-C.js";import{f as yn,a as _n,q as wn,r as $n,s as kn}from"../chunks/CcmY0cPZ.js";import{P as En}from"../chunks/BswJiAuv.js";import{P as On}from"../chunks/BzEzGBMK.js";function rt(p){return Array.from(p.querySelectorAll('[role="option"]:not([data-disabled])')).filter(e=>he(e))}function In(p){return e=>{const n=e.target,s=qt(p);if(!s||!St(n))return!1;const i=s.id;return!!(Ht(n)&&i===n.htmlFor||n.closest(`label[for="${i}"]`))}}function xn(){return{elements:{root:re("label",{action:e=>({destroy:pe(e,"mousedown",s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})})})}}}const Pn=[u.ARROW_LEFT,u.ESCAPE,u.ARROW_RIGHT,u.SHIFT,u.CAPS_LOCK,u.CONTROL,u.ALT,u.META,u.ENTER,u.F1,u.F2,u.F3,u.F4,u.F5,u.F6,u.F7,u.F8,u.F9,u.F10,u.F11,u.F12],Sn={positioning:{placement:"bottom",sameWidth:!0},scrollAlignment:"nearest",loop:!0,defaultOpen:!1,closeOnOutsideClick:!0,preventScroll:!0,escapeBehavior:"close",forceVisible:!1,portal:"body",builder:"listbox",disabled:!1,required:!1,name:void 0,typeahead:!0,highlightOnHover:!0,onOutsideClick:void 0,preventTextSelectionOverflow:!0,rootElement:void 0},An=["trigger","menu","label"];function Cn(p){const e={...Sn,...p},n=lt(Ae(null)),s=lt(Ae(null)),i=e.selected??Ae(e.defaultSelected),f=ct(i,e?.onSelectedChange),l=qe(s,t=>t?b(t):void 0),c=e.open??Ae(e.defaultOpen),g=ct(c,e?.onOpenChange),Y=Qe({...Xe(e,"open","defaultOpen","builder","ids"),multiple:e.multiple??!1}),{scrollAlignment:F,loop:x,closeOnOutsideClick:T,escapeBehavior:M,preventScroll:ne,portal:W,forceVisible:B,positioning:ae,multiple:R,arrowSize:U,disabled:oe,required:P,typeahead:se,name:S,highlightOnHover:Q,onOutsideClick:ke,preventTextSelectionOverflow:me,rootElement:a}=Y,I=a.get();Be&&I===void 0?a.set(document):p?.portal===void 0&&W.set(I);const{name:o,selector:H}=ut(e.builder),A=Qe({...At(An),...e.ids}),{handleTypeaheadSearch:E}=Vt({onMatch:t=>{s.set(t),t.scrollIntoView({block:F.get()})},getCurrentItem(){return s.get()}});function b(t){const r=t.getAttribute("data-value"),O=t.getAttribute("data-label"),m=t.hasAttribute("data-disabled");return{value:r&&JSON.parse(r),label:O??t.textContent??void 0,disabled:!!m}}const L=t=>{f.update(r=>{if(R.get()){const m=Array.isArray(r)?[...r]:[];return nn(t,m,(Ee,V)=>We(Ee.value,V.value))}return t})};function j(t){const r=b(t);L(r)}async function J(){g.set(!0),await tt();const t=Le(A.menu.get(),a.get());if(!he(t))return;const r=t.querySelector("[aria-selected=true]");he(r)&&s.set(r)}function y(){g.set(!1),s.set(null)}const D=Bt({open:g,forceVisible:B,activeTrigger:n}),K=qe([f],([t])=>r=>Array.isArray(t)?t.some(O=>We(O.value,r)):Ut(r)?We(t?.value,jt(r,void 0)):We(t?.value,r)),X=qe([l],([t])=>r=>We(t?.value,r)),ce=re(o("trigger"),{stores:[g,s,oe,A.menu,A.trigger,A.label],returned:([t,r,O,m,Ee,V])=>({"aria-activedescendant":r?.id,"aria-autocomplete":"list","aria-controls":m,"aria-expanded":t,"aria-labelledby":V,"data-state":t?"open":"closed",id:Ee,role:"combobox",disabled:mt(O),type:e.builder==="select"?"button":void 0}),action:t=>{n.set(t);const r=dt(t),O=Ce(pe(t,"click",()=>{t.focus(),g.get()?y():J()}),pe(t,"keydown",m=>{if(!g.get()){if(Pn.includes(m.key)||m.key===u.TAB||m.key===u.BACKSPACE&&r&&t.value===""||m.key===u.SPACE&&bt(t))return;J(),tt().then(()=>{if(f.get())return;const we=Le(A.menu.get(),a.get());if(!he(we))return;const d=Array.from(we.querySelectorAll(`${H("item")}:not([data-disabled]):not([data-hidden])`)).filter(Oe=>he(Oe));d.length&&(m.key===u.ARROW_DOWN?(s.set(d[0]),d[0].scrollIntoView({block:F.get()})):m.key===u.ARROW_UP&&(s.set(nt(d)),nt(d).scrollIntoView({block:F.get()})))})}if(m.key===u.TAB){y();return}if(m.key===u.ENTER&&!m.isComposing||m.key===u.SPACE&&bt(t)){m.preventDefault();const V=s.get();V&&j(V),R.get()||y()}if(m.key===u.ARROW_UP&&m.altKey&&y(),Jt.includes(m.key)){m.preventDefault();const V=Le(A.menu.get(),a.get());if(!he(V))return;const we=rt(V);if(!we.length)return;const d=we.filter(pt=>!gt(pt)&&pt.dataset.hidden===void 0),Oe=s.get(),fe=Oe?d.indexOf(Oe):-1,Ie=x.get(),Ft=F.get();let xe;switch(m.key){case u.ARROW_DOWN:xe=Yt(d,fe,Ie);break;case u.ARROW_UP:xe=Gt(d,fe,Ie);break;case u.PAGE_DOWN:xe=zt(d,fe,10,Ie);break;case u.PAGE_UP:xe=Kt(d,fe,10,Ie);break;case u.HOME:xe=d[0];break;case u.END:xe=nt(d);break;default:return}s.set(xe),xe?.scrollIntoView({block:Ft})}else if(se.get()){const V=Le(A.menu.get(),a.get());if(!he(V))return;E(m.key,rt(V))}}));return{destroy(){n.set(null),O()}}}}),Z=re(o("menu"),{stores:[D,A.menu],returned:([t,r])=>({hidden:t?void 0:!0,id:r,role:"listbox",style:t?void 0:Ze({display:"none"})}),action:t=>{let r=Se;const O=Ce($e([D,W,T,ae,n],([m,Ee,V,we,d])=>{r(),!(!m||!d)&&tt().then(()=>{r();const Oe=In(A.trigger.get());r=Qt(t,{anchorElement:d,open:g,options:{floating:we,focusTrap:null,modal:{closeOnInteractOutside:V,onClose:y,shouldCloseOnInteractOutside:fe=>{if(ke.get()?.(fe),fe.defaultPrevented)return!1;const Ie=fe.target;return!(!St(Ie)||Ie===d||d.contains(Ie)||Oe(fe))}},escapeKeydown:{handler:y,behaviorType:M},portal:Ct(t,Ee),preventTextSelectionOverflow:{enabled:me}}}).destroy})}));return{destroy:()=>{O(),r()}}}}),{elements:{root:v}}=xn(),{action:N}=Mt(v),ee=re(o("label"),{stores:[A.label,A.trigger],returned:([t,r])=>({id:t,for:r}),action:N}),ie=re(o("option"),{stores:[K],returned:([t])=>r=>{const O=t(r.value);return{"data-value":JSON.stringify(r.value),"data-label":r.label,"data-disabled":mt(r.disabled),"aria-disabled":r.disabled?!0:void 0,"aria-selected":O,"data-selected":O?"":void 0,id:Xt(),role:"option"}},action:t=>({destroy:Ce(pe(t,"click",O=>{if(gt(t)){O.preventDefault();return}j(t),R.get()||y()}),$e(Q,O=>O?Ce(pe(t,"mouseover",()=>{s.set(t)}),pe(t,"mouseleave",()=>{s.set(null)})):void 0))})}),de=re(o("group"),{returned:()=>t=>({role:"group","aria-labelledby":t})}),w=re(o("group-label"),{returned:()=>t=>({id:t})}),te=Zt({value:qe([f],([t])=>{const r=Array.isArray(t)?t.map(O=>O.value):t?.value;return typeof r=="string"?r:JSON.stringify(r)}),name:Wt(S),required:P,prefix:e.builder}),ue=re(o("arrow"),{stores:U,returned:t=>({"data-arrow":!0,style:Ze({position:"absolute",width:`var(--arrow-size, ${t}px)`,height:`var(--arrow-size, ${t}px)`})})});return $e([s],([t])=>{if(!Be)return;const r=Le(A.menu.get(),a.get());he(r)&&rt(r).forEach(O=>{O===t?en(O):tn(O)})}),$e([g,ne],([t,r])=>{if(!(!Be||!t||!r))return Tt()}),{ids:A,elements:{trigger:ce,group:de,option:ie,menu:Z,groupLabel:w,label:ee,hiddenInput:te,arrow:ue},states:{open:g,selected:f,highlighted:l,highlightedItem:s},helpers:{isSelected:K,isHighlighted:X,closeMenu:y},options:Y}}const{name:Tn}=ut("combobox");function Rn(p){const e=Cn({...p,builder:"combobox",typeahead:!1}),n=Ae(""),s=Ae(!1),i=re(Tn("input"),{stores:[e.elements.trigger,n],returned:([f,l])=>({...Xe(f,"action"),role:"combobox",value:l,autocomplete:"off"}),action:f=>{const l=Ce(pe(f,"input",g=>{!dt(g.target)&&!ht(g.target)||s.set(!0)}),an(f,"input",g=>{dt(g.target)&&n.set(g.target.value),ht(g.target)&&n.set(g.target.innerText)})),{destroy:c}=e.elements.trigger(f);return{destroy(){c?.(),l()}}}});return $e(e.states.open,f=>{f||s.set(!1)}),{...e,elements:{...Xe(e.elements,"trigger"),input:i},states:{...e.states,touchedInput:s,inputValue:n}}}const{name:Pe}=ut("dialog"),Dn={preventScroll:!0,escapeBehavior:"close",closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:"body",forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},Nn=["content","title","description"];function Nt(p){const e={...Dn,...p},n=Qe(Xe(e,"ids")),{preventScroll:s,escapeBehavior:i,closeOnOutsideClick:f,role:l,portal:c,forceVisible:g,openFocus:Y,closeFocus:F,onOutsideClick:x}=n,T=lt.writable(null),M=Qe({...At(Nn),...e.ids}),ne=e.open??Ae(e.defaultOpen),W=ct(ne,e?.onOpenChange),B=qe([W,g],([a,I])=>a||I);let ae=Se;function R(a){const I=a.currentTarget,o=a.currentTarget;!he(I)||!he(o)||(W.set(!0),T.set(o))}function U(){W.set(!1)}const oe=re(Pe("trigger"),{stores:[W],returned:([a])=>({"aria-haspopup":"dialog","aria-expanded":a,type:"button"}),action:a=>({destroy:Ce(pe(a,"click",o=>{R(o)}),pe(a,"keydown",o=>{o.key!==u.ENTER&&o.key!==u.SPACE||(o.preventDefault(),R(o))}))})}),P=re(Pe("overlay"),{stores:[B,W],returned:([a,I])=>({hidden:a?void 0:!0,tabindex:-1,style:a?void 0:Ze({display:"none"}),"aria-hidden":!0,"data-state":I?"open":"closed"})}),se=re(Pe("content"),{stores:[B,M.content,M.description,M.title,W],returned:([a,I,o,H,A])=>({id:I,role:l.get(),"aria-describedby":o,"aria-labelledby":H,"aria-modal":a?"true":void 0,"data-state":A?"open":"closed",tabindex:-1,hidden:a?void 0:!0,style:a?void 0:Ze({display:"none"})}),action:a=>{let I=Se,o=Se,H=Se;const A=$e([B,f],([E,b])=>{o(),I(),H(),E&&(o=sn(a,{closeOnInteractOutside:b,onClose:U,shouldCloseOnInteractOutside(L){return x.get()?.(L),!L.defaultPrevented}}).destroy,I=on(a,{handler:U,behaviorType:i}).destroy,H=ln(a,{fallbackFocus:a}).destroy)});return{destroy:()=>{ae(),A(),o(),I(),H()}}}}),S=re(Pe("portalled"),{stores:c,returned:a=>({"data-portal":rn(a)}),action:a=>{const I=$e([c],([o])=>{if(o===null)return Se;const H=Ct(a,o);return H===null?Se:cn(a,H).destroy});return{destroy(){I()}}}}),Q=re(Pe("title"),{stores:[M.title],returned:([a])=>({id:a})}),ke=re(Pe("description"),{stores:[M.description],returned:([a])=>({id:a})}),me=re(Pe("close"),{returned:()=>({type:"button"}),action:a=>({destroy:Ce(pe(a,"click",()=>{U()}),pe(a,"keydown",o=>{o.key!==u.SPACE&&o.key!==u.ENTER||(o.preventDefault(),U())}))})});return $e([W,s],([a,I])=>{if(Be){if(I&&a&&(ae=Tt()),a){const o=document.getElementById(M.content.get());yt({prop:Y.get(),defaultEl:o})}return()=>{g.get()||ae()}}}),$e(W,a=>{!Be||a||yt({prop:F.get(),defaultEl:T.get()})},{skipFirstRun:!0}),{ids:M,elements:{content:se,trigger:oe,title:Q,description:ke,overlay:P,close:me,portalled:S},states:{open:W},options:n}}function $t(p,e){be(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=Ye(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"}],["circle",{cx:"12",cy:"12",r:"10"}]];ze(p,Ge({name:"earth"},()=>n,{get iconNode(){return s},children:(i,f)=>{var l=Te(),c=_e(l);Ke(c,()=>e.children??Je),q(i,l)},$$slots:{default:!0}})),ge()}function kt(p,e){be(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=Ye(e,["$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"16",r:"1"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3"}]];ze(p,Ge({name:"lock-keyhole"},()=>n,{get iconNode(){return s},children:(i,f)=>{var l=Te(),c=_e(l);Ke(c,()=>e.children??Je),q(i,l)},$$slots:{default:!0}})),ge()}function Fn(p,e){be(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=Ye(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];ze(p,Ge({name:"pencil"},()=>n,{get iconNode(){return s},children:(i,f)=>{var l=Te(),c=_e(l);Ke(c,()=>e.children??Je),q(i,l)},$$slots:{default:!0}})),ge()}function Mn(p,e){be(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=Ye(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];ze(p,Ge({name:"trash-2"},()=>n,{get iconNode(){return s},children:(i,f)=>{var l=Te(),c=_e(l);Ke(c,()=>e.children??Je),q(i,l)},$$slots:{default:!0}})),ge()}function Et(p,e){be(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=Ye(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M18 21a8 8 0 0 0-16 0"}],["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"}]];ze(p,Ge({name:"users-round"},()=>n,{get iconNode(){return s},children:(i,f)=>{var l=Te(),c=_e(l);Ke(c,()=>e.children??Je),q(i,l)},$$slots:{default:!0}})),ge()}var Wn=(p,e,n,s)=>e.onClickRemove(n()),Ln=le('<button type="button"><!></button>'),qn=le('<div class="tag svelte-nisp7u"> <!></div>');function Hn(p,e){be(e,!0);const[n,s]=Me(),i=()=>h(f,"$person",n);vt(e.webId);let f=Rt(Re,e.webId);var l=qn(),c=k(l),g=C(c);{var Y=F=>{var x=Ln();x.__click=[Wn,e,i,f];var T=k(x);ft(T,{"aria-hidden":"true",size:"1.25rem"}),_(x),je(()=>vn(x,"aria-label",`Remove ${i().name}`)),q(F,x)};ye(g,F=>{e.onClickRemove&&F(Y)})}_(l),je(()=>ot(c,`${i().name??""} `)),q(p,l),ge(),s()}xt(["click"]);var Vn=le("<li> </li>"),Bn=le('<li><div><span class="font-medium"> </span></div></li>'),Un=le(`<li class="relative cursor-pointer rounded-md py-1 pl-8 pr-4
        data-[highlighted]:bg-magnum-100 data-[highlighted]:text-magnum-700">No results found</li>`),jn=le("<ul><!>  <!></ul>"),Jn=le('<div><div><div class="selected-people svelte-8dggyk"></div> <input/></div></div> <!>',1);function Kn(p,e){be(e,!0);const[n,s]=Me(),i=()=>h(se,"$inputValue",n),f=()=>h(P,"$open",n),l=()=>h(Q,"$selected",n),c=()=>h(et,"$session",n),g=()=>h(S,"$touchedInput",n),Y=()=>h(o,"$friends",n),F=()=>h(U,"$input",n),x=()=>h(R,"$menu",n),T=()=>h($(b),"$personByWebId",n),M=()=>h($(E),"$personResourceResult",n),ne=()=>h(oe,"$option",n),W=()=>h($(L),"$matched",n);let B=hn(e,"value",15),ae=st(Ot([]));const{elements:{menu:R,input:U,option:oe},states:{open:P,inputValue:se,touchedInput:S,selected:Q},helpers:{isSelected:ke,isHighlighted:me}}=Rn({multiple:!0,onSelectedChange:v=>{const N=v.next?.map(ee=>ee.value)??[];return He(ae,N,!0),B(N),Ve(se,""),Ve(P,!1),v.next}});Fe(()=>{B().length!==l()?.length&&Ve(Q,B().map(v=>({value:v,label:""})))});let a;const I=v=>{clearTimeout(a),a=setTimeout(v,450)};pn(Re,c().info.webId,c().info.webId,{name:!0,knows:{name:!0}});let o=wt(Re,c().info.webId,yn.knows),H=st("");Fe(()=>{const v=i();g()?I(()=>{He(H,v,!0)}):He(H,v,!0)});let A=ve(()=>Y().filter(v=>v.name?.toLowerCase().includes(i().toLowerCase())||v["@id"]?.toLowerCase().includes(i().toLowerCase()))),E=ve(()=>vt($(H))),b=ve(()=>Rt(Re,$(H))),L=ve(()=>wt(Re,$(H),_n.oidcIssuer));const j=v=>{B(B().filter(N=>N!==v["@id"]))};var J=Jn(),y=_e(J),D=k(y),K=k(D);it(K,20,()=>$(ae),v=>v,(v,N)=>{Hn(v,{get webId(){return N},onClickRemove:j})}),_(K);var X=C(K,2);Ue(X),G(X,()=>({...F(),disabled:e.disabled||F().disabled,placeholder:"Name or webId"}),void 0,void 0,"svelte-8dggyk"),z(X,v=>U?.(v)),_(D),_(y);var ce=C(y,2);{var Z=v=>{var N=jn();G(N,()=>({class:"menu",...x()}),void 0,void 0,"svelte-8dggyk");var ee=k(N);{var ie=w=>{var te=Vn();G(te,t=>({...t}),[()=>ne()({value:T()["@id"],label:T().name??T()["@id"],disabled:M().isPresent()!==!0||W().size===0})],void 0,"svelte-8dggyk");var ue=k(te,!0);_(te),z(te,t=>oe?.(t)),je(()=>ot(ue,T().name??T()["@id"])),q(w,te)};ye(ee,w=>{T()?.["@id"]&&!M()?.isError&&w(ie)})}var de=C(ee,2);it(de,17,()=>$(A),w=>w["@id"],(w,te)=>{var ue=Bn();G(ue,m=>({...m}),[()=>ne()({value:$(te)["@id"],label:$(te).name??$(te)["@id"]})],void 0,"svelte-8dggyk");var t=k(ue),r=k(t),O=k(r,!0);_(r),_(t),_(ue),z(ue,m=>oe?.(m)),je(()=>ot(O,$(te).name??$(te)["@id"])),q(w,ue)},w=>{var te=Un();q(w,te)}),_(N),z(N,w=>R?.(w)),dn(3,N,()=>un,()=>({duration:150,y:-5})),q(v,N)};ye(ce,v=>{f()&&v(Z)})}q(p,J),ge(),s()}var zn=le("<button><!></button>"),Gn=le('<div><div></div> <div><h2>Visibility</h2> <p></p> <form class="svelte-1r4q63y"><div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="private"/><label for="private" aria-label="Private"><!></label></div> <div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="shared" aria-label="Shared"/><label for="shared" aria-label="Shared"><!></label> <!></div> <div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="public" aria-label="Public"/><label for="public" aria-label="Public"><!></label></div> <button type="submit">Confirm</button></form> <button><!></button></div></div>'),Yn=le("<!> <!>",1);function Qn(p,e){be(e,!0);const[n,s]=Me(),i=()=>h(oe,"$open",n),f=()=>h(M,"$trigger",n),l=()=>h(ne,"$portalled",n),c=()=>h(W,"$overlay",n),g=()=>h(B,"$content",n),Y=()=>h(ae,"$title",n),F=()=>h(R,"$description",n),x=()=>h(U,"$close",n),T=[],{elements:{trigger:M,portalled:ne,overlay:W,content:B,title:ae,description:R,close:U},states:{open:oe}}=Nt();var P=(E=>(E.private="private",E.shared="shared",E.public="public",E))(P||{});let se=ve(()=>e.wac?e.wac.public.read?"public":Object.entries(e.wac.agent).some(([E,b])=>E!==e.self&&b.read)?"shared":"private":void 0);const S=Ot({visibility:void 0,selected:[]});Fe(()=>{S.visibility=$(se)});let Q=ve(()=>!!e.wac?.agent[e.self].control);Fe(()=>{if(!e.wac)return;const E=Object.entries(e.wac.agent).filter(([b,L])=>b!==e.self&&L.read===!0).map(([b])=>b);S.selected=E});const ke=async E=>{if(E.preventDefault(),!e.wac)throw new Error;let b=JSON.parse(JSON.stringify(e.wac));if(S.visibility==="public")b.public.read=!0;else if(S.visibility==="shared"&&S.selected.length>0){b.public.read=!1;for(let L in b.agent)L!==e.self&&(b.agent[L].read=!1);S.selected.forEach(L=>{b.agent[L]??={read:!1,append:!1,write:!1,control:!1},b.agent[L].read=!0})}else b=void 0;await e.onchangewac(b),Ve(oe,!1)};var me=Yn(),a=_e(me);{var I=E=>{var b=zn();G(b,()=>({"aria-label":`Privacy and sharing: ${$(se)}`,...f()}),void 0,void 0,"svelte-1r4q63y");var L=k(b);{var j=y=>{{let D=ve(()=>$(Q)?"green":"black");kt(y,{"aria-hidden":"true",get color(){return $(D)}})}},J=y=>{var D=Te(),K=_e(D);{var X=Z=>{{let v=ve(()=>$(Q)?"green":"black");Et(Z,{"aria-hidden":"true",get color(){return $(v)}})}},ce=Z=>{var v=Te(),N=_e(v);{var ee=ie=>{{let de=ve(()=>$(Q)?"green":"black");$t(ie,{"aria-hidden":"true",get color(){return $(de)}})}};ye(N,ie=>{$(se)===P.public&&ie(ee)},!0)}q(Z,v)};ye(K,Z=>{$(se)===P.shared?Z(X):Z(ce,!1)},!0)}q(y,D)};ye(L,y=>{$(se)===P.private?y(j):y(J,!1)})}_(b),z(b,y=>M?.(y)),q(E,b)},o=E=>{fn(E,{})};ye(a,E=>{e.wac?E(I):E(o,!1)})}var H=C(a,2);{var A=E=>{var b=Gn();G(b,()=>({...l()}),void 0,void 0,"svelte-1r4q63y");var L=k(b);G(L,()=>({class:"overlay",...c()}),void 0,void 0,"svelte-1r4q63y"),z(L,d=>W?.(d));var j=C(L,2);G(j,()=>({class:"content",...g()}),void 0,void 0,"svelte-1r4q63y");var J=k(j);G(J,()=>({class:"title",...Y()}),void 0,void 0,"svelte-1r4q63y"),z(J,d=>ae?.(d));var y=C(J,2);G(y,()=>({...F()}),void 0,void 0,"svelte-1r4q63y"),z(y,d=>R?.(d));var D=C(y,2),K=k(D),X=k(K);Ue(X);var ce,Z=C(X),v=k(Z);kt(v,{"aria-hidden":"true"}),_(Z),_(K);var N=C(K,2),ee=k(N);Ue(ee);var ie,de=C(ee),w=k(de);Et(w,{"aria-hidden":"true"}),_(de);var te=C(de,2);{var ue=d=>{{let Oe=ve(()=>S.visibility!==P.shared);Kn(d,{get disabled(){return $(Oe)},get value(){return S.selected},set value(fe){S.selected=fe}})}};ye(te,d=>{S.visibility===P.shared&&d(ue)})}_(N);var t=C(N,2),r=k(t);Ue(r);var O,m=C(r),Ee=k(m);$t(Ee,{"aria-hidden":"true"}),_(m),_(t),It(2),_(D);var V=C(D,2);G(V,()=>({class:"close",...x()}),void 0,void 0,"svelte-1r4q63y");var we=k(V);ft(we,{}),_(V),z(V,d=>U?.(d)),_(j),z(j,d=>B?.(d)),_(b),z(b,d=>ne?.(d)),je(()=>{ce!==(ce=P.private)&&(X.value=(X.__value=P.private)??""),ie!==(ie=P.shared)&&(ee.value=(ee.__value=P.shared)??""),O!==(O=P.public)&&(r.value=(r.__value=P.public)??"")}),Pt("submit",D,ke),at(T,[],X,()=>(P.private,S.visibility),d=>S.visibility=d),at(T,[],ee,()=>(P.shared,S.visibility),d=>S.visibility=d),at(T,[],r,()=>(P.public,S.visibility),d=>S.visibility=d),q(E,b)};ye(H,E=>{i()&&E(A)})}q(p,me),ge(),s()}function Xn(p,e){be(e,!0);const[n,s]=Me(),i=()=>h(l,"$resource",n),f=()=>h(et,"$session",n),l=vt(e.uri);let c=st(void 0);Fe(()=>{i().getWac().then(x=>{if(x.isError)throw x;He(c,x,!0)})});const{getResource:g,getSubject:Y}=Dt(),F=async x=>{if(i()?.type!=="SolidLeaf")throw new Error("not a leaf");if(!$(c))throw new Error;let T=JSON.parse(JSON.stringify($(c).wacRule));if(x===void 0){const R=await bn(i(),{fetch:f().fetch});if(R.isError)throw R;const U=R.wacUri;await g(U).delete()}else await i().setWac(x);const M=await i().getWac({ignoreCache:!0});if(M.isError)throw M;He(c,M,!0);const ne=M.wacRule,W=ne.public.read?"public":Object.entries(ne.agent).some(([R,U])=>R!==f().info.webId&&U.read)?"shared":"private";De({data:{title:"Update successful",description:`Access was updated to ${W}`,type:Ne.success}}),T.public.read!==ne.public.read&&De({data:{title:"TODO Notification successful",description:"Public geoindex was notified",type:Ne.success}});const B=Object.keys(ne.agent),ae=Object.keys(T.agent);for(let R of B)ae.includes(R)||De({data:{title:"TODO Notification successful",description:`${Y(Re,R)?.name} was notified`,type:Ne.success}})};{let x=ve(()=>$(c)?.wacRule);Qn(p,{get wac(){return $(x)},get self(){return f().info.webId},onchangewac:F})}ge(),s()}const Zn=async(p,e,n,s)=>{const{name:i}=e.place;if(globalThis.confirm(`Do you really want to delete place ${i} (${e.place["@id"]})?`)){const l=n.getResource(e.place["@id"]);if(l.isError)throw l;const c=await gn(l,{fetch:s().fetch,dataset:n});c.isError?De({data:{type:Ne.error,title:"Deletion failed",description:c.name}}):De({data:{type:Ne.success,title:"Deletion successful",description:`Deleted place ${i}`}})}};var ea=le('<div><div></div> <div><h2>Update Place</h2> <p></p> <form class="svelte-5hf8eu"><div class="field svelte-5hf8eu"><label for="name">Name</label> <input id="name" type="text" name="name" placeholder="name"/></div> <div class="field svelte-5hf8eu"><label for="description">Description</label> <textarea id="description" name="description" placeholder="description"></textarea></div> <button type="submit">Update place</button></form> <button><!></button></div></div>'),ta=le('<div class="controls svelte-5hf8eu"><!> <button><!></button> <button aria-label="Delete place"><!></button></div> <!>',1);function na(p,e){be(e,!0);const[n,s]=Me(),i=()=>h(S,"$open",n),f=()=>h(et,"$session",n),l=()=>h(B,"$trigger",n),c=()=>h(ae,"$portalled",n),g=()=>h(R,"$overlay",n),Y=()=>h(U,"$content",n),F=()=>h(oe,"$title",n),x=()=>h(P,"$description",n),T=()=>h(se,"$close",n),{changeData:M,commitData:ne,dataset:W}=Dt(),{elements:{trigger:B,portalled:ae,overlay:R,content:U,title:oe,description:P,close:se},states:{open:S}}=Nt(),Q={name:e.place.name,description:e.place.description,latitude:e.place.geo.latitude,longitude:e.place.geo.longitude},ke=async j=>{j.preventDefault();const{name:J}=e.place,y=W.getResource(e.place["@id"]);if(y.isError)throw y;const D=M(e.place,y);D.name=Q.name,D.description=Q.description;const K=await ne(D);if(K.isError)throw K;Ve(S,!1),De({data:{title:"Update successful",description:`Updated place ${J}`,type:Ne.success}})};var me=ta(),a=_e(me),I=k(a);Xn(I,{get uri(){return e.place["@id"]}});var o=C(I,2);G(o,()=>({"aria-label":"Edit place",...l()}),void 0,void 0,"svelte-5hf8eu");var H=k(o);Fn(H,{"aria-hidden":"true"}),_(o),z(o,j=>B?.(j));var A=C(o,2);A.__click=[Zn,e,W,f];var E=k(A);Mn(E,{"aria-hidden":"true"}),_(A),_(a);var b=C(a,2);{var L=j=>{var J=ea();G(J,()=>({...c()}),void 0,void 0,"svelte-5hf8eu");var y=k(J);G(y,()=>({class:"overlay",...g()}),void 0,void 0,"svelte-5hf8eu"),z(y,w=>R?.(w));var D=C(y,2);G(D,()=>({class:"content",...Y()}),void 0,void 0,"svelte-5hf8eu");var K=k(D);G(K,()=>({class:"title",...F()}),void 0,void 0,"svelte-5hf8eu"),z(K,w=>oe?.(w));var X=C(K,2);G(X,()=>({...x()}),void 0,void 0,"svelte-5hf8eu"),z(X,w=>P?.(w));var ce=C(X,2),Z=k(ce),v=C(k(Z),2);Ue(v),_(Z);var N=C(Z,2),ee=C(k(N),2);Lt(ee),_(N),It(2),_(ce);var ie=C(ce,2);G(ie,()=>({class:"close",...T()}),void 0,void 0,"svelte-5hf8eu");var de=k(ie);ft(de,{}),_(ie),z(ie,w=>se?.(w)),_(D),z(D,w=>U?.(w)),_(J),z(J,w=>ae?.(w)),Pt("submit",ce,ke),_t(v,()=>Q.name,w=>Q.name=w),_t(ee,()=>Q.description,w=>Q.description=w),q(j,J)};ye(b,j=>{i()&&j(L)})}q(p,me),ge(),s()}xt(["click"]);var aa=le("<li><!></li>"),ra=le('<ul data-testid="place-list"></ul>');function ha(p,e){be(e,!0);const[n,s]=Me(),i=()=>h(et,"$session",n),f=()=>h(l,"$places",n);Fe(()=>{i().info.webId&&wn(i().info.webId,i().fetch).then(()=>{console.log("query run and finished")})});const l=mn(On,$n.type,kn.Place);var c=ra();it(c,5,f,g=>g["@id"],(g,Y)=>{var F=aa(),x=k(F);En(x,{get place(){return $(Y)},children:(T,M)=>{na(T,{get place(){return $(Y)}})},$$slots:{default:!0}}),_(F),q(g,F)}),_(c),q(p,c),ge(),s()}export{ha as component};
