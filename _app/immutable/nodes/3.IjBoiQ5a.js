import"../chunks/DsnmJJEf.js";import"../chunks/CrhuCTl8.js";import{b as z,l as F,d as G,f as J,aq as N,ar as O,k as t,a as R,e as T,j as y,as as s,u as x,L as $,at as p,a8 as w,g as D}from"../chunks/Cdb33sNi.js";import{e as W,a as B,r as H}from"../chunks/BhkdwHEz.js";import{r as _}from"../chunks/CfW0BM3P.js";import{b as l}from"../chunks/BmJvniyn.js";import{i as K}from"../chunks/D-1GjqDS.js";import{s as M,a as Q}from"../chunks/CUdV_5Kw.js";import{g as V}from"../chunks/BhOL_a7O.js";import{d as I,s as X,a as Y}from"../chunks/DtZPKXeg.js";import{s as q}from"../chunks/6MAqR4_S.js";import{g as Z,P as ee}from"../chunks/DN3Uj3Ve.js";var te=J('<form class="svelte-uz3xhk"><input type="text" placeholder="name" required/> <textarea placeholder="description" name="description"></textarea> <input type="number" step="any" id="latitude" name="latitude" placeholder="latitude" required/> <input type="number" step="any" name="longitude" placeholder="longitude" required/> <input type="submit" value="Add place"/></form> <pre> </pre>',1);function ge(S,k){z(k,!1);const[A,C]=M(),d=()=>Q(X,"$session",A),h={name:"",description:"",latitude:null,longitude:null};let e=$(h),i=$([]);const{createData:E,commitData:P}=Y(),L=async a=>{a.preventDefault();const g=await t(i)[0].createChildIfAbsent("places/");if(g.isError)throw g;const n=await g.resource.createChildIfAbsent(`place-${crypto.randomUUID()}.ttl`);if(n.isError)throw n;const r=E(ee,n.uri+"#place",n.resource);r.type=q({"@id":"Place"}),r.geo={type:q({"@id":"GeoCoordinates"}),latitude:t(e).latitude,longitude:t(e).longitude},r.name=t(e).name,t(e).description&&(r.description=t(e).description),await P(r),w(e,h),V("list")};F(()=>(d(),I),()=>{d().info.webId&&Z(d().info.webId,I).then(a=>{a.isError||w(i,a.storageContainers)})}),G(),K();var v=te(),o=N(v),u=y(o);_(u);var m=s(u,2);H(m);var c=s(m,2);_(c);var f=s(c,2);_(f);var U=s(f,2);D(o);var b=s(o,2),j=y(b,!0);D(b),O(a=>{U.disabled=(t(i),x(()=>t(i).length===0)),B(j,a)},[()=>(t(e),x(()=>JSON.stringify(t(e),null,2)))]),W("submit",o,L),l(u,()=>t(e).name,a=>p(e,t(e).name=a)),l(m,()=>t(e).description,a=>p(e,t(e).description=a)),l(c,()=>t(e).latitude,a=>p(e,t(e).latitude=a)),l(f,()=>t(e).longitude,a=>p(e,t(e).longitude=a)),R(S,v),T(),C()}export{ge as component};
