import"../chunks/DsnmJJEf.js";import"../chunks/CUseOi6C.js";import{au as at,ai as we,av as Ce,aj as $e,_ as Je,a as W,al as Ee,n as ft,ax as Wt,ak as Xe,at as it,a5 as It,S as qe,$ as Ve,f as ce,am as k,m as f,an as A,ap as O,aw as _e,aq as Lt,ar as Ht}from"../chunks/BprpeBWN.js";import{e as ot}from"../chunks/CZPh_rK3.js";import{i as qt}from"../chunks/CyTbzA-V.js";import{a as m,s as Ke,b as Be}from"../chunks/B4vPMAZi.js";import{w as Ae,t as He,g as Vt,v as Bt,d as ze,a as lt,e as xt,j as Ut,r as jt}from"../chunks/oy6xE-rC.js";import{i as Ie}from"../chunks/Ccr4XboW.js";import{i as ye,g as Jt,a as Rt,b as Kt,m as Q,c as pe,w as ct,o as ut,t as Ze,d as et,e as Ue,f as pt,h as St,j as zt,k as Gt,l as We,n as Yt,s as Qt,p as Te,q as d,r as gt,u as Le,v as rt,F as Xt,x as mt,y as Zt,z as ea,A as ta,B as aa,C as ht,D as dt,E as xe,G as ra,H as Pt,I as Pe,J as tt,K as na,L as sa,M as ia,N as oa,O as At,P as la,Q as ca,R as yt,S as ua,T as da,U as fa,V as pa,W as va,X as _t,Y as Ge,Z as Ne,_ as V,$ as ba,a0 as ga,a1 as ma,a2 as Tt,a3 as Fe,a4 as Me}from"../chunks/XnAfsRxt.js";import{r as je,a as B,c as nt,b as $t}from"../chunks/D64X-vIT.js";import{e as vt,f as Ct,h as ha,i as wt,s as bt,j as ya,u as Dt,k as _a,a as $a}from"../chunks/Coxj7Hfx.js";import{s as Ye,r as Qe,p as wa}from"../chunks/QhW2L8Vr.js";import{f as Ea,a as Oa,r as ka,s as Ia,p as xa}from"../chunks/Bqu-Bysb.js";import{P as Ra}from"../chunks/uSnB0-I-.js";import{P as Sa}from"../chunks/DJjASS7M.js";function st(y){return Array.from(y.querySelectorAll('[role="option"]:not([data-disabled])')).filter(t=>ye(t))}function Pa(y){return t=>{const a=t.target,s=Jt(y);if(!s||!Rt(a))return!1;const p=s.id;return!!(Kt(a)&&p===a.htmlFor||a.closest(`label[for="${p}"]`))}}function Aa(){return{elements:{root:Q("label",{action:t=>({destroy:pe(t,"mousedown",s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})})})}}}const Ta=[d.ARROW_LEFT,d.ESCAPE,d.ARROW_RIGHT,d.SHIFT,d.CAPS_LOCK,d.CONTROL,d.ALT,d.META,d.ENTER,d.F1,d.F2,d.F3,d.F4,d.F5,d.F6,d.F7,d.F8,d.F9,d.F10,d.F11,d.F12],Ca={positioning:{placement:"bottom",sameWidth:!0},scrollAlignment:"nearest",loop:!0,defaultOpen:!1,closeOnOutsideClick:!0,preventScroll:!0,escapeBehavior:"close",forceVisible:!1,portal:"body",builder:"listbox",disabled:!1,required:!1,name:void 0,typeahead:!0,highlightOnHover:!0,onOutsideClick:void 0,preventTextSelectionOverflow:!0,rootElement:void 0},Da=["trigger","menu","label"];function Na(y){const t={...Ca,...y},a=ct(Ae(null)),s=ct(Ae(null)),p=t.selected??Ae(t.defaultSelected),g=ut(p,t?.onSelectedChange),v=He(s,e=>e?fe(e):void 0),_=t.open??Ae(t.defaultOpen),w=ut(_,t?.onOpenChange),re=Ze({...et(t,"open","defaultOpen","builder","ids"),multiple:t.multiple??!1}),{scrollAlignment:U,loop:ue,closeOnOutsideClick:j,escapeBehavior:J,preventScroll:se,portal:L,forceVisible:I,positioning:X,multiple:Z,arrowSize:ee,disabled:ne,required:ie,typeahead:oe,name:de,highlightOnHover:z,onOutsideClick:Oe,preventTextSelectionOverflow:T,rootElement:r}=re,o=r.get();Ue&&o===void 0?r.set(document):y?.portal===void 0&&L.set(o);const{name:l,selector:F}=pt(t.builder),x=Ze({...St(Da),...t.ids}),{handleTypeaheadSearch:ve}=zt({onMatch:e=>{s.set(e),e.scrollIntoView({block:U.get()})},getCurrentItem(){return s.get()}});function fe(e){const n=e.getAttribute("data-value"),h=e.getAttribute("data-label"),E=e.hasAttribute("data-disabled");return{value:n&&JSON.parse(n),label:h??e.textContent??void 0,disabled:!!E}}const be=e=>{g.update(n=>{if(Z.get()){const E=Array.isArray(n)?[...n]:[];return la(e,E,(Re,K)=>We(Re.value,K.value))}return e})};function te(e){const n=fe(e);be(n)}async function G(){w.set(!0),await at();const e=Le(x.menu.get(),r.get());if(!ye(e))return;const n=e.querySelector("[aria-selected=true]");ye(n)&&s.set(n)}function C(){w.set(!1),s.set(null)}const i=Gt({open:w,forceVisible:I,activeTrigger:a}),c=He([g],([e])=>n=>Array.isArray(e)?e.some(h=>We(h.value,n)):Yt(n)?We(e?.value,Qt(n,void 0)):We(e?.value,n)),H=He([v],([e])=>n=>We(e?.value,n)),M=Q(l("trigger"),{stores:[w,s,ne,x.menu,x.trigger,x.label],returned:([e,n,h,E,Re,K])=>({"aria-activedescendant":n?.id,"aria-autocomplete":"list","aria-controls":E,"aria-expanded":e,"aria-labelledby":K,"data-state":e?"open":"closed",id:Re,role:"combobox",disabled:ht(h),type:t.builder==="select"?"button":void 0}),action:e=>{a.set(e);const n=dt(e),h=Te(pe(e,"click",()=>{e.focus(),w.get()?C():G()}),pe(e,"keydown",E=>{if(!w.get()){if(Ta.includes(E.key)||E.key===d.TAB||E.key===d.BACKSPACE&&n&&e.value===""||E.key===d.SPACE&&gt(e))return;G(),at().then(()=>{if(g.get())return;const ge=Le(x.menu.get(),r.get());if(!ye(ge))return;const S=Array.from(ge.querySelectorAll(`${F("item")}:not([data-disabled]):not([data-hidden])`)).filter(ke=>ye(ke));S.length&&(E.key===d.ARROW_DOWN?(s.set(S[0]),S[0].scrollIntoView({block:U.get()})):E.key===d.ARROW_UP&&(s.set(rt(S)),rt(S).scrollIntoView({block:U.get()})))})}if(E.key===d.TAB){C();return}if(E.key===d.ENTER&&!E.isComposing||E.key===d.SPACE&&gt(e)){E.preventDefault();const K=s.get();K&&te(K),Z.get()||C()}if(E.key===d.ARROW_UP&&E.altKey&&C(),Xt.includes(E.key)){E.preventDefault();const K=Le(x.menu.get(),r.get());if(!ye(K))return;const ge=st(K);if(!ge.length)return;const S=ge.filter(P=>!mt(P)&&P.dataset.hidden===void 0),ke=s.get(),le=ke?S.indexOf(ke):-1,me=ue.get(),De=U.get();let he;switch(E.key){case d.ARROW_DOWN:he=aa(S,le,me);break;case d.ARROW_UP:he=ta(S,le,me);break;case d.PAGE_DOWN:he=ea(S,le,10,me);break;case d.PAGE_UP:he=Zt(S,le,10,me);break;case d.HOME:he=S[0];break;case d.END:he=rt(S);break;default:return}s.set(he),he?.scrollIntoView({block:De})}else if(oe.get()){const K=Le(x.menu.get(),r.get());if(!ye(K))return;ve(E.key,st(K))}}));return{destroy(){a.set(null),h()}}}}),b=Q(l("menu"),{stores:[i,x.menu],returned:([e,n])=>({hidden:e?void 0:!0,id:n,role:"listbox",style:e?void 0:tt({display:"none"})}),action:e=>{let n=Pe;const h=Te(xe([i,L,j,X,a],([E,Re,K,ge,S])=>{n(),!(!E||!S)&&at().then(()=>{n();const ke=Pa(x.trigger.get());n=ra(e,{anchorElement:S,open:w,options:{floating:ge,focusTrap:null,modal:{closeOnInteractOutside:K,onClose:C,shouldCloseOnInteractOutside:le=>{if(Oe.get()?.(le),le.defaultPrevented)return!1;const me=le.target;return!(!Rt(me)||me===S||S.contains(me)||ke(le))}},escapeKeydown:{handler:C,behaviorType:J},portal:Pt(e,Re),preventTextSelectionOverflow:{enabled:T}}}).destroy})}));return{destroy:()=>{h(),n()}}}}),{elements:{root:$}}=Aa(),{action:D}=Vt($),R=Q(l("label"),{stores:[x.label,x.trigger],returned:([e,n])=>({id:e,for:n}),action:D}),q=Q(l("option"),{stores:[c],returned:([e])=>n=>{const h=e(n.value);return{"data-value":JSON.stringify(n.value),"data-label":n.label,"data-disabled":ht(n.disabled),"aria-disabled":n.disabled?!0:void 0,"aria-selected":h,"data-selected":h?"":void 0,id:na(),role:"option"}},action:e=>({destroy:Te(pe(e,"click",h=>{if(mt(e)){h.preventDefault();return}te(e),Z.get()||C()}),xe(z,h=>h?Te(pe(e,"mouseover",()=>{s.set(e)}),pe(e,"mouseleave",()=>{s.set(null)})):void 0))})}),N=Q(l("group"),{returned:()=>e=>({role:"group","aria-labelledby":e})}),u=Q(l("group-label"),{returned:()=>e=>({id:e})}),Y=sa({value:He([g],([e])=>{const n=Array.isArray(e)?e.map(h=>h.value):e?.value;return typeof n=="string"?n:JSON.stringify(n)}),name:Bt(de),required:ie,prefix:t.builder}),ae=Q(l("arrow"),{stores:ee,returned:e=>({"data-arrow":!0,style:tt({position:"absolute",width:`var(--arrow-size, ${e}px)`,height:`var(--arrow-size, ${e}px)`})})});return xe([s],([e])=>{if(!Ue)return;const n=Le(x.menu.get(),r.get());ye(n)&&st(n).forEach(h=>{h===e?ia(h):oa(h)})}),xe([w,se],([e,n])=>{if(!(!Ue||!e||!n))return At()}),{ids:x,elements:{trigger:M,group:N,option:q,menu:b,groupLabel:u,label:R,hiddenInput:Y,arrow:ae},states:{open:w,selected:g,highlighted:v,highlightedItem:s},helpers:{isSelected:c,isHighlighted:H,closeMenu:C},options:re}}const{name:Fa}=pt("combobox");function Ma(y){const t=Na({...y,builder:"combobox",typeahead:!1}),a=Ae(""),s=Ae(!1),p=Q(Fa("input"),{stores:[t.elements.trigger,a],returned:([g,v])=>({...et(g,"action"),role:"combobox",value:v,autocomplete:"off"}),action:g=>{const v=Te(pe(g,"input",w=>{!dt(w.target)&&!yt(w.target)||s.set(!0)}),ca(g,"input",w=>{dt(w.target)&&a.set(w.target.value),yt(w.target)&&a.set(w.target.innerText)})),{destroy:_}=t.elements.trigger(g);return{destroy(){_?.(),v()}}}});return xe(t.states.open,g=>{g||s.set(!1)}),{...t,elements:{...et(t.elements,"trigger"),input:p},states:{...t.states,touchedInput:s,inputValue:a}}}const{name:Se}=pt("dialog"),Wa={preventScroll:!0,escapeBehavior:"close",closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:"body",forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},La=["content","title","description"];function Nt(y){const t={...Wa,...y},a=Ze(et(t,"ids")),{preventScroll:s,escapeBehavior:p,closeOnOutsideClick:g,role:v,portal:_,forceVisible:w,openFocus:re,closeFocus:U,onOutsideClick:ue}=a,j=ct.writable(null),J=Ze({...St(La),...t.ids}),se=t.open??Ae(t.defaultOpen),L=ut(se,t?.onOpenChange),I=He([L,w],([r,o])=>r||o);let X=Pe;function Z(r){const o=r.currentTarget,l=r.currentTarget;!ye(o)||!ye(l)||(L.set(!0),j.set(l))}function ee(){L.set(!1)}const ne=Q(Se("trigger"),{stores:[L],returned:([r])=>({"aria-haspopup":"dialog","aria-expanded":r,type:"button"}),action:r=>({destroy:Te(pe(r,"click",l=>{Z(l)}),pe(r,"keydown",l=>{l.key!==d.ENTER&&l.key!==d.SPACE||(l.preventDefault(),Z(l))}))})}),ie=Q(Se("overlay"),{stores:[I,L],returned:([r,o])=>({hidden:r?void 0:!0,tabindex:-1,style:r?void 0:tt({display:"none"}),"aria-hidden":!0,"data-state":o?"open":"closed"})}),oe=Q(Se("content"),{stores:[I,J.content,J.description,J.title,L],returned:([r,o,l,F,x])=>({id:o,role:v.get(),"aria-describedby":l,"aria-labelledby":F,"aria-modal":r?"true":void 0,"data-state":x?"open":"closed",tabindex:-1,hidden:r?void 0:!0,style:r?void 0:tt({display:"none"})}),action:r=>{let o=Pe,l=Pe,F=Pe;const x=xe([I,g],([ve,fe])=>{l(),o(),F(),ve&&(l=da(r,{closeOnInteractOutside:fe,onClose:ee,shouldCloseOnInteractOutside(be){return ue.get()?.(be),!be.defaultPrevented}}).destroy,o=fa(r,{handler:ee,behaviorType:p}).destroy,F=pa(r,{fallbackFocus:r}).destroy)});return{destroy:()=>{X(),x(),l(),o(),F()}}}}),de=Q(Se("portalled"),{stores:_,returned:r=>({"data-portal":ua(r)}),action:r=>{const o=xe([_],([l])=>{if(l===null)return Pe;const F=Pt(r,l);return F===null?Pe:va(r,F).destroy});return{destroy(){o()}}}}),z=Q(Se("title"),{stores:[J.title],returned:([r])=>({id:r})}),Oe=Q(Se("description"),{stores:[J.description],returned:([r])=>({id:r})}),T=Q(Se("close"),{returned:()=>({type:"button"}),action:r=>({destroy:Te(pe(r,"click",()=>{ee()}),pe(r,"keydown",l=>{l.key!==d.SPACE&&l.key!==d.ENTER||(l.preventDefault(),ee())}))})});return xe([L,s],([r,o])=>{if(Ue){if(o&&r&&(X=At()),r){const l=document.getElementById(J.content.get());_t({prop:re.get(),defaultEl:l})}return()=>{w.get()||X()}}}),xe(L,r=>{!Ue||r||_t({prop:U.get(),defaultEl:j.get()})},{skipFirstRun:!0}),{ids:J,elements:{content:oe,trigger:ne,title:z,description:Oe,overlay:ie,close:T,portalled:de},states:{open:L},options:a}}function Et(y,t){we(t,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=Qe(t,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"}],["circle",{cx:"12",cy:"12",r:"10"}]];Ge(y,Ye({name:"earth"},()=>a,{get iconNode(){return s},children:(p,g)=>{var v=Ce(),_=$e(v);ze(_,()=>t.children??Je),W(p,v)},$$slots:{default:!0}})),Ee()}function Ot(y,t){we(t,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=Qe(t,["$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"16",r:"1"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3"}]];Ge(y,Ye({name:"lock-keyhole"},()=>a,{get iconNode(){return s},children:(p,g)=>{var v=Ce(),_=$e(v);ze(_,()=>t.children??Je),W(p,v)},$$slots:{default:!0}})),Ee()}function Ha(y,t){we(t,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=Qe(t,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];Ge(y,Ye({name:"pencil"},()=>a,{get iconNode(){return s},children:(p,g)=>{var v=Ce(),_=$e(v);ze(_,()=>t.children??Je),W(p,v)},$$slots:{default:!0}})),Ee()}function qa(y,t){we(t,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=Qe(t,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];Ge(y,Ye({name:"trash-2"},()=>a,{get iconNode(){return s},children:(p,g)=>{var v=Ce(),_=$e(v);ze(_,()=>t.children??Je),W(p,v)},$$slots:{default:!0}})),Ee()}function kt(y,t){we(t,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=Qe(t,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M18 21a8 8 0 0 0-16 0"}],["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"}]];Ge(y,Ye({name:"users-round"},()=>a,{get iconNode(){return s},children:(p,g)=>{var v=Ce(),_=$e(v);ze(_,()=>t.children??Je),W(p,v)},$$slots:{default:!0}})),Ee()}function Va(y,t){we(t,!0);const[a,s]=Ke(),p=()=>m(g,"$person",a);vt(t.webId);let g=Ct(Ne,t.webId);ft();var v=Wt();Xe(()=>lt(v,p().name)),W(y,v),Ee(),s()}var Ba=ce("<li> </li>"),Ua=ce('<li><div class="pl-4"><span class="font-medium"> </span></div></li>'),ja=ce(`<li class="relative cursor-pointer rounded-md py-1 pl-8 pr-4
        data-[highlighted]:bg-magnum-100 data-[highlighted]:text-magnum-700">No results found</li>`),Ja=ce("<ul><!>  <!></ul>"),Ka=ce('<div class="flex flex-col gap-1"><div class="relative"><!> <input/></div></div> <!>',1);function za(y,t){we(t,!0);const[a,s]=Ke(),p=()=>m(oe,"$inputValue",a),g=()=>m(ie,"$open",a),v=()=>m(z,"$selected",a),_=()=>m(bt,"$session",a),w=()=>m(de,"$touchedInput",a),re=()=>m(l,"$friends",a),U=()=>m(ee,"$input",a),ue=()=>m(Z,"$menu",a),j=()=>m(f(fe),"$personByWebId",a),J=()=>m(f(ve),"$personResourceResult",a),se=()=>m(ne,"$option",a),L=()=>m(f(be),"$matched",a);let I=wa(t,"value",15),X=it(It([]));const{elements:{menu:Z,input:ee,option:ne},states:{open:ie,inputValue:oe,touchedInput:de,selected:z},helpers:{isSelected:Oe,isHighlighted:T}}=Ma({multiple:!0,onSelectedChange:b=>{const $=b.next?.map(D=>D.value)??[];return Ve(X,$,!0),I($),Be(oe,""),Be(ie,!1),b.next}});qe(()=>{I().length!==v()?.length&&Be(z,I().map(b=>({value:b,label:""})))});let r;const o=b=>{clearTimeout(r),r=setTimeout(b,450)};ha(Ne,_().info.webId,_().info.webId,{name:!0,knows:{name:!0}});let l=wt(Ne,_().info.webId,Ea.knows),F=it("");qe(()=>{const b=p();w()?o(()=>{Ve(F,b,!0)}):Ve(F,b,!0)});let x=_e(()=>re().filter(b=>b.name?.toLowerCase().includes(p().toLowerCase())||b["@id"]?.toLowerCase().includes(p().toLowerCase()))),ve=_e(()=>vt(f(F))),fe=_e(()=>Ct(Ne,f(F))),be=_e(()=>wt(Ne,f(F),Oa.oidcIssuer));var te=Ka(),G=$e(te),C=k(G),i=k(C);ot(i,16,()=>f(X),b=>b,(b,$)=>{Va(b,{get webId(){return $}})});var c=A(i,2);je(c),B(c,()=>({...U(),disabled:t.disabled||U().disabled,placeholder:"Name or webId"}),void 0,void 0,"svelte-1u6t5ph"),V(c,b=>ee?.(b)),O(C),O(G);var H=A(G,2);{var M=b=>{var $=Ja();B($,()=>({class:"menu",...ue()}),void 0,void 0,"svelte-1u6t5ph");var D=k($);{var R=N=>{var u=Ba();B(u,ae=>({...ae}),[()=>se()({value:j()["@id"],label:j().name??j()["@id"],disabled:J().isPresent()!==!0||L().size===0})],void 0,"svelte-1u6t5ph");var Y=k(u,!0);O(u),V(u,ae=>ne?.(ae)),Xe(()=>lt(Y,j().name??j()["@id"])),W(N,u)};Ie(D,N=>{j()?.["@id"]&&!J()?.isError&&N(R)})}var q=A(D,2);ot(q,17,()=>f(x),N=>N["@id"],(N,u)=>{var Y=Ua();B(Y,h=>({...h}),[()=>se()({value:f(u)["@id"],label:f(u).name??f(u)["@id"]})],void 0,"svelte-1u6t5ph");var ae=k(Y),e=k(ae),n=k(e,!0);O(e),O(ae),O(Y),V(Y,h=>ne?.(h)),Xe(()=>lt(n,f(u).name??f(u)["@id"])),W(N,Y)},N=>{var u=ja();W(N,u)}),O($),V($,N=>Z?.(N)),ba(3,$,()=>ga,()=>({duration:150,y:-5})),W(b,$)};Ie(H,b=>{g()&&b(M)})}W(y,te),Ee(),s()}var Ga=ce("<button><!></button>"),Ya=ce('<div><div></div> <div><h2>Visibility</h2> <p></p> <form class="svelte-1r4q63y"><div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="private"/><label for="private" aria-label="Private"><!></label></div> <div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="shared" aria-label="Shared"/><label for="shared" aria-label="Shared"><!></label> <!></div> <div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="public" aria-label="Public"/><label for="public" aria-label="Public"><!></label></div> <button type="submit">Confirm</button></form> <button><!></button></div></div>'),Qa=ce("<!> <!>",1);function Xa(y,t){we(t,!0);const[a,s]=Ke(),p=()=>m(bt,"$session",a),g=()=>m(L,"$placeResource",a),v=()=>m(Oe,"$open",a),_=()=>m(Z,"$trigger",a),w=()=>m(ee,"$portalled",a),re=()=>m(ne,"$overlay",a),U=()=>m(ie,"$content",a),ue=()=>m(oe,"$title",a),j=()=>m(de,"$description",a),J=()=>m(z,"$close",a),se=[],L=vt(t.place["@id"]);let I=it(void 0),X=_e(()=>f(I)?.wacRule.agent[p().info.webId].control);qe(()=>{g().getWac().then(i=>{if(i.isError)throw i;Ve(I,i,!0)})}),g().getWac({ignoreCache:!1}).then(i=>!i.isError&&i.wacRule.public);const{elements:{trigger:Z,portalled:ee,overlay:ne,content:ie,title:oe,description:de,close:z},states:{open:Oe}}=Nt();var T=(i=>(i.private="private",i.shared="shared",i.public="public",i))(T||{});let r=_e(()=>f(I)?.wacRule?f(I).wacRule.public.read?"public":Object.entries(f(I).wacRule.agent).some(([i,c])=>i!==p().info.webId&&c.read)?"shared":"private":void 0);const o=It({visibility:void 0,selected:[]});qe(()=>{o.visibility=f(r)}),qe(()=>{if(!f(I))return;const i=Object.entries(f(I).wacRule.agent).filter(([c,H])=>c!==p().info.webId&&H.read===!0).map(([c])=>c);o.selected=i});const{getResource:l,getSubject:F}=Dt(),x=async i=>{if(i.preventDefault(),g()?.type!=="SolidLeaf")throw new Error("not a leaf");if(!f(I)?.wacRule)throw new Error;let c=JSON.parse(JSON.stringify(f(I).wacRule)),H=JSON.parse(JSON.stringify(f(I).wacRule));if(f(r),o.visibility==="public")c.public.read=!0;else if(o.visibility==="shared"&&o.selected.length>0){c.public.read=!1;for(let R in c.agent)R!==p().info.webId&&(c.agent[R].read=!1);o.selected.forEach(R=>{c.agent[R]??={read:!1,append:!1,write:!1,control:!1},c.agent[R].read=!0})}else c=void 0;if(c===void 0){const R=await ya(g(),{fetch:p().fetch});if(R.isError)throw R;const q=R.wacUri;await l(q).delete()}else await g().setWac(c);const M=await g().getWac({ignoreCache:!0});if(M.isError)throw M;Ve(I,M,!0),Be(Oe,!1);const b=M.wacRule;Fe({data:{title:"Update successful",description:`Access was updated to ${f(r)}`,type:Me.success}}),H.public.read!==b.public.read&&Fe({data:{title:"TODO Notification successful",description:"Public geoindex was notified",type:Me.success}});const $=Object.keys(b.agent),D=Object.keys(H.agent);for(let R of $)D.includes(R)||Fe({data:{title:"TODO Notification successful",description:`${F(Ne,R)?.name} was notified`,type:Me.success}})};var ve=Qa(),fe=$e(ve);{var be=i=>{var c=Ga();B(c,()=>({"aria-label":`Privacy and sharing: ${f(r)}`,..._()}),void 0,void 0,"svelte-1r4q63y");var H=k(c);{var M=$=>{{let D=_e(()=>f(X)?"green":"black");Ot($,{"aria-hidden":"true",get color(){return f(D)}})}},b=$=>{var D=Ce(),R=$e(D);{var q=u=>{{let Y=_e(()=>f(X)?"green":"black");kt(u,{"aria-hidden":"true",get color(){return f(Y)}})}},N=u=>{var Y=Ce(),ae=$e(Y);{var e=n=>{{let h=_e(()=>f(X)?"green":"black");Et(n,{"aria-hidden":"true",get color(){return f(h)}})}};Ie(ae,n=>{f(r)===T.public&&n(e)},!0)}W(u,Y)};Ie(R,u=>{f(r)===T.shared?u(q):u(N,!1)},!0)}W($,D)};Ie(H,$=>{f(r)===T.private?$(M):$(b,!1)})}O(c),V(c,$=>Z?.($)),W(i,c)},te=i=>{ma(i,{})};Ie(fe,i=>{f(I)?i(be):i(te,!1)})}var G=A(fe,2);{var C=i=>{var c=Ya();B(c,()=>({...w()}),void 0,void 0,"svelte-1r4q63y");var H=k(c);B(H,()=>({class:"overlay",...re()}),void 0,void 0,"svelte-1r4q63y"),V(H,P=>ne?.(P));var M=A(H,2);B(M,()=>({class:"content",...U()}),void 0,void 0,"svelte-1r4q63y");var b=k(M);B(b,()=>({class:"title",...ue()}),void 0,void 0,"svelte-1r4q63y"),V(b,P=>oe?.(P));var $=A(b,2);B($,()=>({...j()}),void 0,void 0,"svelte-1r4q63y"),V($,P=>de?.(P));var D=A($,2),R=k(D),q=k(R);je(q);var N,u=A(q),Y=k(u);Ot(Y,{"aria-hidden":"true"}),O(u),O(R);var ae=A(R,2),e=k(ae);je(e);var n,h=A(e),E=k(h);kt(E,{"aria-hidden":"true"}),O(h);var Re=A(h,2);{var K=P=>{{let Ft=_e(()=>o.visibility!==T.shared);za(P,{get disabled(){return f(Ft)},get value(){return o.selected},set value(Mt){o.selected=Mt}})}};Ie(Re,P=>{o.visibility===T.shared&&P(K)})}O(ae);var ge=A(ae,2),S=k(ge);je(S);var ke,le=A(S),me=k(le);Et(me,{"aria-hidden":"true"}),O(le),O(ge),ft(2),O(D);var De=A(D,2);B(De,()=>({class:"close",...J()}),void 0,void 0,"svelte-1r4q63y");var he=k(De);Tt(he,{}),O(De),V(De,P=>z?.(P)),O(M),V(M,P=>ie?.(P)),O(c),V(c,P=>ee?.(P)),Xe(()=>{N!==(N=T.private)&&(q.value=(q.__value=T.private)??""),n!==(n=T.shared)&&(e.value=(e.__value=T.shared)??""),ke!==(ke=T.public)&&(S.value=(S.__value=T.public)??"")}),xt("submit",D,x),nt(se,[],q,()=>(T.private,o.visibility),P=>o.visibility=P),nt(se,[],e,()=>(T.shared,o.visibility),P=>o.visibility=P),nt(se,[],S,()=>(T.public,o.visibility),P=>o.visibility=P),W(i,c)};Ie(G,i=>{v()&&i(C)})}W(y,ve),Ee(),s()}const Za=async(y,t,a,s)=>{const{name:p}=t.place;if(globalThis.confirm(`Do you really want to delete place ${p} (${t.place["@id"]})?`)){const v=a.getResource(t.place["@id"]);if(v.isError)throw v;const _=await _a(v,{fetch:s().fetch,dataset:a});_.isError?Fe({data:{type:Me.error,title:"Deletion failed",description:_.name}}):Fe({data:{type:Me.success,title:"Deletion successful",description:`Deleted place ${p}`}})}};var er=ce('<div><div></div> <div><h2>Update Place</h2> <p></p> <form class="svelte-5hf8eu"><div class="field svelte-5hf8eu"><label for="name">Name</label> <input id="name" type="text" name="name" placeholder="name"/></div> <div class="field svelte-5hf8eu"><label for="description">Description</label> <textarea id="description" name="description" placeholder="description"></textarea></div> <button type="submit">Update place</button></form> <button><!></button></div></div>'),tr=ce('<div class="controls svelte-5hf8eu"><!> <button><!></button> <button aria-label="Delete place"><!></button></div> <!>',1);function ar(y,t){we(t,!0);const[a,s]=Ke(),p=()=>m(de,"$open",a),g=()=>m(bt,"$session",a),v=()=>m(I,"$trigger",a),_=()=>m(X,"$portalled",a),w=()=>m(Z,"$overlay",a),re=()=>m(ee,"$content",a),U=()=>m(ne,"$title",a),ue=()=>m(ie,"$description",a),j=()=>m(oe,"$close",a),{changeData:J,commitData:se,dataset:L}=Dt(),{elements:{trigger:I,portalled:X,overlay:Z,content:ee,title:ne,description:ie,close:oe},states:{open:de}}=Nt(),z={name:t.place.name,description:t.place.description,latitude:t.place.geo.latitude,longitude:t.place.geo.longitude},Oe=async te=>{te.preventDefault();const{name:G}=t.place,C=L.getResource(t.place["@id"]);if(C.isError)throw C;const i=J(t.place,C);i.name=z.name,i.description=z.description;const c=await se(i);if(c.isError)throw c;Be(de,!1),Fe({data:{title:"Update successful",description:`Updated place ${G}`,type:Me.success}})};var T=tr(),r=$e(T),o=k(r);Xa(o,{get place(){return t.place}});var l=A(o,2);B(l,()=>({"aria-label":"Edit place",...v()}),void 0,void 0,"svelte-5hf8eu");var F=k(l);Ha(F,{"aria-hidden":"true"}),O(l),V(l,te=>I?.(te));var x=A(l,2);x.__click=[Za,t,L,g];var ve=k(x);qa(ve,{"aria-hidden":"true"}),O(x),O(r);var fe=A(r,2);{var be=te=>{var G=er();B(G,()=>({..._()}),void 0,void 0,"svelte-5hf8eu");var C=k(G);B(C,()=>({class:"overlay",...w()}),void 0,void 0,"svelte-5hf8eu"),V(C,u=>Z?.(u));var i=A(C,2);B(i,()=>({class:"content",...re()}),void 0,void 0,"svelte-5hf8eu");var c=k(i);B(c,()=>({class:"title",...U()}),void 0,void 0,"svelte-5hf8eu"),V(c,u=>ne?.(u));var H=A(c,2);B(H,()=>({...ue()}),void 0,void 0,"svelte-5hf8eu"),V(H,u=>ie?.(u));var M=A(H,2),b=k(M),$=A(k(b),2);je($),O(b);var D=A(b,2),R=A(k(D),2);jt(R),O(D),ft(2),O(M);var q=A(M,2);B(q,()=>({class:"close",...j()}),void 0,void 0,"svelte-5hf8eu");var N=k(q);Tt(N,{}),O(q),V(q,u=>oe?.(u)),O(i),V(i,u=>ee?.(u)),O(G),V(G,u=>X?.(u)),xt("submit",M,Oe),$t($,()=>z.name,u=>z.name=u),$t(R,()=>z.description,u=>z.description=u),W(te,G)};Ie(fe,te=>{p()&&te(be)})}W(y,T),Ee(),s()}Ut(["click"]);var rr=ce("<li><!></li>"),nr=ce('<ul data-testid="place-list"></ul>');function _r(y,t){we(t,!1);const[a,s]=Ke(),p=()=>m(xa,"$placeResources",a),g=()=>m(v,"$data",a);let v=$a(Sa,ka.type,Ia.Place,null);Lt(()=>p(),()=>{p()}),Ht(),qt();var _=nr();ot(_,5,g,w=>w["@id"],(w,re)=>{var U=rr(),ue=k(U);Ra(ue,{get place(){return f(re)},children:(j,J)=>{ar(j,{get place(){return f(re)}})},$$slots:{default:!0}}),O(U),W(w,U)}),O(_),W(y,_),Ee(),s()}export{_r as component};
