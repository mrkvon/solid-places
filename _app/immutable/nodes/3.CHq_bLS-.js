import"../chunks/DsnmJJEf.js";import"../chunks/RnY9KeEG.js";import{ak as G,al as J,am as L,f as N,an as O,ao as R,q as t,a as T,ap as W,aq as y,ar as s,u as x,D as $,as as p,a2 as w,at as D}from"../chunks/oCosmefv.js";import{e as j,a as B,r as H}from"../chunks/F3QxBvzP.js";import{r as _}from"../chunks/CSsI9_iK.js";import{b as l}from"../chunks/Ddv4WL5c.js";import{i as K}from"../chunks/D2Y4SetG.js";import{s as M,a as Q}from"../chunks/DGl_FdAz.js";import{g as V}from"../chunks/DeNnqk5p.js";import{d as I,s as X,u as Y}from"../chunks/E4DteRQY.js";import{s as q}from"../chunks/CrpbXhly.js";import{g as Z,P as ee}from"../chunks/DM_5NpTO.js";var te=N('<form class="svelte-uz3xhk"><input type="text" placeholder="name" required/> <textarea placeholder="description" name="description"></textarea> <input type="number" step="any" id="latitude" name="latitude" placeholder="latitude" required/> <input type="number" step="any" name="longitude" placeholder="longitude" required/> <input type="submit" value="Add place"/></form> <pre> </pre>',1);function ge(S,k){G(k,!1);const[A,C]=M(),u=()=>Q(X,"$session",A),h={name:"",description:"",latitude:null,longitude:null};let e=$(h),i=$([]);const{createData:E,commitData:P}=Y(),U=async a=>{a.preventDefault();const g=await t(i)[0].createChildIfAbsent("places/");if(g.isError)throw g;const n=await g.resource.createChildIfAbsent(`place-${crypto.randomUUID()}.ttl`);if(n.isError)throw n;const r=E(ee,n.uri+"#place",n.resource);r.type=q({"@id":"Place"}),r.geo={type:q({"@id":"GeoCoordinates"}),latitude:t(e).latitude,longitude:t(e).longitude},r.name=t(e).name,t(e).description&&(r.description=t(e).description),await P(r),w(e,h),V("list")};J(()=>(u(),I),()=>{u().info.webId&&Z(u().info.webId,I).then(a=>{a.isError||w(i,a.storageContainers)})}),L(),K();var v=te(),o=O(v),d=y(o);_(d);var m=s(d,2);H(m);var c=s(m,2);_(c);var f=s(c,2);_(f);var z=s(f,2);D(o);var b=s(o,2),F=y(b,!0);D(b),R(a=>{z.disabled=(t(i),x(()=>t(i).length===0)),B(F,a)},[()=>(t(e),x(()=>JSON.stringify(t(e),null,2)))]),j("submit",o,U),l(d,()=>t(e).name,a=>p(e,t(e).name=a)),l(m,()=>t(e).description,a=>p(e,t(e).description=a)),l(c,()=>t(e).latitude,a=>p(e,t(e).latitude=a)),l(f,()=>t(e).longitude,a=>p(e,t(e).longitude=a)),T(S,v),W(),C()}export{ge as component};
