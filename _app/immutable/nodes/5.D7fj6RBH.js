import"../chunks/DsnmJJEf.js";import{aa as st,F as be,ab as De,G as _e,w as Ge,a as W,I as ge,f as ae,J as O,K as T,M as g,H as Fe,a8 as We,Y as Ke,y as ke,b as Oe,g as v,ac as fe,n as It}from"../chunks/BIIsVck-.js";import{I as Ye,X as vt,e as ze}from"../chunks/CT1HdE_K.js";import{a as f,s as Le,b as Pe}from"../chunks/gbVgNTor.js";import{w as Re,x as je,g as qt,y as Bt,f as Qe,l as xt,a as et,e as Ct,r as Ut}from"../chunks/Sv6Vf9Pg.js";import{s as Xe,r as Ze,i as pe,p as St}from"../chunks/B4eF0bdU.js";import{i as $e,K as jt,M as Pt,N as Jt,m as oe,f as ye,w as dt,D as ut,t as tt,G as nt,x as Je,h as ft,g as Tt,c as Kt,d as zt,O as Be,P as Gt,Q as Yt,b as Ne,k as b,R as gt,U as Ue,V as it,F as Qt,o as mt,W as Xt,X as Zt,Y as en,Z as tn,E as ht,_ as ct,e as Ee,u as nn,a as At,n as Ae,s as at,$ as an,a0 as rn,C as sn,v as on,z as Rt,a1 as ln,H as dn,a2 as yt,p as un,a3 as cn,a4 as vn,a5 as fn,l as pn,y as _t,I as Me,J as Y,a6 as Nt,a7 as Dt,L as bn,a8 as Ve,a9 as He}from"../chunks/Bn21ThHC.js";import{s as Ft,r as qe,a as Q,d as ot,b as $t}from"../chunks/CLqYpC2G.js";import{h as pt,i as Lt,j as gn,k as wt,b as rt,m as mn,u as Mt,n as hn,a as yn}from"../chunks/DNHB5EVq.js";import{s as _n}from"../chunks/Ai-kyT4T.js";import{f as $n,a as wn,q as kn,r as En,s as On}from"../chunks/bKtOVrpM.js";import{s as In,T as xn,P as Cn}from"../chunks/BAj3eHCd.js";import{P as Sn}from"../chunks/BzEzGBMK.js";function lt(y){return Array.from(y.querySelectorAll('[role="option"]:not([data-disabled])')).filter(e=>$e(e))}function Pn(y){return e=>{const t=e.target,s=jt(y);if(!s||!Pt(t))return!1;const o=s.id;return!!(Jt(t)&&o===t.htmlFor||t.closest(`label[for="${o}"]`))}}function Tn(){return{elements:{root:oe("label",{action:e=>({destroy:ye(e,"mousedown",s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})})})}}}const An=[b.ARROW_LEFT,b.ESCAPE,b.ARROW_RIGHT,b.SHIFT,b.CAPS_LOCK,b.CONTROL,b.ALT,b.META,b.ENTER,b.F1,b.F2,b.F3,b.F4,b.F5,b.F6,b.F7,b.F8,b.F9,b.F10,b.F11,b.F12],Rn={positioning:{placement:"bottom",sameWidth:!0},scrollAlignment:"nearest",loop:!0,defaultOpen:!1,closeOnOutsideClick:!0,preventScroll:!0,escapeBehavior:"close",forceVisible:!1,portal:"body",builder:"listbox",disabled:!1,required:!1,name:void 0,typeahead:!0,highlightOnHover:!0,onOutsideClick:void 0,preventTextSelectionOverflow:!0,rootElement:void 0},Nn=["trigger","menu","label"];function Dn(y){const e={...Rn,...y},t=dt(Re(null)),s=dt(Re(null)),o=e.selected??Re(e.defaultSelected),m=ut(o,e?.onSelectedChange),d=je(s,n=>n?$(n):void 0),c=e.open??Re(e.defaultOpen),_=ut(c,e?.onOpenChange),ee=tt({...nt(e,"open","defaultOpen","builder","ids"),multiple:e.multiple??!1}),{scrollAlignment:V,loop:I,closeOnOutsideClick:R,escapeBehavior:F,preventScroll:te,portal:H,forceVisible:K,positioning:ne,multiple:L,arrowSize:z,disabled:le,required:M,typeahead:re,name:N,highlightOnHover:j,onOutsideClick:ce,preventTextSelectionOverflow:ve,rootElement:a}=ee,S=a.get();Je&&S===void 0?a.set(document):y?.portal===void 0&&H.set(S);const{name:l,selector:J}=ft(e.builder),P=tt({...Tt(Nn),...e.ids}),{handleTypeaheadSearch:C}=Kt({onMatch:n=>{s.set(n),n.scrollIntoView({block:V.get()})},getCurrentItem(){return s.get()}});function $(n){const r=n.getAttribute("data-value"),A=n.getAttribute("data-label"),x=n.hasAttribute("data-disabled");return{value:r&&JSON.parse(r),label:A??n.textContent??void 0,disabled:!!x}}const U=n=>{m.update(r=>{if(L.get()){const x=Array.isArray(r)?[...r]:[];return ln(n,x,(Ie,Z)=>Be(Ie.value,Z.value))}return n})};function i(n){const r=$(n);U(r)}async function w(){_.set(!0),await st();const n=Ue(P.menu.get(),a.get());if(!$e(n))return;const r=n.querySelector("[aria-selected=true]");$e(r)&&s.set(r)}function u(){_.set(!1),s.set(null)}const k=zt({open:_,forceVisible:K,activeTrigger:t}),q=je([m],([n])=>r=>Array.isArray(n)?n.some(A=>Be(A.value,r)):Gt(r)?Be(n?.value,Yt(r,void 0)):Be(n?.value,r)),G=je([d],([n])=>r=>Be(n?.value,r)),ie=oe(l("trigger"),{stores:[_,s,le,P.menu,P.trigger,P.label],returned:([n,r,A,x,Ie,Z])=>({"aria-activedescendant":r?.id,"aria-autocomplete":"list","aria-controls":x,"aria-expanded":n,"aria-labelledby":Z,"data-state":n?"open":"closed",id:Ie,role:"combobox",disabled:ht(A),type:e.builder==="select"?"button":void 0}),action:n=>{t.set(n);const r=ct(n),A=Ne(ye(n,"click",()=>{n.focus(),_.get()?u():w()}),ye(n,"keydown",x=>{if(!_.get()){if(An.includes(x.key)||x.key===b.TAB||x.key===b.BACKSPACE&&r&&n.value===""||x.key===b.SPACE&&gt(n))return;w(),st().then(()=>{if(m.get())return;const we=Ue(P.menu.get(),a.get());if(!$e(we))return;const p=Array.from(we.querySelectorAll(`${J("item")}:not([data-disabled]):not([data-hidden])`)).filter(xe=>$e(xe));p.length&&(x.key===b.ARROW_DOWN?(s.set(p[0]),p[0].scrollIntoView({block:V.get()})):x.key===b.ARROW_UP&&(s.set(it(p)),it(p).scrollIntoView({block:V.get()})))})}if(x.key===b.TAB){u();return}if(x.key===b.ENTER&&!x.isComposing||x.key===b.SPACE&&gt(n)){x.preventDefault();const Z=s.get();Z&&i(Z),L.get()||u()}if(x.key===b.ARROW_UP&&x.altKey&&u(),Qt.includes(x.key)){x.preventDefault();const Z=Ue(P.menu.get(),a.get());if(!$e(Z))return;const we=lt(Z);if(!we.length)return;const p=we.filter(bt=>!mt(bt)&&bt.dataset.hidden===void 0),xe=s.get(),he=xe?p.indexOf(xe):-1,Ce=I.get(),Ht=V.get();let Se;switch(x.key){case b.ARROW_DOWN:Se=tn(p,he,Ce);break;case b.ARROW_UP:Se=en(p,he,Ce);break;case b.PAGE_DOWN:Se=Zt(p,he,10,Ce);break;case b.PAGE_UP:Se=Xt(p,he,10,Ce);break;case b.HOME:Se=p[0];break;case b.END:Se=it(p);break;default:return}s.set(Se),Se?.scrollIntoView({block:Ht})}else if(re.get()){const Z=Ue(P.menu.get(),a.get());if(!$e(Z))return;C(x.key,lt(Z))}}));return{destroy(){t.set(null),A()}}}}),X=oe(l("menu"),{stores:[k,P.menu],returned:([n,r])=>({hidden:n?void 0:!0,id:r,role:"listbox",style:n?void 0:at({display:"none"})}),action:n=>{let r=Ae;const A=Ne(Ee([k,H,R,ne,t],([x,Ie,Z,we,p])=>{r(),!(!x||!p)&&st().then(()=>{r();const xe=Pn(P.trigger.get());r=nn(n,{anchorElement:p,open:_,options:{floating:we,focusTrap:null,modal:{closeOnInteractOutside:Z,onClose:u,shouldCloseOnInteractOutside:he=>{if(ce.get()?.(he),he.defaultPrevented)return!1;const Ce=he.target;return!(!Pt(Ce)||Ce===p||p.contains(Ce)||xe(he))}},escapeKeydown:{handler:u,behaviorType:F},portal:At(n,Ie),preventTextSelectionOverflow:{enabled:ve}}}).destroy})}));return{destroy:()=>{A(),r()}}}}),{elements:{root:h}}=Tn(),{action:D}=qt(h),B=oe(l("label"),{stores:[P.label,P.trigger],returned:([n,r])=>({id:n,for:r}),action:D}),de=oe(l("option"),{stores:[q],returned:([n])=>r=>{const A=n(r.value);return{"data-value":JSON.stringify(r.value),"data-label":r.label,"data-disabled":ht(r.disabled),"aria-disabled":r.disabled?!0:void 0,"aria-selected":A,"data-selected":A?"":void 0,id:an(),role:"option"}},action:n=>({destroy:Ne(ye(n,"click",A=>{if(mt(n)){A.preventDefault();return}i(n),L.get()||u()}),Ee(j,A=>A?Ne(ye(n,"mouseover",()=>{s.set(n)}),ye(n,"mouseleave",()=>{s.set(null)})):void 0))})}),ue=oe(l("group"),{returned:()=>n=>({role:"group","aria-labelledby":n})}),se=oe(l("group-label"),{returned:()=>n=>({id:n})}),E=rn({value:je([m],([n])=>{const r=Array.isArray(n)?n.map(A=>A.value):n?.value;return typeof r=="string"?r:JSON.stringify(r)}),name:Bt(N),required:M,prefix:e.builder}),me=oe(l("arrow"),{stores:z,returned:n=>({"data-arrow":!0,style:at({position:"absolute",width:`var(--arrow-size, ${n}px)`,height:`var(--arrow-size, ${n}px)`})})});return Ee([s],([n])=>{if(!Je)return;const r=Ue(P.menu.get(),a.get());$e(r)&&lt(r).forEach(A=>{A===n?sn(A):on(A)})}),Ee([_,te],([n,r])=>{if(!(!Je||!n||!r))return Rt()}),{ids:P,elements:{trigger:ie,group:ue,option:de,menu:X,groupLabel:se,label:B,hiddenInput:E,arrow:me},states:{open:_,selected:m,highlighted:d,highlightedItem:s},helpers:{isSelected:q,isHighlighted:G,closeMenu:u},options:ee}}const{name:Fn}=ft("combobox");function Wt(y){const e=Dn({...y,builder:"combobox",typeahead:!1}),t=Re(""),s=Re(!1),o=oe(Fn("input"),{stores:[e.elements.trigger,t],returned:([m,d])=>({...nt(m,"action"),role:"combobox",value:d,autocomplete:"off"}),action:m=>{const d=Ne(ye(m,"input",_=>{!ct(_.target)&&!yt(_.target)||s.set(!0)}),dn(m,"input",_=>{ct(_.target)&&t.set(_.target.value),yt(_.target)&&t.set(_.target.innerText)})),{destroy:c}=e.elements.trigger(m);return{destroy(){c?.(),d()}}}});return Ee(e.states.open,m=>{m||s.set(!1)}),{...e,elements:{...nt(e.elements,"trigger"),input:o},states:{...e.states,touchedInput:s,inputValue:t}}}const{name:Te}=ft("dialog"),Ln={preventScroll:!0,escapeBehavior:"close",closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:"body",forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},Mn=["content","title","description"];function Vt(y){const e={...Ln,...y},t=tt(nt(e,"ids")),{preventScroll:s,escapeBehavior:o,closeOnOutsideClick:m,role:d,portal:c,forceVisible:_,openFocus:ee,closeFocus:V,onOutsideClick:I}=t,R=dt.writable(null),F=tt({...Tt(Mn),...e.ids}),te=e.open??Re(e.defaultOpen),H=ut(te,e?.onOpenChange),K=je([H,_],([a,S])=>a||S);let ne=Ae;function L(a){const S=a.currentTarget,l=a.currentTarget;!$e(S)||!$e(l)||(H.set(!0),R.set(l))}function z(){H.set(!1)}const le=oe(Te("trigger"),{stores:[H],returned:([a])=>({"aria-haspopup":"dialog","aria-expanded":a,type:"button"}),action:a=>({destroy:Ne(ye(a,"click",l=>{L(l)}),ye(a,"keydown",l=>{l.key!==b.ENTER&&l.key!==b.SPACE||(l.preventDefault(),L(l))}))})}),M=oe(Te("overlay"),{stores:[K,H],returned:([a,S])=>({hidden:a?void 0:!0,tabindex:-1,style:a?void 0:at({display:"none"}),"aria-hidden":!0,"data-state":S?"open":"closed"})}),re=oe(Te("content"),{stores:[K,F.content,F.description,F.title,H],returned:([a,S,l,J,P])=>({id:S,role:d.get(),"aria-describedby":l,"aria-labelledby":J,"aria-modal":a?"true":void 0,"data-state":P?"open":"closed",tabindex:-1,hidden:a?void 0:!0,style:a?void 0:at({display:"none"})}),action:a=>{let S=Ae,l=Ae,J=Ae;const P=Ee([K,m],([C,$])=>{l(),S(),J(),C&&(l=cn(a,{closeOnInteractOutside:$,onClose:z,shouldCloseOnInteractOutside(U){return I.get()?.(U),!U.defaultPrevented}}).destroy,S=vn(a,{handler:z,behaviorType:o}).destroy,J=fn(a,{fallbackFocus:a}).destroy)});return{destroy:()=>{ne(),P(),l(),S(),J()}}}}),N=oe(Te("portalled"),{stores:c,returned:a=>({"data-portal":un(a)}),action:a=>{const S=Ee([c],([l])=>{if(l===null)return Ae;const J=At(a,l);return J===null?Ae:pn(a,J).destroy});return{destroy(){S()}}}}),j=oe(Te("title"),{stores:[F.title],returned:([a])=>({id:a})}),ce=oe(Te("description"),{stores:[F.description],returned:([a])=>({id:a})}),ve=oe(Te("close"),{returned:()=>({type:"button"}),action:a=>({destroy:Ne(ye(a,"click",()=>{z()}),ye(a,"keydown",l=>{l.key!==b.SPACE&&l.key!==b.ENTER||(l.preventDefault(),z())}))})});return Ee([H,s],([a,S])=>{if(Je){if(S&&a&&(ne=Rt()),a){const l=document.getElementById(F.content.get());_t({prop:ee.get(),defaultEl:l})}return()=>{_.get()||ne()}}}),Ee(H,a=>{!Je||a||_t({prop:V.get(),defaultEl:R.get()})},{skipFirstRun:!0}),{ids:F,elements:{content:re,trigger:le,title:j,description:ce,overlay:M,close:ve,portalled:N},states:{open:H},options:t}}function kt(y,e){be(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let t=Ze(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"}],["circle",{cx:"12",cy:"12",r:"10"}]];Ye(y,Xe({name:"earth"},()=>t,{get iconNode(){return s},children:(o,m)=>{var d=De(),c=_e(d);Qe(c,()=>e.children??Ge),W(o,d)},$$slots:{default:!0}})),ge()}function Et(y,e){be(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let t=Ze(e,["$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"16",r:"1"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3"}]];Ye(y,Xe({name:"lock-keyhole"},()=>t,{get iconNode(){return s},children:(o,m)=>{var d=De(),c=_e(d);Qe(c,()=>e.children??Ge),W(o,d)},$$slots:{default:!0}})),ge()}function Wn(y,e){be(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let t=Ze(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];Ye(y,Xe({name:"pencil"},()=>t,{get iconNode(){return s},children:(o,m)=>{var d=De(),c=_e(d);Qe(c,()=>e.children??Ge),W(o,d)},$$slots:{default:!0}})),ge()}function Vn(y,e){be(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let t=Ze(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];Ye(y,Xe({name:"trash-2"},()=>t,{get iconNode(){return s},children:(o,m)=>{var d=De(),c=_e(d);Qe(c,()=>e.children??Ge),W(o,d)},$$slots:{default:!0}})),ge()}function Ot(y,e){be(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let t=Ze(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M18 21a8 8 0 0 0-16 0"}],["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"}]];Ye(y,Xe({name:"users-round"},()=>t,{get iconNode(){return s},children:(o,m)=>{var d=De(),c=_e(d);Qe(c,()=>e.children??Ge),W(o,d)},$$slots:{default:!0}})),ge()}var Hn=(y,e,t,s)=>e.onClickRemove(t()),qn=ae('<button type="button"><!></button>'),Bn=ae('<div class="tag svelte-nisp7u"> <!></div>');function Un(y,e){be(e,!0);const[t,s]=Le(),o=()=>f(m,"$person",t);pt(e.webId);let m=Lt(Me,e.webId);var d=Bn(),c=O(d),_=T(c);{var ee=V=>{var I=qn();I.__click=[Hn,e,o,m];var R=O(I);vt(R,{"aria-hidden":"true",size:"1.25rem"}),g(I),Fe(()=>Ft(I,"aria-label",`Remove ${o().name}`)),W(V,I)};pe(_,V=>{e.onClickRemove&&V(ee)})}g(d),Fe(()=>et(c,`${o().name??""} `)),W(y,d),ge(),s()}xt(["click"]);var jn=ae("<li> </li>"),Jn=ae('<li><div><span class="font-medium"> </span></div></li>'),Kn=ae(`<li class="relative cursor-pointer rounded-md py-1 pl-8 pr-4
        data-[highlighted]:bg-magnum-100 data-[highlighted]:text-magnum-700">No results found</li>`),zn=ae("<ul><!>  <!></ul>"),Gn=ae('<div><div><div class="selected-people svelte-8dggyk"></div> <input/></div></div> <!>',1);function Yn(y,e){be(e,!0);const[t,s]=Le(),o=()=>f(re,"$inputValue",t),m=()=>f(M,"$open",t),d=()=>f(j,"$selected",t),c=()=>f(rt,"$session",t),_=()=>f(N,"$touchedInput",t),ee=()=>f(l,"$friends",t),V=()=>f(z,"$input",t),I=()=>f(L,"$menu",t),R=()=>f(v($),"$personByWebId",t),F=()=>f(v(C),"$personResourceResult",t),te=()=>f(le,"$option",t),H=()=>f(v(U),"$matched",t);let K=St(e,"value",15),ne=We(Ke([]));const{elements:{menu:L,input:z,option:le},states:{open:M,inputValue:re,touchedInput:N,selected:j},helpers:{isSelected:ce,isHighlighted:ve}}=Wt({multiple:!0,onSelectedChange:h=>{const D=h.next?.map(B=>B.value)??[];return ke(ne,D,!0),K(D),Pe(re,""),Pe(M,!1),h.next}});Oe(()=>{K().length!==d()?.length&&Pe(j,K().map(h=>({value:h,label:""})))});let a;const S=h=>{clearTimeout(a),a=setTimeout(h,450)};gn(Me,c().info.webId,c().info.webId,{name:!0,knows:{name:!0}});let l=wt(Me,c().info.webId,$n.knows),J=We("");Oe(()=>{const h=o();_()?S(()=>{ke(J,h,!0)}):ke(J,h,!0)});let P=fe(()=>ee().filter(h=>h.name?.toLowerCase().includes(o().toLowerCase())||h["@id"]?.toLowerCase().includes(o().toLowerCase()))),C=fe(()=>pt(v(J))),$=fe(()=>Lt(Me,v(J))),U=fe(()=>wt(Me,v(J),wn.oidcIssuer));const i=h=>{K(K().filter(D=>D!==h["@id"]))};var w=Gn(),u=_e(w),k=O(u),q=O(k);ze(q,20,()=>v(ne),h=>h,(h,D)=>{Un(h,{get webId(){return D},onClickRemove:i})}),g(q);var G=T(q,2);qe(G),Q(G,()=>({...V(),disabled:e.disabled||V().disabled,placeholder:"Name or webId"}),void 0,void 0,"svelte-8dggyk"),Y(G,h=>z?.(h)),g(k),g(u);var ie=T(u,2);{var X=h=>{var D=zn();Q(D,()=>({class:"menu",...I()}),void 0,void 0,"svelte-8dggyk");var B=O(D);{var de=se=>{var E=jn();Q(E,n=>({...n}),[()=>te()({value:R()["@id"],label:R().name??R()["@id"],disabled:F().isPresent()!==!0||H().size===0})],void 0,"svelte-8dggyk");var me=O(E,!0);g(E),Y(E,n=>le?.(n)),Fe(()=>et(me,R().name??R()["@id"])),W(se,E)};pe(B,se=>{R()?.["@id"]&&!F()?.isError&&se(de)})}var ue=T(B,2);ze(ue,17,()=>v(P),se=>se["@id"],(se,E)=>{var me=Jn();Q(me,x=>({...x}),[()=>te()({value:v(E)["@id"],label:v(E).name??v(E)["@id"]})],void 0,"svelte-8dggyk");var n=O(me),r=O(n),A=O(r,!0);g(r),g(n),g(me),Y(me,x=>le?.(x)),Fe(()=>et(A,v(E).name??v(E)["@id"])),W(se,me)},se=>{var E=Kn();W(se,E)}),g(D),Y(D,se=>L?.(se)),Nt(3,D,()=>Dt,()=>({duration:150,y:-5})),W(h,D)};pe(ie,h=>{m()&&h(X)})}W(y,w),ge(),s()}var Qn=ae("<button><!></button>"),Xn=ae('<div><div></div> <div><h2>Visibility</h2> <p></p> <form class="svelte-1r4q63y"><div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="private"/><label for="private" aria-label="Private"><!></label></div> <div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="shared" aria-label="Shared"/><label for="shared" aria-label="Shared"><!></label> <!></div> <div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="public" aria-label="Public"/><label for="public" aria-label="Public"><!></label></div> <button type="submit">Confirm</button></form> <button><!></button></div></div>'),Zn=ae("<!> <!>",1);function ea(y,e){be(e,!0);const[t,s]=Le(),o=()=>f(le,"$open",t),m=()=>f(F,"$trigger",t),d=()=>f(te,"$portalled",t),c=()=>f(H,"$overlay",t),_=()=>f(K,"$content",t),ee=()=>f(ne,"$title",t),V=()=>f(L,"$description",t),I=()=>f(z,"$close",t),R=[],{elements:{trigger:F,portalled:te,overlay:H,content:K,title:ne,description:L,close:z},states:{open:le}}=Vt();var M=(C=>(C.private="private",C.shared="shared",C.public="public",C))(M||{});let re=fe(()=>e.wac?e.wac.public.read?"public":Object.entries(e.wac.agent).some(([C,$])=>C!==e.self&&$.read)?"shared":"private":void 0);const N=Ke({visibility:void 0,selected:[]});Oe(()=>{N.visibility=v(re)});let j=fe(()=>!!e.wac?.agent[e.self].control);Oe(()=>{if(!e.wac)return;const C=Object.entries(e.wac.agent).filter(([$,U])=>$!==e.self&&U.read===!0).map(([$])=>$);N.selected=C});const ce=async C=>{if(C.preventDefault(),!e.wac)throw new Error;let $=JSON.parse(JSON.stringify(e.wac));if(N.visibility==="public")$.public.read=!0;else if(N.visibility==="shared"&&N.selected.length>0){$.public.read=!1;for(let U in $.agent)U!==e.self&&($.agent[U].read=!1);N.selected.forEach(U=>{$.agent[U]??={read:!1,append:!1,write:!1,control:!1},$.agent[U].read=!0})}else $=void 0;await e.onchangewac($),Pe(le,!1)};var ve=Zn(),a=_e(ve);{var S=C=>{var $=Qn();Q($,()=>({"aria-label":`Privacy and sharing: ${v(re)}`,...m()}),void 0,void 0,"svelte-1r4q63y");var U=O($);{var i=u=>{{let k=fe(()=>v(j)?"green":"black");Et(u,{"aria-hidden":"true",get color(){return v(k)}})}},w=u=>{var k=De(),q=_e(k);{var G=X=>{{let h=fe(()=>v(j)?"green":"black");Ot(X,{"aria-hidden":"true",get color(){return v(h)}})}},ie=X=>{var h=De(),D=_e(h);{var B=de=>{{let ue=fe(()=>v(j)?"green":"black");kt(de,{"aria-hidden":"true",get color(){return v(ue)}})}};pe(D,de=>{v(re)===M.public&&de(B)},!0)}W(X,h)};pe(q,X=>{v(re)===M.shared?X(G):X(ie,!1)},!0)}W(u,k)};pe(U,u=>{v(re)===M.private?u(i):u(w,!1)})}g($),Y($,u=>F?.(u)),W(C,$)},l=C=>{bn(C,{})};pe(a,C=>{e.wac?C(S):C(l,!1)})}var J=T(a,2);{var P=C=>{var $=Xn();Q($,()=>({...d()}),void 0,void 0,"svelte-1r4q63y");var U=O($);Q(U,()=>({class:"overlay",...c()}),void 0,void 0,"svelte-1r4q63y"),Y(U,p=>H?.(p));var i=T(U,2);Q(i,()=>({class:"content",..._()}),void 0,void 0,"svelte-1r4q63y");var w=O(i);Q(w,()=>({class:"title",...ee()}),void 0,void 0,"svelte-1r4q63y"),Y(w,p=>ne?.(p));var u=T(w,2);Q(u,()=>({...V()}),void 0,void 0,"svelte-1r4q63y"),Y(u,p=>L?.(p));var k=T(u,2),q=O(k),G=O(q);qe(G);var ie,X=T(G),h=O(X);Et(h,{"aria-hidden":"true"}),g(X),g(q);var D=T(q,2),B=O(D);qe(B);var de,ue=T(B),se=O(ue);Ot(se,{"aria-hidden":"true"}),g(ue);var E=T(ue,2);{var me=p=>{{let xe=fe(()=>N.visibility!==M.shared);Yn(p,{get disabled(){return v(xe)},get value(){return N.selected},set value(he){N.selected=he}})}};pe(E,p=>{N.visibility===M.shared&&p(me)})}g(D);var n=T(D,2),r=O(n);qe(r);var A,x=T(r),Ie=O(x);kt(Ie,{"aria-hidden":"true"}),g(x),g(n),It(2),g(k);var Z=T(k,2);Q(Z,()=>({class:"close",...I()}),void 0,void 0,"svelte-1r4q63y");var we=O(Z);vt(we,{}),g(Z),Y(Z,p=>z?.(p)),g(i),Y(i,p=>K?.(p)),g($),Y($,p=>te?.(p)),Fe(()=>{ie!==(ie=M.private)&&(G.value=(G.__value=M.private)??""),de!==(de=M.shared)&&(B.value=(B.__value=M.shared)??""),A!==(A=M.public)&&(r.value=(r.__value=M.public)??"")}),Ct("submit",k,ce),ot(R,[],G,()=>(M.private,N.visibility),p=>N.visibility=p),ot(R,[],B,()=>(M.shared,N.visibility),p=>N.visibility=p),ot(R,[],r,()=>(M.public,N.visibility),p=>N.visibility=p),W(C,$)};pe(J,C=>{o()&&C(P)})}W(y,ve),ge(),s()}function ta(y,e){be(e,!0);const[t,s]=Le(),o=()=>f(d,"$resource",t),m=()=>f(rt,"$session",t),d=pt(e.uri);let c=We(void 0);Oe(()=>{o().getWac().then(I=>{if(I.isError)throw I;ke(c,I,!0)})});const{getResource:_,getSubject:ee}=Mt(),V=async I=>{if(o()?.type!=="SolidLeaf")throw new Error("not a leaf");if(!v(c))throw new Error;let R=JSON.parse(JSON.stringify(v(c).wacRule));if(I===void 0){const L=await mn(o(),{fetch:m().fetch});if(L.isError)throw L;const z=L.wacUri;await _(z).delete()}else await o().setWac(I);const F=await o().getWac({ignoreCache:!0});if(F.isError)throw F;ke(c,F,!0);const te=F.wacRule,H=te.public.read?"public":Object.entries(te.agent).some(([L,z])=>L!==m().info.webId&&z.read)?"shared":"private";Ve({data:{title:"Update successful",description:`Access was updated to ${H}`,type:He.success}}),R.public.read!==te.public.read&&Ve({data:{title:"TODO Notification successful",description:"Public geoindex was notified",type:He.success}});const K=Object.keys(te.agent),ne=Object.keys(R.agent);for(let L of K)ne.includes(L)||Ve({data:{title:"TODO Notification successful",description:`${ee(Me,L)?.name} was notified`,type:He.success}})};{let I=fe(()=>v(c)?.wacRule);ea(y,{get wac(){return v(I)},get self(){return m().info.webId},onchangewac:V})}ge(),s()}var na=ae('<img alt="" width="1rem" height="1rem"/>'),aa=ae('<li><div><span class="font-medium"><!> </span></div></li>'),ra=ae("<li>No results found</li>"),sa=ae("<ul></ul>"),ia=ae('<div><div><div class="selected-topics svelte-16y20vs"></div> <input/></div></div> <!>',1);function oa(y,e){be(e,!0);const[t,s]=Le(),o=()=>f(ne,"$inputValue",t),m=()=>f(K,"$open",t),d=()=>f(z,"$selected",t),c=()=>f(L,"$touchedInput",t),_=()=>f(te,"$input",t),ee=()=>f(F,"$menu",t),V=()=>f(H,"$option",t);let I=St(e,"value",15),R=We(Ke([]));const{elements:{menu:F,input:te,option:H},states:{open:K,inputValue:ne,touchedInput:L,selected:z},helpers:{isSelected:le,isHighlighted:M}}=Wt({multiple:!0,onSelectedChange:i=>{const w=i.next?.map(u=>u.value)??[];return ke(R,w,!0),I(w),Pe(ne,""),Pe(K,!1),i.next}});Oe(()=>{I().length!==d()?.length&&Pe(z,I().map(i=>({value:i,label:""})))});let re;const N=i=>{clearTimeout(re),re=setTimeout(i,450)};let j=We(Ke([])),ce=We("");Oe(()=>{const i=o();c()?N(()=>{ke(ce,i,!0)}):ke(ce,i,!0)}),Oe(()=>{In(v(ce),"en").then(i=>{ke(j,i,!0)})});let ve=fe(()=>v(j).filter(i=>i.label?.toLowerCase().includes(o().toLowerCase())||i.aliases.some(w=>w.toLowerCase().includes(o().toLowerCase()))));const a=i=>{console.log(i.uri,"****"),I(I().filter(w=>w!==i.uri)),I(I())};var S=ia(),l=_e(S),J=O(l),P=O(J);ze(P,20,()=>v(R),i=>i,(i,w)=>{xn(i,{get uri(){return w},onClickRemove:a})}),g(P);var C=T(P,2);qe(C),Q(C,()=>({..._(),disabled:e.disabled||_().disabled,placeholder:"Search topics"}),void 0,void 0,"svelte-16y20vs"),Y(C,i=>te?.(i)),g(J),g(l);var $=T(l,2);{var U=i=>{var w=sa();Q(w,()=>({class:"menu",...ee()}),void 0,void 0,"svelte-16y20vs"),ze(w,21,()=>v(ve),u=>u.id,(u,k)=>{var q=aa();Q(q,B=>({...B}),[()=>V()({value:v(k).uri,label:v(k).label})],void 0,"svelte-16y20vs");var G=O(q),ie=O(G),X=O(ie);{var h=B=>{var de=na();Fe(()=>Ft(de,"src",v(k).image)),W(B,de)};pe(X,B=>{v(k).image&&B(h)})}var D=T(X);g(ie),g(G),g(q),Y(q,B=>H?.(B)),Fe(()=>et(D,` ${v(k).label??""}
            ${v(k).image??""} (${v(k).id??""})`)),W(u,q)},u=>{var k=ra();W(u,k)}),g(w),Y(w,u=>F?.(u)),Nt(3,w,()=>Dt,()=>({duration:150,y:-5})),W(i,w)};pe($,i=>{m()&&i(U)})}W(y,S),ge(),s()}const la=async(y,e,t,s)=>{const{name:o}=e.place;if(globalThis.confirm(`Do you really want to delete place ${o} (${e.place["@id"]})?`)){const d=t.getResource(e.place["@id"]);if(d.isError)throw d;const c=await hn(d,{fetch:s().fetch,dataset:t});c.isError?Ve({data:{type:He.error,title:"Deletion failed",description:c.name}}):Ve({data:{type:He.success,title:"Deletion successful",description:`Deleted place ${o}`}})}};var da=ae('<div><div></div> <div><h2>Update Place</h2> <p></p> <form class="svelte-5hf8eu"><div class="field svelte-5hf8eu"><label for="name">Name</label> <input id="name" type="text" name="name" placeholder="name"/></div> <div class="field svelte-5hf8eu"><label for="description">Description</label> <textarea id="description" name="description" placeholder="description"></textarea></div> <!> <button type="submit">Update place</button></form> <button><!></button></div></div>'),ua=ae('<div class="controls svelte-5hf8eu"><!> <button><!></button> <button aria-label="Delete place"><!></button></div> <!>',1);function ca(y,e){be(e,!0);const[t,s]=Le(),o=()=>f(N,"$open",t),m=()=>f(rt,"$session",t),d=()=>f(K,"$trigger",t),c=()=>f(ne,"$portalled",t),_=()=>f(L,"$overlay",t),ee=()=>f(z,"$content",t),V=()=>f(le,"$title",t),I=()=>f(M,"$description",t),R=()=>f(re,"$close",t),{changeData:F,commitData:te,dataset:H}=Mt(),{elements:{trigger:K,portalled:ne,overlay:L,content:z,title:le,description:M,close:re},states:{open:N}}=Vt(),j=Ke({name:e.place.name,description:e.place.description,latitude:e.place.geo.latitude,longitude:e.place.geo.longitude,topics:e.place.topic?.map(i=>i["@id"])??[]}),ce=async i=>{i.preventDefault();const{name:w}=e.place,u=H.getResource(e.place["@id"]);if(u.isError)throw u;const k=F(e.place,u);k.name=j.name,k.description=j.description,k.topic=_n(...j.topics.map(G=>({"@id":G})));const q=await te(k);if(q.isError)throw q;Pe(N,!1),Ve({data:{title:"Update successful",description:`Updated place ${w}`,type:He.success}})};var ve=ua(),a=_e(ve),S=O(a);ta(S,{get uri(){return e.place["@id"]}});var l=T(S,2);Q(l,()=>({"aria-label":"Edit place",...d()}),void 0,void 0,"svelte-5hf8eu");var J=O(l);Wn(J,{"aria-hidden":"true"}),g(l),Y(l,i=>K?.(i));var P=T(l,2);P.__click=[la,e,H,m];var C=O(P);Vn(C,{"aria-hidden":"true"}),g(P),g(a);var $=T(a,2);{var U=i=>{var w=da();Q(w,()=>({...c()}),void 0,void 0,"svelte-5hf8eu");var u=O(w);Q(u,()=>({class:"overlay",..._()}),void 0,void 0,"svelte-5hf8eu"),Y(u,E=>L?.(E));var k=T(u,2);Q(k,()=>({class:"content",...ee()}),void 0,void 0,"svelte-5hf8eu");var q=O(k);Q(q,()=>({class:"title",...V()}),void 0,void 0,"svelte-5hf8eu"),Y(q,E=>le?.(E));var G=T(q,2);Q(G,()=>({...I()}),void 0,void 0,"svelte-5hf8eu"),Y(G,E=>M?.(E));var ie=T(G,2),X=O(ie),h=T(O(X),2);qe(h),g(X);var D=T(X,2),B=T(O(D),2);Ut(B),g(D);var de=T(D,2);oa(de,{get value(){return j.topics},set value(E){j.topics=E}}),It(2),g(ie);var ue=T(ie,2);Q(ue,()=>({class:"close",...R()}),void 0,void 0,"svelte-5hf8eu");var se=O(ue);vt(se,{}),g(ue),Y(ue,E=>re?.(E)),g(k),Y(k,E=>z?.(E)),g(w),Y(w,E=>ne?.(E)),Ct("submit",ie,ce),$t(h,()=>j.name,E=>j.name=E),$t(B,()=>j.description,E=>j.description=E),W(i,w)};pe($,i=>{o()&&i(U)})}W(y,ve),ge(),s()}xt(["click"]);var va=ae("<li><!></li>"),fa=ae('<ul data-testid="place-list"></ul>');function xa(y,e){be(e,!0);const[t,s]=Le(),o=()=>f(rt,"$session",t),m=()=>f(d,"$places",t);Oe(()=>{o().info.webId&&kn(o().info.webId,o().fetch).then(()=>{console.log("query run and finished")})});const d=yn(Sn,En.type,On.Place);var c=fa();ze(c,5,m,_=>_["@id"],(_,ee)=>{var V=va(),I=O(V);Cn(I,{get place(){return v(ee)},children:(R,F)=>{ca(R,{get place(){return v(ee)}})},$$slots:{default:!0}}),g(V),W(_,V)}),g(c),W(y,c),ge(),s()}export{xa as component};
