import"../chunks/DsnmJJEf.js";import"../chunks/B7vqZ2HL.js";import{F as E,f as G,G as J,H as L,g as t,a as R,I as U,J as y,K as s,L as n,x as k,M as b,y as z}from"../chunks/BIIsVck-.js";import{e as F,a as H,r as K}from"../chunks/Sv6Vf9Pg.js";import{b as p,r as f}from"../chunks/CLqYpC2G.js";import{i as M}from"../chunks/_kFuWWVx.js";import{s as N,a as O}from"../chunks/gbVgNTor.js";import{g as T}from"../chunks/DaOaIhhL.js";import{u as j}from"../chunks/DNHB5EVq.js";import{s as B}from"../chunks/BdPywkCT.js";import{s as x}from"../chunks/Ai-kyT4T.js";import{P as Q}from"../chunks/BzEzGBMK.js";var V=G('<form class="svelte-uz3xhk"><input type="text" placeholder="name" required/> <textarea placeholder="description" name="description"></textarea> <input type="number" step="any" id="latitude" name="latitude" placeholder="latitude" required/> <input type="number" step="any" name="longitude" placeholder="longitude" required/> <input type="submit" value="Add place"/></form> <pre> </pre>',1);function le($,D){E(D,!1);const[w,I]=N(),g=()=>O(B,"$storages",w),h={name:"",description:"",latitude:null,longitude:null};let e=k(h);const{createData:q,commitData:A}=j(),C=async a=>{a.preventDefault();const c=await g()[0].createChildIfAbsent("places/");if(c.isError)throw c;const o=await c.resource.createChildIfAbsent(`place-${crypto.randomUUID()}.ttl`);if(o.isError)throw o;const r=q(Q,o.uri+"#place",o.resource);r.type=x({"@id":"Place"}),r.geo={type:x({"@id":"GeoCoordinates"}),latitude:t(e).latitude,longitude:t(e).longitude},r.name=t(e).name,t(e).description&&(r.description=t(e).description),await A(r),z(e,h),T("list")};M();var v=V(),i=J(v),l=y(i);f(l);var u=s(l,2);K(u);var m=s(u,2);f(m);var d=s(m,2);f(d);var P=s(d,2);b(i);var _=s(i,2),S=y(_,!0);b(_),L(a=>{P.disabled=g().length===0,H(S,a)},[()=>JSON.stringify(t(e),null,2)]),F("submit",i,C),p(l,()=>t(e).name,a=>n(e,t(e).name=a)),p(u,()=>t(e).description,a=>n(e,t(e).description=a)),p(m,()=>t(e).latitude,a=>n(e,t(e).latitude=a)),p(d,()=>t(e).longitude,a=>n(e,t(e).longitude=a)),R($,v),U(),I()}export{le as component};
