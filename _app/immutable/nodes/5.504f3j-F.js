import"../chunks/DsnmJJEf.js";import{as as tt,ai as pe,at as Ce,aj as ye,_ as je,a as U,al as be,n as dt,av as Ft,ak as Ye,aq as st,a5 as kt,b as Fe,$ as He,f as ce,am as k,g as _,an as C,ap as O,au as fe}from"../chunks/CVXStvyL.js";import{e as it}from"../chunks/C4xM10tr.js";import{a as g,s as Me,b as Ve}from"../chunks/DCLxvnlw.js";import{w as Ae,t as qe,g as Mt,v as Wt,c as Je,a as ot,e as It,f as Lt,r as qt}from"../chunks/BXlc4ceW.js";import{i as we}from"../chunks/Cgv_sWxw.js";import{i as he,g as Ht,a as xt,b as Vt,m as ee,c as ve,w as lt,o as ct,t as Qe,d as Xe,e as Be,f as ft,h as Pt,j as Bt,k as Ut,l as We,n as jt,s as Jt,p as Te,q as u,r as bt,u as Le,v as nt,F as Kt,x as gt,y as zt,z as Gt,A as Yt,B as Qt,C as mt,D as ut,E as $e,G as Xt,H as St,I as Se,J as Ze,K as Zt,L as en,M as tn,N as nn,O as At,P as an,Q as rn,R as ht,S as sn,T as on,U as ln,V as cn,W as un,X as yt,Y as Ke,Z as Re,_ as z,$ as dn,a0 as fn,a1 as vn,a2 as Tt,a3 as De,a4 as Ne}from"../chunks/C6ki8H-o.js";import{r as Ue,a as G,c as at,b as _t}from"../chunks/q_I3TdM-.js";import{h as vt,i as Ct,j as pn,k as wt,b as et,l as bn,u as Rt,m as gn,a as mn}from"../chunks/CJBtr1aG.js";import{s as ze,r as Ge,p as hn}from"../chunks/BwakM5-C.js";import{f as yn,a as _n,q as wn,r as $n,s as En}from"../chunks/DLO6Me4C.js";import{P as On}from"../chunks/CWTzAdsd.js";import{P as kn}from"../chunks/BzEzGBMK.js";function rt(b){return Array.from(b.querySelectorAll('[role="option"]:not([data-disabled])')).filter(e=>he(e))}function In(b){return e=>{const n=e.target,s=Ht(b);if(!s||!xt(n))return!1;const o=s.id;return!!(Vt(n)&&o===n.htmlFor||n.closest(`label[for="${o}"]`))}}function xn(){return{elements:{root:ee("label",{action:e=>({destroy:ve(e,"mousedown",s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})})})}}}const Pn=[u.ARROW_LEFT,u.ESCAPE,u.ARROW_RIGHT,u.SHIFT,u.CAPS_LOCK,u.CONTROL,u.ALT,u.META,u.ENTER,u.F1,u.F2,u.F3,u.F4,u.F5,u.F6,u.F7,u.F8,u.F9,u.F10,u.F11,u.F12],Sn={positioning:{placement:"bottom",sameWidth:!0},scrollAlignment:"nearest",loop:!0,defaultOpen:!1,closeOnOutsideClick:!0,preventScroll:!0,escapeBehavior:"close",forceVisible:!1,portal:"body",builder:"listbox",disabled:!1,required:!1,name:void 0,typeahead:!0,highlightOnHover:!0,onOutsideClick:void 0,preventTextSelectionOverflow:!0,rootElement:void 0},An=["trigger","menu","label"];function Tn(b){const e={...Sn,...b},n=lt(Ae(null)),s=lt(Ae(null)),o=e.selected??Ae(e.defaultSelected),v=ct(o,e?.onSelectedChange),l=qe(s,t=>t?p(t):void 0),f=e.open??Ae(e.defaultOpen),h=ct(f,e?.onOpenChange),te=Qe({...Xe(e,"open","defaultOpen","builder","ids"),multiple:e.multiple??!1}),{scrollAlignment:j,loop:L,closeOnOutsideClick:N,escapeBehavior:R,preventScroll:X,portal:F,forceVisible:Y,positioning:Z,multiple:A,arrowSize:J,disabled:ie,required:x,typeahead:ne,name:P,highlightOnHover:Q,onOutsideClick:Ee,preventTextSelectionOverflow:ge,rootElement:a}=te,I=a.get();Be&&I===void 0?a.set(document):b?.portal===void 0&&F.set(I);const{name:i,selector:q}=ft(e.builder),S=Qe({...Pt(An),...e.ids}),{handleTypeaheadSearch:E}=Bt({onMatch:t=>{s.set(t),t.scrollIntoView({block:j.get()})},getCurrentItem(){return s.get()}});function p(t){const r=t.getAttribute("data-value"),w=t.getAttribute("data-label"),$=t.hasAttribute("data-disabled");return{value:r&&JSON.parse(r),label:w??t.textContent??void 0,disabled:!!$}}const M=t=>{v.update(r=>{if(A.get()){const $=Array.isArray(r)?[...r]:[];return an(t,$,(Oe,B)=>We(Oe.value,B.value))}return t})};function H(t){const r=p(t);M(r)}async function V(){h.set(!0),await tt();const t=Le(S.menu.get(),a.get());if(!he(t))return;const r=t.querySelector("[aria-selected=true]");he(r)&&s.set(r)}function y(){h.set(!1),s.set(null)}const T=Ut({open:h,forceVisible:Y,activeTrigger:n}),K=qe([v],([t])=>r=>Array.isArray(t)?t.some(w=>We(w.value,r)):jt(r)?We(t?.value,Jt(r,void 0)):We(t?.value,r)),ae=qe([l],([t])=>r=>We(t?.value,r)),le=ee(i("trigger"),{stores:[h,s,ie,S.menu,S.trigger,S.label],returned:([t,r,w,$,Oe,B])=>({"aria-activedescendant":r?.id,"aria-autocomplete":"list","aria-controls":$,"aria-expanded":t,"aria-labelledby":B,"data-state":t?"open":"closed",id:Oe,role:"combobox",disabled:mt(w),type:e.builder==="select"?"button":void 0}),action:t=>{n.set(t);const r=ut(t),w=Te(ve(t,"click",()=>{t.focus(),h.get()?y():V()}),ve(t,"keydown",$=>{if(!h.get()){if(Pn.includes($.key)||$.key===u.TAB||$.key===u.BACKSPACE&&r&&t.value===""||$.key===u.SPACE&&bt(t))return;V(),tt().then(()=>{if(v.get())return;const _e=Le(S.menu.get(),a.get());if(!he(_e))return;const c=Array.from(_e.querySelectorAll(`${q("item")}:not([data-disabled]):not([data-hidden])`)).filter(ke=>he(ke));c.length&&($.key===u.ARROW_DOWN?(s.set(c[0]),c[0].scrollIntoView({block:j.get()})):$.key===u.ARROW_UP&&(s.set(nt(c)),nt(c).scrollIntoView({block:j.get()})))})}if($.key===u.TAB){y();return}if($.key===u.ENTER&&!$.isComposing||$.key===u.SPACE&&bt(t)){$.preventDefault();const B=s.get();B&&H(B),A.get()||y()}if($.key===u.ARROW_UP&&$.altKey&&y(),Kt.includes($.key)){$.preventDefault();const B=Le(S.menu.get(),a.get());if(!he(B))return;const _e=rt(B);if(!_e.length)return;const c=_e.filter(pt=>!gt(pt)&&pt.dataset.hidden===void 0),ke=s.get(),de=ke?c.indexOf(ke):-1,Ie=L.get(),Nt=j.get();let xe;switch($.key){case u.ARROW_DOWN:xe=Qt(c,de,Ie);break;case u.ARROW_UP:xe=Yt(c,de,Ie);break;case u.PAGE_DOWN:xe=Gt(c,de,10,Ie);break;case u.PAGE_UP:xe=zt(c,de,10,Ie);break;case u.HOME:xe=c[0];break;case u.END:xe=nt(c);break;default:return}s.set(xe),xe?.scrollIntoView({block:Nt})}else if(ne.get()){const B=Le(S.menu.get(),a.get());if(!he(B))return;E($.key,rt(B))}}));return{destroy(){n.set(null),w()}}}}),d=ee(i("menu"),{stores:[T,S.menu],returned:([t,r])=>({hidden:t?void 0:!0,id:r,role:"listbox",style:t?void 0:Ze({display:"none"})}),action:t=>{let r=Se;const w=Te($e([T,F,N,Z,n],([$,Oe,B,_e,c])=>{r(),!(!$||!c)&&tt().then(()=>{r();const ke=In(S.trigger.get());r=Xt(t,{anchorElement:c,open:h,options:{floating:_e,focusTrap:null,modal:{closeOnInteractOutside:B,onClose:y,shouldCloseOnInteractOutside:de=>{if(Ee.get()?.(de),de.defaultPrevented)return!1;const Ie=de.target;return!(!xt(Ie)||Ie===c||c.contains(Ie)||ke(de))}},escapeKeydown:{handler:y,behaviorType:R},portal:St(t,Oe),preventTextSelectionOverflow:{enabled:ge}}}).destroy})}));return{destroy:()=>{w(),r()}}}}),{elements:{root:D}}=xn(),{action:re}=Mt(D),oe=ee(i("label"),{stores:[S.label,S.trigger],returned:([t,r])=>({id:t,for:r}),action:re}),se=ee(i("option"),{stores:[K],returned:([t])=>r=>{const w=t(r.value);return{"data-value":JSON.stringify(r.value),"data-label":r.label,"data-disabled":mt(r.disabled),"aria-disabled":r.disabled?!0:void 0,"aria-selected":w,"data-selected":w?"":void 0,id:Zt(),role:"option"}},action:t=>({destroy:Te(ve(t,"click",w=>{if(gt(t)){w.preventDefault();return}H(t),A.get()||y()}),$e(Q,w=>w?Te(ve(t,"mouseover",()=>{s.set(t)}),ve(t,"mouseleave",()=>{s.set(null)})):void 0))})}),W=ee(i("group"),{returned:()=>t=>({role:"group","aria-labelledby":t})}),m=ee(i("group-label"),{returned:()=>t=>({id:t})}),ue=en({value:qe([v],([t])=>{const r=Array.isArray(t)?t.map(w=>w.value):t?.value;return typeof r=="string"?r:JSON.stringify(r)}),name:Wt(P),required:x,prefix:e.builder}),me=ee(i("arrow"),{stores:J,returned:t=>({"data-arrow":!0,style:Ze({position:"absolute",width:`var(--arrow-size, ${t}px)`,height:`var(--arrow-size, ${t}px)`})})});return $e([s],([t])=>{if(!Be)return;const r=Le(S.menu.get(),a.get());he(r)&&rt(r).forEach(w=>{w===t?tn(w):nn(w)})}),$e([h,X],([t,r])=>{if(!(!Be||!t||!r))return At()}),{ids:S,elements:{trigger:le,group:W,option:se,menu:d,groupLabel:m,label:oe,hiddenInput:ue,arrow:me},states:{open:h,selected:v,highlighted:l,highlightedItem:s},helpers:{isSelected:K,isHighlighted:ae,closeMenu:y},options:te}}const{name:Cn}=ft("combobox");function Rn(b){const e=Tn({...b,builder:"combobox",typeahead:!1}),n=Ae(""),s=Ae(!1),o=ee(Cn("input"),{stores:[e.elements.trigger,n],returned:([v,l])=>({...Xe(v,"action"),role:"combobox",value:l,autocomplete:"off"}),action:v=>{const l=Te(ve(v,"input",h=>{!ut(h.target)&&!ht(h.target)||s.set(!0)}),rn(v,"input",h=>{ut(h.target)&&n.set(h.target.value),ht(h.target)&&n.set(h.target.innerText)})),{destroy:f}=e.elements.trigger(v);return{destroy(){f?.(),l()}}}});return $e(e.states.open,v=>{v||s.set(!1)}),{...e,elements:{...Xe(e.elements,"trigger"),input:o},states:{...e.states,touchedInput:s,inputValue:n}}}const{name:Pe}=ft("dialog"),Dn={preventScroll:!0,escapeBehavior:"close",closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:"body",forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},Nn=["content","title","description"];function Dt(b){const e={...Dn,...b},n=Qe(Xe(e,"ids")),{preventScroll:s,escapeBehavior:o,closeOnOutsideClick:v,role:l,portal:f,forceVisible:h,openFocus:te,closeFocus:j,onOutsideClick:L}=n,N=lt.writable(null),R=Qe({...Pt(Nn),...e.ids}),X=e.open??Ae(e.defaultOpen),F=ct(X,e?.onOpenChange),Y=qe([F,h],([a,I])=>a||I);let Z=Se;function A(a){const I=a.currentTarget,i=a.currentTarget;!he(I)||!he(i)||(F.set(!0),N.set(i))}function J(){F.set(!1)}const ie=ee(Pe("trigger"),{stores:[F],returned:([a])=>({"aria-haspopup":"dialog","aria-expanded":a,type:"button"}),action:a=>({destroy:Te(ve(a,"click",i=>{A(i)}),ve(a,"keydown",i=>{i.key!==u.ENTER&&i.key!==u.SPACE||(i.preventDefault(),A(i))}))})}),x=ee(Pe("overlay"),{stores:[Y,F],returned:([a,I])=>({hidden:a?void 0:!0,tabindex:-1,style:a?void 0:Ze({display:"none"}),"aria-hidden":!0,"data-state":I?"open":"closed"})}),ne=ee(Pe("content"),{stores:[Y,R.content,R.description,R.title,F],returned:([a,I,i,q,S])=>({id:I,role:l.get(),"aria-describedby":i,"aria-labelledby":q,"aria-modal":a?"true":void 0,"data-state":S?"open":"closed",tabindex:-1,hidden:a?void 0:!0,style:a?void 0:Ze({display:"none"})}),action:a=>{let I=Se,i=Se,q=Se;const S=$e([Y,v],([E,p])=>{i(),I(),q(),E&&(i=on(a,{closeOnInteractOutside:p,onClose:J,shouldCloseOnInteractOutside(M){return L.get()?.(M),!M.defaultPrevented}}).destroy,I=ln(a,{handler:J,behaviorType:o}).destroy,q=cn(a,{fallbackFocus:a}).destroy)});return{destroy:()=>{Z(),S(),i(),I(),q()}}}}),P=ee(Pe("portalled"),{stores:f,returned:a=>({"data-portal":sn(a)}),action:a=>{const I=$e([f],([i])=>{if(i===null)return Se;const q=St(a,i);return q===null?Se:un(a,q).destroy});return{destroy(){I()}}}}),Q=ee(Pe("title"),{stores:[R.title],returned:([a])=>({id:a})}),Ee=ee(Pe("description"),{stores:[R.description],returned:([a])=>({id:a})}),ge=ee(Pe("close"),{returned:()=>({type:"button"}),action:a=>({destroy:Te(ve(a,"click",()=>{J()}),ve(a,"keydown",i=>{i.key!==u.SPACE&&i.key!==u.ENTER||(i.preventDefault(),J())}))})});return $e([F,s],([a,I])=>{if(Be){if(I&&a&&(Z=At()),a){const i=document.getElementById(R.content.get());yt({prop:te.get(),defaultEl:i})}return()=>{h.get()||Z()}}}),$e(F,a=>{!Be||a||yt({prop:j.get(),defaultEl:N.get()})},{skipFirstRun:!0}),{ids:R,elements:{content:ne,trigger:ie,title:Q,description:Ee,overlay:x,close:ge,portalled:P},states:{open:F},options:n}}function $t(b,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=Ge(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"}],["circle",{cx:"12",cy:"12",r:"10"}]];Ke(b,ze({name:"earth"},()=>n,{get iconNode(){return s},children:(o,v)=>{var l=Ce(),f=ye(l);Je(f,()=>e.children??je),U(o,l)},$$slots:{default:!0}})),be()}function Et(b,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=Ge(e,["$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"16",r:"1"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3"}]];Ke(b,ze({name:"lock-keyhole"},()=>n,{get iconNode(){return s},children:(o,v)=>{var l=Ce(),f=ye(l);Je(f,()=>e.children??je),U(o,l)},$$slots:{default:!0}})),be()}function Fn(b,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=Ge(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];Ke(b,ze({name:"pencil"},()=>n,{get iconNode(){return s},children:(o,v)=>{var l=Ce(),f=ye(l);Je(f,()=>e.children??je),U(o,l)},$$slots:{default:!0}})),be()}function Mn(b,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=Ge(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];Ke(b,ze({name:"trash-2"},()=>n,{get iconNode(){return s},children:(o,v)=>{var l=Ce(),f=ye(l);Je(f,()=>e.children??je),U(o,l)},$$slots:{default:!0}})),be()}function Ot(b,e){pe(e,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=Ge(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M18 21a8 8 0 0 0-16 0"}],["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"}]];Ke(b,ze({name:"users-round"},()=>n,{get iconNode(){return s},children:(o,v)=>{var l=Ce(),f=ye(l);Je(f,()=>e.children??je),U(o,l)},$$slots:{default:!0}})),be()}function Wn(b,e){pe(e,!0);const[n,s]=Me(),o=()=>g(v,"$person",n);vt(e.webId);let v=Ct(Re,e.webId);dt();var l=Ft();Ye(()=>ot(l,o().name)),U(b,l),be(),s()}var Ln=ce("<li> </li>"),qn=ce('<li><div class="pl-4"><span class="font-medium"> </span></div></li>'),Hn=ce(`<li class="relative cursor-pointer rounded-md py-1 pl-8 pr-4
        data-[highlighted]:bg-magnum-100 data-[highlighted]:text-magnum-700">No results found</li>`),Vn=ce("<ul><!>  <!></ul>"),Bn=ce('<div class="flex flex-col gap-1"><div class="relative"><!> <input/></div></div> <!>',1);function Un(b,e){pe(e,!0);const[n,s]=Me(),o=()=>g(ne,"$inputValue",n),v=()=>g(x,"$open",n),l=()=>g(Q,"$selected",n),f=()=>g(et,"$session",n),h=()=>g(P,"$touchedInput",n),te=()=>g(i,"$friends",n),j=()=>g(J,"$input",n),L=()=>g(A,"$menu",n),N=()=>g(_(p),"$personByWebId",n),R=()=>g(_(E),"$personResourceResult",n),X=()=>g(ie,"$option",n),F=()=>g(_(M),"$matched",n);let Y=hn(e,"value",15),Z=st(kt([]));const{elements:{menu:A,input:J,option:ie},states:{open:x,inputValue:ne,touchedInput:P,selected:Q},helpers:{isSelected:Ee,isHighlighted:ge}}=Rn({multiple:!0,onSelectedChange:d=>{const D=d.next?.map(re=>re.value)??[];return He(Z,D,!0),Y(D),Ve(ne,""),Ve(x,!1),d.next}});Fe(()=>{Y().length!==l()?.length&&Ve(Q,Y().map(d=>({value:d,label:""})))});let a;const I=d=>{clearTimeout(a),a=setTimeout(d,450)};pn(Re,f().info.webId,f().info.webId,{name:!0,knows:{name:!0}});let i=wt(Re,f().info.webId,yn.knows),q=st("");Fe(()=>{const d=o();h()?I(()=>{He(q,d,!0)}):He(q,d,!0)});let S=fe(()=>te().filter(d=>d.name?.toLowerCase().includes(o().toLowerCase())||d["@id"]?.toLowerCase().includes(o().toLowerCase()))),E=fe(()=>vt(_(q))),p=fe(()=>Ct(Re,_(q))),M=fe(()=>wt(Re,_(q),_n.oidcIssuer));var H=Bn(),V=ye(H),y=k(V),T=k(y);it(T,16,()=>_(Z),d=>d,(d,D)=>{Wn(d,{get webId(){return D}})});var K=C(T,2);Ue(K),G(K,()=>({...j(),disabled:e.disabled||j().disabled,placeholder:"Name or webId"}),void 0,void 0,"svelte-1u6t5ph"),z(K,d=>J?.(d)),O(y),O(V);var ae=C(V,2);{var le=d=>{var D=Vn();G(D,()=>({class:"menu",...L()}),void 0,void 0,"svelte-1u6t5ph");var re=k(D);{var oe=W=>{var m=Ln();G(m,me=>({...me}),[()=>X()({value:N()["@id"],label:N().name??N()["@id"],disabled:R().isPresent()!==!0||F().size===0})],void 0,"svelte-1u6t5ph");var ue=k(m,!0);O(m),z(m,me=>ie?.(me)),Ye(()=>ot(ue,N().name??N()["@id"])),U(W,m)};we(re,W=>{N()?.["@id"]&&!R()?.isError&&W(oe)})}var se=C(re,2);it(se,17,()=>_(S),W=>W["@id"],(W,m)=>{var ue=qn();G(ue,w=>({...w}),[()=>X()({value:_(m)["@id"],label:_(m).name??_(m)["@id"]})],void 0,"svelte-1u6t5ph");var me=k(ue),t=k(me),r=k(t,!0);O(t),O(me),O(ue),z(ue,w=>ie?.(w)),Ye(()=>ot(r,_(m).name??_(m)["@id"])),U(W,ue)},W=>{var m=Hn();U(W,m)}),O(D),z(D,W=>A?.(W)),dn(3,D,()=>fn,()=>({duration:150,y:-5})),U(d,D)};we(ae,d=>{v()&&d(le)})}U(b,H),be(),s()}var jn=ce("<button><!></button>"),Jn=ce('<div><div></div> <div><h2>Visibility</h2> <p></p> <form class="svelte-1r4q63y"><div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="private"/><label for="private" aria-label="Private"><!></label></div> <div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="shared" aria-label="Shared"/><label for="shared" aria-label="Shared"><!></label> <!></div> <div class="option svelte-1r4q63y"><input type="radio" name="visibility" id="public" aria-label="Public"/><label for="public" aria-label="Public"><!></label></div> <button type="submit">Confirm</button></form> <button><!></button></div></div>'),Kn=ce("<!> <!>",1);function zn(b,e){pe(e,!0);const[n,s]=Me(),o=()=>g(ie,"$open",n),v=()=>g(R,"$trigger",n),l=()=>g(X,"$portalled",n),f=()=>g(F,"$overlay",n),h=()=>g(Y,"$content",n),te=()=>g(Z,"$title",n),j=()=>g(A,"$description",n),L=()=>g(J,"$close",n),N=[],{elements:{trigger:R,portalled:X,overlay:F,content:Y,title:Z,description:A,close:J},states:{open:ie}}=Dt();var x=(E=>(E.private="private",E.shared="shared",E.public="public",E))(x||{});let ne=fe(()=>e.wac?e.wac.public.read?"public":Object.entries(e.wac.agent).some(([E,p])=>E!==e.self&&p.read)?"shared":"private":void 0);const P=kt({visibility:void 0,selected:[]});Fe(()=>{P.visibility=_(ne)});let Q=fe(()=>!!e.wac?.agent[e.self].control);Fe(()=>{if(!e.wac)return;const E=Object.entries(e.wac.agent).filter(([p,M])=>p!==e.self&&M.read===!0).map(([p])=>p);P.selected=E});const Ee=async E=>{if(E.preventDefault(),!e.wac)throw new Error;let p=JSON.parse(JSON.stringify(e.wac));if(P.visibility==="public")p.public.read=!0;else if(P.visibility==="shared"&&P.selected.length>0){p.public.read=!1;for(let M in p.agent)M!==e.self&&(p.agent[M].read=!1);P.selected.forEach(M=>{p.agent[M]??={read:!1,append:!1,write:!1,control:!1},p.agent[M].read=!0})}else p=void 0;await e.onchangewac(p),Ve(ie,!1)};var ge=Kn(),a=ye(ge);{var I=E=>{var p=jn();G(p,()=>({"aria-label":`Privacy and sharing: ${_(ne)}`,...v()}),void 0,void 0,"svelte-1r4q63y");var M=k(p);{var H=y=>{{let T=fe(()=>_(Q)?"green":"black");Et(y,{"aria-hidden":"true",get color(){return _(T)}})}},V=y=>{var T=Ce(),K=ye(T);{var ae=d=>{{let D=fe(()=>_(Q)?"green":"black");Ot(d,{"aria-hidden":"true",get color(){return _(D)}})}},le=d=>{var D=Ce(),re=ye(D);{var oe=se=>{{let W=fe(()=>_(Q)?"green":"black");$t(se,{"aria-hidden":"true",get color(){return _(W)}})}};we(re,se=>{_(ne)===x.public&&se(oe)},!0)}U(d,D)};we(K,d=>{_(ne)===x.shared?d(ae):d(le,!1)},!0)}U(y,T)};we(M,y=>{_(ne)===x.private?y(H):y(V,!1)})}O(p),z(p,y=>R?.(y)),U(E,p)},i=E=>{vn(E,{})};we(a,E=>{e.wac?E(I):E(i,!1)})}var q=C(a,2);{var S=E=>{var p=Jn();G(p,()=>({...l()}),void 0,void 0,"svelte-1r4q63y");var M=k(p);G(M,()=>({class:"overlay",...f()}),void 0,void 0,"svelte-1r4q63y"),z(M,c=>F?.(c));var H=C(M,2);G(H,()=>({class:"content",...h()}),void 0,void 0,"svelte-1r4q63y");var V=k(H);G(V,()=>({class:"title",...te()}),void 0,void 0,"svelte-1r4q63y"),z(V,c=>Z?.(c));var y=C(V,2);G(y,()=>({...j()}),void 0,void 0,"svelte-1r4q63y"),z(y,c=>A?.(c));var T=C(y,2),K=k(T),ae=k(K);Ue(ae);var le,d=C(ae),D=k(d);Et(D,{"aria-hidden":"true"}),O(d),O(K);var re=C(K,2),oe=k(re);Ue(oe);var se,W=C(oe),m=k(W);Ot(m,{"aria-hidden":"true"}),O(W);var ue=C(W,2);{var me=c=>{{let ke=fe(()=>P.visibility!==x.shared);Un(c,{get disabled(){return _(ke)},get value(){return P.selected},set value(de){P.selected=de}})}};we(ue,c=>{P.visibility===x.shared&&c(me)})}O(re);var t=C(re,2),r=k(t);Ue(r);var w,$=C(r),Oe=k($);$t(Oe,{"aria-hidden":"true"}),O($),O(t),dt(2),O(T);var B=C(T,2);G(B,()=>({class:"close",...L()}),void 0,void 0,"svelte-1r4q63y");var _e=k(B);Tt(_e,{}),O(B),z(B,c=>J?.(c)),O(H),z(H,c=>Y?.(c)),O(p),z(p,c=>X?.(c)),Ye(()=>{le!==(le=x.private)&&(ae.value=(ae.__value=x.private)??""),se!==(se=x.shared)&&(oe.value=(oe.__value=x.shared)??""),w!==(w=x.public)&&(r.value=(r.__value=x.public)??"")}),It("submit",T,Ee),at(N,[],ae,()=>(x.private,P.visibility),c=>P.visibility=c),at(N,[],oe,()=>(x.shared,P.visibility),c=>P.visibility=c),at(N,[],r,()=>(x.public,P.visibility),c=>P.visibility=c),U(E,p)};we(q,E=>{o()&&E(S)})}U(b,ge),be(),s()}function Gn(b,e){pe(e,!0);const[n,s]=Me(),o=()=>g(l,"$resource",n),v=()=>g(et,"$session",n),l=vt(e.uri);let f=st(void 0);Fe(()=>{o().getWac().then(L=>{if(L.isError)throw L;He(f,L,!0)})});const{getResource:h,getSubject:te}=Rt(),j=async L=>{if(o()?.type!=="SolidLeaf")throw new Error("not a leaf");if(!_(f))throw new Error;let N=JSON.parse(JSON.stringify(_(f).wacRule));if(L===void 0){const A=await bn(o(),{fetch:v().fetch});if(A.isError)throw A;const J=A.wacUri;await h(J).delete()}else await o().setWac(L);const R=await o().getWac({ignoreCache:!0});if(R.isError)throw R;He(f,R,!0);const X=R.wacRule,F=X.public.read?"public":Object.entries(X.agent).some(([A,J])=>A!==v().info.webId&&J.read)?"shared":"private";De({data:{title:"Update successful",description:`Access was updated to ${F}`,type:Ne.success}}),N.public.read!==X.public.read&&De({data:{title:"TODO Notification successful",description:"Public geoindex was notified",type:Ne.success}});const Y=Object.keys(X.agent),Z=Object.keys(N.agent);for(let A of Y)Z.includes(A)||De({data:{title:"TODO Notification successful",description:`${te(Re,A)?.name} was notified`,type:Ne.success}})};{let L=fe(()=>_(f)?.wacRule);zn(b,{get wac(){return _(L)},get self(){return v().info.webId},onchangewac:j})}be(),s()}const Yn=async(b,e,n,s)=>{const{name:o}=e.place;if(globalThis.confirm(`Do you really want to delete place ${o} (${e.place["@id"]})?`)){const l=n.getResource(e.place["@id"]);if(l.isError)throw l;const f=await gn(l,{fetch:s().fetch,dataset:n});f.isError?De({data:{type:Ne.error,title:"Deletion failed",description:f.name}}):De({data:{type:Ne.success,title:"Deletion successful",description:`Deleted place ${o}`}})}};var Qn=ce('<div><div></div> <div><h2>Update Place</h2> <p></p> <form class="svelte-5hf8eu"><div class="field svelte-5hf8eu"><label for="name">Name</label> <input id="name" type="text" name="name" placeholder="name"/></div> <div class="field svelte-5hf8eu"><label for="description">Description</label> <textarea id="description" name="description" placeholder="description"></textarea></div> <button type="submit">Update place</button></form> <button><!></button></div></div>'),Xn=ce('<div class="controls svelte-5hf8eu"><!> <button><!></button> <button aria-label="Delete place"><!></button></div> <!>',1);function Zn(b,e){pe(e,!0);const[n,s]=Me(),o=()=>g(P,"$open",n),v=()=>g(et,"$session",n),l=()=>g(Y,"$trigger",n),f=()=>g(Z,"$portalled",n),h=()=>g(A,"$overlay",n),te=()=>g(J,"$content",n),j=()=>g(ie,"$title",n),L=()=>g(x,"$description",n),N=()=>g(ne,"$close",n),{changeData:R,commitData:X,dataset:F}=Rt(),{elements:{trigger:Y,portalled:Z,overlay:A,content:J,title:ie,description:x,close:ne},states:{open:P}}=Dt(),Q={name:e.place.name,description:e.place.description,latitude:e.place.geo.latitude,longitude:e.place.geo.longitude},Ee=async H=>{H.preventDefault();const{name:V}=e.place,y=F.getResource(e.place["@id"]);if(y.isError)throw y;const T=R(e.place,y);T.name=Q.name,T.description=Q.description;const K=await X(T);if(K.isError)throw K;Ve(P,!1),De({data:{title:"Update successful",description:`Updated place ${V}`,type:Ne.success}})};var ge=Xn(),a=ye(ge),I=k(a);Gn(I,{get uri(){return e.place["@id"]}});var i=C(I,2);G(i,()=>({"aria-label":"Edit place",...l()}),void 0,void 0,"svelte-5hf8eu");var q=k(i);Fn(q,{"aria-hidden":"true"}),O(i),z(i,H=>Y?.(H));var S=C(i,2);S.__click=[Yn,e,F,v];var E=k(S);Mn(E,{"aria-hidden":"true"}),O(S),O(a);var p=C(a,2);{var M=H=>{var V=Qn();G(V,()=>({...f()}),void 0,void 0,"svelte-5hf8eu");var y=k(V);G(y,()=>({class:"overlay",...h()}),void 0,void 0,"svelte-5hf8eu"),z(y,m=>A?.(m));var T=C(y,2);G(T,()=>({class:"content",...te()}),void 0,void 0,"svelte-5hf8eu");var K=k(T);G(K,()=>({class:"title",...j()}),void 0,void 0,"svelte-5hf8eu"),z(K,m=>ie?.(m));var ae=C(K,2);G(ae,()=>({...L()}),void 0,void 0,"svelte-5hf8eu"),z(ae,m=>x?.(m));var le=C(ae,2),d=k(le),D=C(k(d),2);Ue(D),O(d);var re=C(d,2),oe=C(k(re),2);qt(oe),O(re),dt(2),O(le);var se=C(le,2);G(se,()=>({class:"close",...N()}),void 0,void 0,"svelte-5hf8eu");var W=k(se);Tt(W,{}),O(se),z(se,m=>ne?.(m)),O(T),z(T,m=>J?.(m)),O(V),z(V,m=>Z?.(m)),It("submit",le,Ee),_t(D,()=>Q.name,m=>Q.name=m),_t(oe,()=>Q.description,m=>Q.description=m),U(H,V)};we(p,H=>{o()&&H(M)})}U(b,ge),be(),s()}Lt(["click"]);var ea=ce("<li><!></li>"),ta=ce('<ul data-testid="place-list"></ul>');function ba(b,e){pe(e,!0);const[n,s]=Me(),o=()=>g(et,"$session",n),v=()=>g(l,"$places",n);Fe(()=>{o().info.webId&&wn(o().info.webId,o().fetch).then(()=>{console.log("query run and finished")})});const l=mn(kn,$n.type,En.Place);var f=ta();it(f,5,v,h=>h["@id"],(h,te)=>{var j=ea(),L=k(j);On(L,{get place(){return _(te)},children:(N,R)=>{Zn(N,{get place(){return _(te)}})},$$slots:{default:!0}}),O(j),U(h,j)}),O(f),U(b,f),be(),s()}export{ba as component};
