import{q as de,o as W,aF as Ie,L as K,l as E,ad as De,m as ae,h as D,X as ot,I as ut,J as lt,K as Se,M as N,x as T,ak as ct,ao as ft,s as P,w as ht,aG as $,aH as Y,v as I,aI as we,A as dt,aJ as Ce,ar as Le,ai as Pe,N as ve,y as qe,aK as vt,aL as ee,H as oe,av as q,aM as yt,am as _t,aN as bt,ae as pt,aO as mt,V as Ue,aP as gt,E as St,aQ as wt,at as Ct,F as je,aR as Et,aS as xe,C as Ke,aT as At,aU as Ft,aV as Ot,aW as Tt,aX as kt,aY as Mt,aZ as Rt,a_ as Nt,e as He,G as ye,a$ as It,p as Ge,b0 as Dt,a6 as Lt,a8 as Pt,z as _e,a7 as qt,a as H,b as Qe,ab as V,a4 as B,ac as Ut,b1 as jt,aD as xt,aB as Ve}from"./B8Aoszw1.js";import{j as Kt,k as Ee,l as Ht,n as Gt,f as Qt,p as Vt,q as Bt,t as zt,v as Wt,x as be,c as pe,r as Ae}from"./v_5uegaS.js";import"./DsnmJJEf.js";import{p as R,r as me,s as $t}from"./BBaN-TA8.js";import{t as Yt,c as Jt,s as Xt}from"./CyzmgiJC.js";let L=null;function Fe(e){L=e}function Zt(e,t){return t}function es(e,t,s){for(var r=e.items,i=[],o=t.length,a=0;a<o;a++)bt(t[a].e,i,!0);var n=o>0&&i.length===0&&s!==null;if(n){var l=s.parentNode;pt(l),l.append(s),r.clear(),O(e,t[0].prev,t[o-1].next)}mt(i,()=>{for(var u=0;u<o;u++){var d=t[u];n||(r.delete(d.k),O(e,d.prev,d.next)),q(d.e,!n)}})}function ts(e,t,s,r,i,o=null){var a=e,n={flags:t,items:new Map,first:null},l=(t&Ie)!==0;if(l){var u=e;a=E?K(De(u)):u.appendChild(de())}E&&ae();var d=null,b=!1,w=new Map,S=ot(()=>{var _=s();return Pe(_)?_:_==null?[]:Le(_)}),c,v;function f(){ss(v,c,n,w,a,i,t,r,s),o!==null&&(c.length===0?d?ve(d):d=P(()=>o(a)):d!==null&&qe(d,()=>{d=null}))}W(()=>{v??=Ue,c=D(S);var _=c.length;if(b&&_===0)return;b=_===0;let C=!1;if(E){var p=ut(a)===lt;p!==(_===0)&&(a=Se(),K(a),N(!1),C=!0)}if(E){for(var m=null,g,h=0;h<_;h++){if(T.nodeType===ct&&T.data===ft){a=T,C=!0,N(!1);break}var y=c[h],A=r(y,h);g=ue(T,n,m,null,y,A,h,i,t,s),n.items.set(A,g),m=g}_>0&&K(Se())}if(E)_===0&&o&&(d=P(()=>o(a)));else if(ht()){var k=new Set,G=I;for(h=0;h<_;h+=1){y=c[h],A=r(y,h);var M=n.items.get(A)??w.get(A);M?(t&($|Y))!==0&&Be(M,y,h,t):(g=ue(null,n,null,null,y,A,h,i,t,s,!0),w.set(A,g)),k.add(A)}for(const[F,Q]of n.items)k.has(F)||G.skipped_effects.add(Q.e);G.add_callback(f)}else f();C&&N(!0),D(S)}),E&&(a=T)}function ss(e,t,s,r,i,o,a,n,l){var u=(a&yt)!==0,d=(a&($|Y))!==0,b=t.length,w=s.items,S=s.first,c=S,v,f=null,_,C=[],p=[],m,g,h,y;if(u)for(y=0;y<b;y+=1)m=t[y],g=n(m,y),h=w.get(g),h!==void 0&&(h.a?.measure(),(_??=new Set).add(h));for(y=0;y<b;y+=1){if(m=t[y],g=n(m,y),h=w.get(g),h===void 0){var A=r.get(g);if(A!==void 0){r.delete(g),w.set(g,A);var k=f?f.next:c;O(s,f,A),O(s,A,k),te(A,k,i),f=A}else{var G=c?c.e.nodes_start:i;f=ue(G,s,f,f===null?s.first:f.next,m,g,y,o,a,l)}w.set(g,f),C=[],p=[],c=f.next;continue}if(d&&Be(h,m,y,a),(h.e.f&ee)!==0&&(ve(h.e),u&&(h.a?.unfix(),(_??=new Set).delete(h))),h!==c){if(v!==void 0&&v.has(h)){if(C.length<p.length){var M=p[0],F;f=M.prev;var Q=C[0],X=C[C.length-1];for(F=0;F<C.length;F+=1)te(C[F],M,i);for(F=0;F<p.length;F+=1)v.delete(p[F]);O(s,Q.prev,X.next),O(s,f,Q),O(s,X,M),c=M,f=X,y-=1,C=[],p=[]}else v.delete(h),te(h,c,i),O(s,h.prev,h.next),O(s,h,f===null?s.first:f.next),O(s,f,h),f=h;continue}for(C=[],p=[];c!==null&&c.k!==g;)(c.e.f&ee)===0&&(v??=new Set).add(c),p.push(c),c=c.next;if(c===null)continue;h=c}C.push(h),f=h,c=h.next}if(c!==null||v!==void 0){for(var U=v===void 0?[]:Le(v);c!==null;)(c.e.f&ee)===0&&U.push(c),c=c.next;var Z=U.length;if(Z>0){var nt=(a&Ie)!==0&&b===0?i:null;if(u){for(y=0;y<Z;y+=1)U[y].a?.measure();for(y=0;y<Z;y+=1)U[y].a?.fix()}es(s,U,nt)}}u&&oe(()=>{if(_!==void 0)for(h of _)h.a?.apply()}),e.first=s.first&&s.first.e,e.last=f&&f.e;for(var at of r.values())q(at.e);r.clear()}function Be(e,t,s,r){(r&$)!==0&&we(e.v,t),(r&Y)!==0?we(e.i,s):e.i=s}function ue(e,t,s,r,i,o,a,n,l,u,d){var b=L,w=(l&$)!==0,S=(l&vt)===0,c=w?S?dt(i,!1,!1):Ce(i):i,v=(l&Y)===0?a:Ce(a),f={i:v,v:c,k:o,a:null,e:null,prev:s,next:r};L=f;try{if(e===null){var _=document.createDocumentFragment();_.append(e=de())}return f.e=P(()=>n(e,c,v,u),E),f.e.prev=s&&s.e,f.e.next=r&&r.e,s===null?d||(t.first=f):(s.next=f,s.e.next=f.e),r!==null&&(r.prev=f,r.e.prev=f.e),f}finally{L=b}}function te(e,t,s){for(var r=e.next?e.next.e.nodes_start:s,i=t?t.e.nodes_start:s,o=e.e.nodes_start;o!==null&&o!==r;){var a=_t(o);i.before(o),o=a}}function O(e,t,s){t===null?e.first=s:(t.next=s,t.e.next=s&&s.e),s!==null&&(s.prev=t,s.e.prev=t&&t.e)}function ze(e,t,s,r,i,o){let a=E;E&&ae();var n,l,u=null;E&&T.nodeType===gt&&(u=T,ae());var d=E?T:e,b,w=L;W(()=>{const S=t()||null;var c=s||S==="svg"?wt:null;if(S!==n){var v=L;Fe(w),b&&(S===null?qe(b,()=>{b=null,l=null}):S===l?ve(b):(q(b),Ee(!1))),S&&S!==l&&(b=P(()=>{if(u=E?u:c?document.createElementNS(c,S):document.createElement(S),Ct(u,u),r){E&&Kt(S)&&u.append(document.createComment(""));var f=E?De(u):u.appendChild(de());E&&(f===null?N(!1):K(f)),r(u,f)}Ue.nodes_end=u,d.before(u)})),n=S,n&&(l=n),Ee(!0),Fe(v)}},St),a&&(N(!0),K(d))}function rs(e,t){var s=void 0,r;W(()=>{s!==(s=t())&&(r&&(q(r),r=null),s&&(r=P(()=>{je(()=>s(e))})))})}function se(e,t={},s,r){for(var i in s){var o=s[i];t[i]!==o&&(s[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function is(e,t,s,r){var i=e.__style;if(E||i!==t){var o=Yt(t,r);(!E||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}else r&&(Array.isArray(r)?(se(e,s?.[0],r[0]),se(e,s?.[1],r[1],"important")):se(e,s,r));return r}function le(e,t,s=!1){if(e.multiple){if(t==null)return;if(!Pe(t))return Et();for(var r of e.options)r.selected=t.includes(Oe(r));return}for(r of e.options){var i=Oe(r);if(xe(i,t)){r.selected=!0;return}}(!s||t!==void 0)&&(e.selectedIndex=-1)}function ns(e){var t=new MutationObserver(()=>{le(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ke(()=>{t.disconnect()})}function Oe(e){return"__value"in e?e.__value:e.value}const j=Symbol("class"),x=Symbol("style"),We=Symbol("is custom element"),$e=Symbol("is html");function qs(e){if(E){var t=!1,s=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;z(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var i=e.checked;z(e,"checked",null),e.checked=i}}};e.__on_r=s,Mt(s),zt()}}function as(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function z(e,t,s,r){var i=Ye(e);E&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=s)&&(t==="loading"&&(e[kt]=s),s==null?e.removeAttribute(t):typeof s!="string"&&Je(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function os(e,t,s,r,i=!1){var o=Ye(e),a=o[We],n=!o[$e];let l=E&&a;l&&N(!1);var u=t||{},d=e.tagName==="OPTION";for(var b in t)b in s||(s[b]=null);s.class?s.class=Jt(s.class):(r||s[j])&&(s.class=null),s[x]&&(s.style??=null);var w=Je(e);for(const p in s){let m=s[p];if(d&&p==="value"&&m==null){e.value=e.__value="",u[p]=m;continue}if(p==="class"){var S=e.namespaceURI==="http://www.w3.org/1999/xhtml";Xt(e,S,m,r,t?.[j],s[j]),u[p]=m,u[j]=s[j];continue}if(p==="style"){is(e,m,t?.[x],s[x]),u[p]=m,u[x]=s[x];continue}var c=u[p];if(!(m===c&&!(m===void 0&&e.hasAttribute(p)))){u[p]=m;var v=p[0]+p[1];if(v!=="$$")if(v==="on"){const g={},h="$$"+p;let y=p.slice(2);var f=Wt(y);if(Ht(y)&&(y=y.slice(0,-7),g.capture=!0),!f&&c){if(m!=null)continue;e.removeEventListener(y,u[h],g),u[h]=null}if(m!=null)if(f)e[`__${y}`]=m,Qt([y]);else{let A=function(k){u[p].call(this,k)};u[h]=Gt(y,e,A,g)}else f&&(e[`__${y}`]=void 0)}else if(p==="style")z(e,p,m);else if(p==="autofocus")Vt(e,!!m);else if(!a&&(p==="__value"||p==="value"&&m!=null))e.value=e.__value=m;else if(p==="selected"&&d)as(e,m);else{var _=p;n||(_=Bt(_));var C=_==="defaultValue"||_==="defaultChecked";if(m==null&&!a&&!C)if(o[p]=null,_==="value"||_==="checked"){let g=e;const h=t===void 0;if(_==="value"){let y=g.defaultValue;g.removeAttribute(_),g.defaultValue=y,g.value=g.__value=h?y:null}else{let y=g.defaultChecked;g.removeAttribute(_),g.defaultChecked=y,g.checked=h?y:!1}}else e.removeAttribute(p);else C||w.includes(_)&&(a||typeof m!="string")?e[_]=m:typeof m!="function"&&z(e,_,m)}}}return l&&N(!0),u}function ce(e,t,s=[],r=[],i,o=!1){At(s,r,a=>{var n=void 0,l={},u=e.nodeName==="SELECT",d=!1;if(W(()=>{var w=t(...a.map(D)),S=os(e,n,w,i,o);d&&u&&"value"in w&&le(e,w.value);for(let v of Object.getOwnPropertySymbols(l))w[v]||q(l[v]);for(let v of Object.getOwnPropertySymbols(w)){var c=w[v];v.description===Ft&&(!n||c!==n[v])&&(l[v]&&q(l[v]),l[v]=P(()=>rs(e,()=>c))),S[v]=c}n=S}),u){var b=e;je(()=>{le(b,n.value,!0),ns(b)})}d=!0})}function Ye(e){return e.__attributes??={[We]:e.nodeName.includes("-"),[$e]:e.namespaceURI===Ot}}var Te=new Map;function Je(e){var t=Te.get(e.nodeName);if(t)return t;Te.set(e.nodeName,t=[]);for(var s,r=e,i=Element.prototype;i!==r;){s=Rt(r);for(var o in s)s[o].set&&t.push(o);r=Tt(r)}return t}function Us(e,t,s=t){var r=Nt(),i=new WeakSet;be(e,"input",o=>{var a=o?e.defaultValue:e.value;if(a=ie(e)?ne(a):a,s(a),I!==null&&i.add(I),r&&a!==(a=t())){var n=e.selectionStart,l=e.selectionEnd;e.value=a??"",l!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(l,e.value.length))}}),(E&&e.defaultValue!==e.value||He(t)==null&&e.value)&&(s(ie(e)?ne(e.value):e.value),I!==null&&i.add(I)),ye(()=>{var o=t();if(e===document.activeElement){var a=It??I;if(i.has(a))return}ie(e)&&o===ne(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}const re=new Set;function js(e,t,s,r,i=r){var o=s.getAttribute("type")==="checkbox",a=e;let n=!1;if(t!==null)for(var l of t)a=a[l]??=[];a.push(s),be(s,"change",()=>{var u=s.__value;o&&(u=ke(a,u,s.checked)),i(u)},()=>i(o?[]:null)),ye(()=>{var u=r();if(E&&s.defaultChecked!==s.checked){n=!0;return}o?(u=u||[],s.checked=u.includes(s.__value)):s.checked=xe(s.__value,u)}),Ke(()=>{var u=a.indexOf(s);u!==-1&&a.splice(u,1)}),re.has(a)||(re.add(a),oe(()=>{a.sort((u,d)=>u.compareDocumentPosition(d)===4?-1:1),re.delete(a)})),oe(()=>{if(n){var u;if(o)u=ke(a,u,s.checked);else{var d=a.find(b=>b.checked);u=d?.__value}i(u)}})}function xs(e,t,s=t){be(e,"change",r=>{var i=r?e.defaultChecked:e.checked;s(i)}),(E&&e.defaultChecked!==e.checked||He(t)==null)&&s(e.checked),ye(()=>{var r=t();e.checked=!!r})}function ke(e,t,s){for(var r=new Set,i=0;i<e.length;i+=1)e[i].checked&&r.add(e[i].__value);return s||r.delete(t),Array.from(r)}function ie(e){var t=e.type;return t==="number"||t==="range"}function ne(e){return e===""?null:+e}/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const us={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var ls=Dt("<svg><!><!></svg>");function cs(e,t){Ge(t,!0);const s=R(t,"color",3,"currentColor"),r=R(t,"size",3,24),i=R(t,"strokeWidth",3,2),o=R(t,"absoluteStrokeWidth",3,!1),a=R(t,"iconNode",19,()=>[]),n=me(t,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var l=ls();ce(l,b=>({...us,...n,width:r(),height:r(),stroke:s(),"stroke-width":b,class:["lucide-icon lucide",t.name&&`lucide-${t.name}`,t.class]}),[()=>o()?Number(i())*24/Number(r()):i()]);var u=Lt(l);ts(u,17,a,Zt,(b,w)=>{var S=Ut(()=>jt(D(w),2));let c=()=>D(S)[0],v=()=>D(S)[1];var f=V(),_=B(f);ze(_,c,!0,(C,p)=>{ce(C,()=>({...v()}))}),H(b,f)});var d=Pt(u);pe(d,()=>t.children??_e),qt(l),H(e,l),Qe()}function Ks(e,t){Ge(t,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let s=me(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];cs(e,$t({name:"x"},()=>s,{get iconNode(){return r},children:(i,o)=>{var a=V(),n=B(a);pe(n,()=>t.children??_e),H(i,a)},$$slots:{default:!0}})),Qe()}function Hs(e,t){const s=R(t,"as",3,"button"),r=R(t,"variant",3,"secondary"),i=me(t,["$$slots","$$events","$$legacy","as","variant","class","children"]);var o=V(),a=B(o);ze(a,s,!1,(n,l)=>{ce(n,()=>({class:[t.class,r(),"button"],...i}),void 0,void 0,"svelte-e22opd");var u=V(),d=B(u);pe(d,()=>t.children??_e),H(l,u)}),H(e,o)}var Xe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},J=typeof window>"u"||"Deno"in globalThis;function Me(){}function Gs(e,t){return typeof e=="function"?e(t):e}function fs(e){return typeof e=="number"&&e>=0&&e!==1/0}function hs(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ds(e,t){return typeof e=="function"?e(t):e}function vs(e,t){return typeof e=="function"?e(t):e}function Qs(e,t){const{type:s="all",exact:r,fetchStatus:i,predicate:o,queryKey:a,stale:n}=e;if(a){if(r){if(t.queryHash!==ys(a,t.options))return!1}else if(!ge(t.queryKey,a))return!1}if(s!=="all"){const l=t.isActive();if(s==="active"&&!l||s==="inactive"&&l)return!1}return!(typeof n=="boolean"&&t.isStale()!==n||i&&i!==t.state.fetchStatus||o&&!o(t))}function Vs(e,t){const{exact:s,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(s){if(fe(t.options.mutationKey)!==fe(o))return!1}else if(!ge(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function ys(e,t){return(t?.queryKeyHashFn||fe)(e)}function fe(e){return JSON.stringify(e,(t,s)=>he(s)?Object.keys(s).sort().reduce((r,i)=>(r[i]=s[i],r),{}):s)}function ge(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>ge(e[s],t[s])):!1}function Ze(e,t){if(e===t)return e;const s=Re(e)&&Re(t);if(s||he(e)&&he(t)){const r=s?e:Object.keys(e),i=r.length,o=s?t:Object.keys(t),a=o.length,n=s?[]:{},l=new Set(r);let u=0;for(let d=0;d<a;d++){const b=s?d:o[d];(!s&&l.has(b)||s)&&e[b]===void 0&&t[b]===void 0?(n[b]=void 0,u++):(n[b]=Ze(e[b],t[b]),n[b]===e[b]&&e[b]!==void 0&&u++)}return i===a&&u===i?e:n}return t}function Bs(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Re(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function he(e){if(!Ne(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!Ne(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ne(e){return Object.prototype.toString.call(e)==="[object Object]"}function _s(e){return new Promise(t=>{setTimeout(t,e)})}function bs(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?Ze(e,t):t}function zs(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function Ws(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var et=Symbol();function ps(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===et?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ms=class extends Xe{#e;#s;#t;constructor(){super(),this.#t=e=>{if(!J&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#s||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(e){this.#t=e,this.#s?.(),this.#s=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},gs=new ms,Ss=class extends Xe{#e=!0;#s;#t;constructor(){super(),this.#t=e=>{if(!J&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#s||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(e){this.#t=e,this.#s?.(),this.#s=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},tt=new Ss;function ws(){let e,t;const s=new Promise((i,o)=>{e=i,t=o});s.status="pending",s.catch(()=>{});function r(i){Object.assign(s,i),delete s.resolve,delete s.reject}return s.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},s.reject=i=>{r({status:"rejected",reason:i}),t(i)},s}function Cs(e){return Math.min(1e3*2**e,3e4)}function st(e){return(e??"online")==="online"?tt.isOnline():!0}var rt=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Es(e){let t=!1,s=0,r;const i=ws(),o=()=>i.status!=="pending",a=v=>{o()||(w(new rt(v)),e.abort?.())},n=()=>{t=!0},l=()=>{t=!1},u=()=>gs.isFocused()&&(e.networkMode==="always"||tt.isOnline())&&e.canRun(),d=()=>st(e.networkMode)&&e.canRun(),b=v=>{o()||(r?.(),i.resolve(v))},w=v=>{o()||(r?.(),i.reject(v))},S=()=>new Promise(v=>{r=f=>{(o()||u())&&v(f)},e.onPause?.()}).then(()=>{r=void 0,o()||e.onContinue?.()}),c=()=>{if(o())return;let v;const f=s===0?e.initialPromise:void 0;try{v=f??e.fn()}catch(_){v=Promise.reject(_)}Promise.resolve(v).then(b).catch(_=>{if(o())return;const C=e.retry??(J?0:3),p=e.retryDelay??Cs,m=typeof p=="function"?p(s,_):p,g=C===!0||typeof C=="number"&&s<C||typeof C=="function"&&C(s,_);if(t||!g){w(_);return}s++,e.onFail?.(s,_),_s(m).then(()=>u()?void 0:S()).then(()=>{t?w(_):c()})})};return{promise:i,status:()=>i.status,cancel:a,continue:()=>(r?.(),i),cancelRetry:n,continueRetry:l,canStart:d,start:()=>(d()?c():S().then(c),i)}}var As=e=>setTimeout(e,0);function Fs(){let e=[],t=0,s=n=>{n()},r=n=>{n()},i=As;const o=n=>{t?e.push(n):i(()=>{s(n)})},a=()=>{const n=e;e=[],n.length&&i(()=>{r(()=>{n.forEach(l=>{s(l)})})})};return{batch:n=>{let l;t++;try{l=n()}finally{t--,t||a()}return l},batchCalls:n=>(...l)=>{o(()=>{n(...l)})},schedule:o,setNotifyFunction:n=>{s=n},setBatchNotifyFunction:n=>{r=n},setScheduler:n=>{i=n}}}var Os=Fs(),Ts=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fs(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(J?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},$s=class extends Ts{#e;#s;#t;#n;#r;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#t=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Ms(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#t.remove(this)}setData(e,t){const s=bs(this.state.data,e,this.options);return this.#i({data:s,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),s}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(Me).catch(Me):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>vs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===et||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ds(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!hs(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#t.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const n=this.observers.find(l=>l.options.queryFn);n&&this.setOptions(n.options)}const s=new AbortController,r=n=>{Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(this.#a=!0,s.signal)})},i=()=>{const n=ps(this.options,t),u=(()=>{const d={client:this.#n,queryKey:this.queryKey,meta:this.meta};return r(d),d})();return this.#a=!1,this.options.persister?this.options.persister(n,u,this):n(u)},a=(()=>{const n={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:i};return r(n),n})();this.options.behavior?.onFetch(a,this),this.#s=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#i({type:"fetch",meta:a.fetchOptions?.meta}),this.#r=Es({initialPromise:t?.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onFail:(n,l)=>{this.#i({type:"failed",failureCount:n,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const n=await this.#r.start();if(n===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(n),this.#t.config.onSuccess?.(n,this),this.#t.config.onSettled?.(n,this.state.error,this),n}catch(n){if(n instanceof rt){if(n.silent)return this.#r.promise;if(n.revert){if(this.setState({...this.#s,fetchStatus:"idle"}),this.state.data===void 0)throw n;return this.state.data}}throw this.#i({type:"error",error:n}),this.#t.config.onError?.(n,this),this.#t.config.onSettled?.(this.state.data,n,this),n}finally{this.scheduleGc()}}#i(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...ks(s.data,this.options),fetchMeta:e.meta??null};case"success":const r={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#s=e.manual?r:void 0,r;case"error":const i=e.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),Os.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#t.notify({query:this,type:"updated",action:e})})}};function ks(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:st(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Ms(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}const it="$$_queryClient",Ys=()=>{const e=Ve(it);if(!e)throw new Error("No QueryClient was found in Svelte context. Did you forget to wrap your component with QueryClientProvider?");return e},Js=e=>{xt(it,e)},Rs="$$_isRestoring",Xs=()=>{try{const e=Ve(Rs);return e||Ae(!1)}catch{return Ae(!1)}};export{ws as A,Hs as B,vs as C,Bs as D,J as E,fs as F,hs as G,ks as H,cs as I,bs as J,Xs as K,Ys as L,$s as Q,Ts as R,Xe as S,Ks as X,ce as a,js as b,xs as c,Us as d,ts as e,Es as f,Vs as g,ys as h,Zt as i,Me as j,ps as k,Ws as l,Qs as m,Os as n,zs as o,gs as p,tt as q,qs as r,z as s,ds as t,Gs as u,fe as v,ge as w,et as x,Js as y,L as z};
