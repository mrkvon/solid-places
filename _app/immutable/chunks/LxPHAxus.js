import{G as p,b as s,d}from"./Ck_VzoUI.js";import{c}from"./HgQVWXPy.js";const h={type:"Schema",shapes:[{id:"http://www.w3.org/ns/lddps#Container",type:"ShapeDecl",shapeExpr:{type:"Shape",expression:{id:"http://www.w3.org/ns/lddps#ContainerShape",type:"EachOf",expressions:[{type:"TripleConstraint",predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type",valueExpr:{type:"NodeConstraint",values:["http://www.w3.org/ns/ldp#Container","http://www.w3.org/ns/ldp#Resource"]},min:0,max:-1,annotations:[{type:"Annotation",predicate:"http://www.w3.org/2000/01/rdf-schema#comment",object:{value:"A container on a Solid server"}}]},{type:"TripleConstraint",predicate:"http://purl.org/dc/terms/modified",valueExpr:{type:"NodeConstraint",datatype:"http://www.w3.org/2001/XMLSchema#string"},min:0,max:1,annotations:[{type:"Annotation",predicate:"http://www.w3.org/2000/01/rdf-schema#comment",object:{value:"Date modified"}}]},{type:"TripleConstraint",predicate:"http://www.w3.org/ns/ldp#contains",valueExpr:"http://www.w3.org/ns/lddps#Resource",min:0,max:-1,annotations:[{type:"Annotation",predicate:"http://www.w3.org/2000/01/rdf-schema#comment",object:{value:"Defines a Solid Resource"}}]},{type:"TripleConstraint",predicate:"http://www.w3.org/ns/posix/stat#mtime",valueExpr:{type:"NodeConstraint",datatype:"http://www.w3.org/2001/XMLSchema#decimal"},min:0,max:1,annotations:[{type:"Annotation",predicate:"http://www.w3.org/2000/01/rdf-schema#comment",object:{value:"?"}}]},{type:"TripleConstraint",predicate:"http://www.w3.org/ns/posix/stat#size",valueExpr:{type:"NodeConstraint",datatype:"http://www.w3.org/2001/XMLSchema#integer"},min:0,max:1,annotations:[{type:"Annotation",predicate:"http://www.w3.org/2000/01/rdf-schema#comment",object:{value:"size of this container"}}]}]},extra:["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]}},{id:"http://www.w3.org/ns/lddps#Resource",type:"ShapeDecl",shapeExpr:{type:"Shape",expression:{id:"http://www.w3.org/ns/lddps#ResourceShape",type:"EachOf",expressions:[{type:"TripleConstraint",predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type",valueExpr:{type:"NodeConstraint",values:["http://www.w3.org/ns/ldp#Resource","http://www.w3.org/ns/iana/media-types/text/turtle#Resource"]},min:0,max:-1,annotations:[{type:"Annotation",predicate:"http://www.w3.org/2000/01/rdf-schema#comment",object:{value:"Any resource on a Solid server"}}]},{type:"TripleConstraint",predicate:"http://purl.org/dc/terms/modified",valueExpr:{type:"NodeConstraint",datatype:"http://www.w3.org/2001/XMLSchema#string"},min:0,max:1,annotations:[{type:"Annotation",predicate:"http://www.w3.org/2000/01/rdf-schema#comment",object:{value:"Date modified"}}]},{type:"TripleConstraint",predicate:"http://www.w3.org/ns/posix/stat#mtime",valueExpr:{type:"NodeConstraint",datatype:"http://www.w3.org/2001/XMLSchema#decimal"},min:0,max:1,annotations:[{type:"Annotation",predicate:"http://www.w3.org/2000/01/rdf-schema#comment",object:{value:"?"}}]},{type:"TripleConstraint",predicate:"http://www.w3.org/ns/posix/stat#size",valueExpr:{type:"NodeConstraint",datatype:"http://www.w3.org/2001/XMLSchema#integer"},min:0,max:1,annotations:[{type:"Annotation",predicate:"http://www.w3.org/2000/01/rdf-schema#comment",object:{value:"size of this container"}}]}]},extra:["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]}},{id:"http://www.w3.org/ns/lddps#ProfileWithStorage",type:"ShapeDecl",shapeExpr:{type:"Shape",expression:{id:"http://www.w3.org/ns/lddps#ProfileWithStorageShape",type:"TripleConstraint",predicate:"http://www.w3.org/ns/pim/space#storage",valueExpr:{type:"NodeConstraint",nodeKind:"iri"},min:0,max:-1},extra:["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]}}]},m={type:{"@id":"@type","@isCollection":!0},Container:{"@id":"http://www.w3.org/ns/ldp#Container","@context":{type:{"@id":"@type","@isCollection":!0},modified:{"@id":"http://purl.org/dc/terms/modified","@type":"http://www.w3.org/2001/XMLSchema#string"},contains:{"@id":"http://www.w3.org/ns/ldp#contains","@type":"@id","@isCollection":!0},mtime:{"@id":"http://www.w3.org/ns/posix/stat#mtime","@type":"http://www.w3.org/2001/XMLSchema#decimal"},size:{"@id":"http://www.w3.org/ns/posix/stat#size","@type":"http://www.w3.org/2001/XMLSchema#integer"}}},Resource:{"@id":"http://www.w3.org/ns/ldp#Resource","@context":{type:{"@id":"@type","@isCollection":!0},modified:{"@id":"http://purl.org/dc/terms/modified","@type":"http://www.w3.org/2001/XMLSchema#string"},contains:{"@id":"http://www.w3.org/ns/ldp#contains","@type":"@id","@isCollection":!0},mtime:{"@id":"http://www.w3.org/ns/posix/stat#mtime","@type":"http://www.w3.org/2001/XMLSchema#decimal"},size:{"@id":"http://www.w3.org/ns/posix/stat#size","@type":"http://www.w3.org/2001/XMLSchema#integer"}}},modified:{"@id":"http://purl.org/dc/terms/modified","@type":"http://www.w3.org/2001/XMLSchema#string"},contains:{"@id":"http://www.w3.org/ns/ldp#contains","@type":"@id","@isCollection":!0},Resource2:{"@id":"http://www.w3.org/ns/iana/media-types/text/turtle#Resource","@context":{type:{"@id":"@type","@isCollection":!0},modified:{"@id":"http://purl.org/dc/terms/modified","@type":"http://www.w3.org/2001/XMLSchema#string"},mtime:{"@id":"http://www.w3.org/ns/posix/stat#mtime","@type":"http://www.w3.org/2001/XMLSchema#decimal"},size:{"@id":"http://www.w3.org/ns/posix/stat#size","@type":"http://www.w3.org/2001/XMLSchema#integer"}}},mtime:{"@id":"http://www.w3.org/ns/posix/stat#mtime","@type":"http://www.w3.org/2001/XMLSchema#decimal"},size:{"@id":"http://www.w3.org/ns/posix/stat#size","@type":"http://www.w3.org/2001/XMLSchema#integer"},storage:{"@id":"http://www.w3.org/ns/pim/space#storage","@type":"@id","@isCollection":!0}},g={schema:h,shape:"http://www.w3.org/ns/lddps#ProfileWithStorage",context:m};async function l(e,r){const o=r.getResource(e),t=await o.readIfUnfetched();if(t.isError)return t;const i=r.usingType(g).fromSubject(e);if(i.storage&&i.storage.size>0){const a=i.storage.map(w=>r.getResource(w["@id"])).filter(w=>w.type==="SolidContainer");return new p(a)}const n=await o.getRootContainer();return n.type==="SolidContainer"?new p([n]):n}const x=c([],e=>s.subscribe(async o=>{if(!o.info.isLoggedIn){e([]);return}try{const t=await l(o.info.webId,d);if(t.isError)throw t;e(t.storageContainers)}catch(t){console.error("Failed to get storage",t),e([])}}));export{x as s};
