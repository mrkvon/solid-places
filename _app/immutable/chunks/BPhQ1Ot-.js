import{q as de,o as W,aG as Ie,L as x,l as E,ad as De,m as ne,h as D,X as ot,I as ut,J as lt,K as we,M as R,x as k,ak as ct,ao as ft,s as P,w as ht,aH as $,aI as Y,v as I,aJ as Se,A as dt,aK as Ce,as as Le,ah as Pe,N as ve,y as qe,aL as vt,aM as ee,H as oe,aw as q,aN as yt,am as _t,aO as bt,ar as pt,aP as mt,V as Ue,aQ as gt,E as wt,aR as St,au as Ct,F as je,aS as Et,aT as Ke,C as xe,aU as At,aV as Ft,aW as Ot,U as kt,aX as Tt,aY as Mt,aZ as Nt,a_ as Rt,a$ as It,b0 as Dt,b1 as ye,aa as Lt,e as He,G as _e,b2 as Pt,p as Ge,b3 as qt,a6 as Ut,a8 as jt,z as be,a7 as Kt,a as H,b as Qe,ab as V,a4 as z,ac as xt,b4 as Ht,aE as Gt,aC as Ve}from"./ZmOcAfe1.js";import"./DsnmJJEf.js";import{j as Qt,k as Ee,l as Vt,n as zt,f as Bt,p as Wt,q as $t,c as pe,r as Ae}from"./DXbKMHJn.js";import{p as N,r as me,s as Yt}from"./DbDyctlH.js";import{t as Jt,c as Xt,s as Zt}from"./CFXNJ6MW.js";let L=null;function Fe(e){L=e}function es(e,t){return t}function ts(e,t,s){for(var r=e.items,i=[],n=t.length,o=0;o<n;o++)bt(t[o].e,i,!0);var a=n>0&&i.length===0&&s!==null;if(a){var l=s.parentNode;pt(l),l.append(s),r.clear(),O(e,t[0].prev,t[n-1].next)}mt(i,()=>{for(var u=0;u<n;u++){var d=t[u];a||(r.delete(d.k),O(e,d.prev,d.next)),q(d.e,!a)}})}function ss(e,t,s,r,i,n=null){var o=e,a={flags:t,items:new Map,first:null},l=(t&Ie)!==0;if(l){var u=e;o=E?x(De(u)):u.appendChild(de())}E&&ne();var d=null,b=!1,S=new Map,w=ot(()=>{var y=s();return Pe(y)?y:y==null?[]:Le(y)}),c,v;function f(){rs(v,c,a,S,o,i,t,r,s),n!==null&&(c.length===0?d?ve(d):d=P(()=>n(o)):d!==null&&qe(d,()=>{d=null}))}W(()=>{v??=Ue,c=D(w);var y=c.length;if(b&&y===0)return;b=y===0;let C=!1;if(E){var p=ut(o)===lt;p!==(y===0)&&(o=we(),x(o),R(!1),C=!0)}if(E){for(var m=null,g,h=0;h<y;h++){if(k.nodeType===ct&&k.data===ft){o=k,C=!0,R(!1);break}var _=c[h],A=r(_,h);g=ue(k,a,m,null,_,A,h,i,t,s),a.items.set(A,g),m=g}y>0&&x(we())}if(E)y===0&&n&&(d=P(()=>n(o)));else if(ht()){var T=new Set,G=I;for(h=0;h<y;h+=1){_=c[h],A=r(_,h);var M=a.items.get(A)??S.get(A);M?(t&($|Y))!==0&&ze(M,_,h,t):(g=ue(null,a,null,null,_,A,h,i,t,s,!0),S.set(A,g)),T.add(A)}for(const[F,Q]of a.items)T.has(F)||G.skipped_effects.add(Q.e);G.add_callback(f)}else f();C&&R(!0),D(w)}),E&&(o=k)}function rs(e,t,s,r,i,n,o,a,l){var u=(o&yt)!==0,d=(o&($|Y))!==0,b=t.length,S=s.items,w=s.first,c=w,v,f=null,y,C=[],p=[],m,g,h,_;if(u)for(_=0;_<b;_+=1)m=t[_],g=a(m,_),h=S.get(g),h!==void 0&&(h.a?.measure(),(y??=new Set).add(h));for(_=0;_<b;_+=1){if(m=t[_],g=a(m,_),h=S.get(g),h===void 0){var A=r.get(g);if(A!==void 0){r.delete(g),S.set(g,A);var T=f?f.next:c;O(s,f,A),O(s,A,T),te(A,T,i),f=A}else{var G=c?c.e.nodes_start:i;f=ue(G,s,f,f===null?s.first:f.next,m,g,_,n,o,l)}S.set(g,f),C=[],p=[],c=f.next;continue}if(d&&ze(h,m,_,o),(h.e.f&ee)!==0&&(ve(h.e),u&&(h.a?.unfix(),(y??=new Set).delete(h))),h!==c){if(v!==void 0&&v.has(h)){if(C.length<p.length){var M=p[0],F;f=M.prev;var Q=C[0],X=C[C.length-1];for(F=0;F<C.length;F+=1)te(C[F],M,i);for(F=0;F<p.length;F+=1)v.delete(p[F]);O(s,Q.prev,X.next),O(s,f,Q),O(s,X,M),c=M,f=X,_-=1,C=[],p=[]}else v.delete(h),te(h,c,i),O(s,h.prev,h.next),O(s,h,f===null?s.first:f.next),O(s,f,h),f=h;continue}for(C=[],p=[];c!==null&&c.k!==g;)(c.e.f&ee)===0&&(v??=new Set).add(c),p.push(c),c=c.next;if(c===null)continue;h=c}C.push(h),f=h,c=h.next}if(c!==null||v!==void 0){for(var U=v===void 0?[]:Le(v);c!==null;)(c.e.f&ee)===0&&U.push(c),c=c.next;var Z=U.length;if(Z>0){var at=(o&Ie)!==0&&b===0?i:null;if(u){for(_=0;_<Z;_+=1)U[_].a?.measure();for(_=0;_<Z;_+=1)U[_].a?.fix()}ts(s,U,at)}}u&&oe(()=>{if(y!==void 0)for(h of y)h.a?.apply()}),e.first=s.first&&s.first.e,e.last=f&&f.e;for(var nt of r.values())q(nt.e);r.clear()}function ze(e,t,s,r){(r&$)!==0&&Se(e.v,t),(r&Y)!==0?Se(e.i,s):e.i=s}function ue(e,t,s,r,i,n,o,a,l,u,d){var b=L,S=(l&$)!==0,w=(l&vt)===0,c=S?w?dt(i,!1,!1):Ce(i):i,v=(l&Y)===0?o:Ce(o),f={i:v,v:c,k:n,a:null,e:null,prev:s,next:r};L=f;try{if(e===null){var y=document.createDocumentFragment();y.append(e=de())}return f.e=P(()=>a(e,c,v,u),E),f.e.prev=s&&s.e,f.e.next=r&&r.e,s===null?d||(t.first=f):(s.next=f,s.e.next=f.e),r!==null&&(r.prev=f,r.e.prev=f.e),f}finally{L=b}}function te(e,t,s){for(var r=e.next?e.next.e.nodes_start:s,i=t?t.e.nodes_start:s,n=e.e.nodes_start;n!==null&&n!==r;){var o=_t(n);i.before(n),n=o}}function O(e,t,s){t===null?e.first=s:(t.next=s,t.e.next=s&&s.e),s!==null&&(s.prev=t,s.e.prev=t&&t.e)}function Be(e,t,s,r,i,n){let o=E;E&&ne();var a,l,u=null;E&&k.nodeType===gt&&(u=k,ne());var d=E?k:e,b,S=L;W(()=>{const w=t()||null;var c=s||w==="svg"?St:null;if(w!==a){var v=L;Fe(S),b&&(w===null?qe(b,()=>{b=null,l=null}):w===l?ve(b):(q(b),Ee(!1))),w&&w!==l&&(b=P(()=>{if(u=E?u:c?document.createElementNS(c,w):document.createElement(w),Ct(u,u),r){E&&Qt(w)&&u.append(document.createComment(""));var f=E?De(u):u.appendChild(de());E&&(f===null?R(!1):x(f)),r(u,f)}Ue.nodes_end=u,d.before(u)})),a=w,a&&(l=a),Ee(!0),Fe(v)}},wt),o&&(R(!0),x(d))}function is(e,t){var s=void 0,r;W(()=>{s!==(s=t())&&(r&&(q(r),r=null),s&&(r=P(()=>{je(()=>s(e))})))})}function se(e,t={},s,r){for(var i in s){var n=s[i];t[i]!==n&&(s[i]==null?e.style.removeProperty(i):e.style.setProperty(i,n,r))}}function as(e,t,s,r){var i=e.__style;if(E||i!==t){var n=Jt(t,r);(!E||n!==e.getAttribute("style"))&&(n==null?e.removeAttribute("style"):e.style.cssText=n),e.__style=t}else r&&(Array.isArray(r)?(se(e,s?.[0],r[0]),se(e,s?.[1],r[1],"important")):se(e,s,r));return r}function le(e,t,s=!1){if(e.multiple){if(t==null)return;if(!Pe(t))return Et();for(var r of e.options)r.selected=t.includes(Oe(r));return}for(r of e.options){var i=Oe(r);if(Ke(i,t)){r.selected=!0;return}}(!s||t!==void 0)&&(e.selectedIndex=-1)}function ns(e){var t=new MutationObserver(()=>{le(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),xe(()=>{t.disconnect()})}function Oe(e){return"__value"in e?e.__value:e.value}const j=Symbol("class"),K=Symbol("style"),We=Symbol("is custom element"),$e=Symbol("is html");function Us(e){if(E){var t=!1,s=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;B(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var i=e.checked;B(e,"checked",null),e.checked=i}}};e.__on_r=s,Rt(s),It()}}function os(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function B(e,t,s,r){var i=Ye(e);E&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=s)&&(t==="loading"&&(e[Nt]=s),s==null?e.removeAttribute(t):typeof s!="string"&&Je(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function us(e,t,s,r,i=!1){var n=Ye(e),o=n[We],a=!n[$e];let l=E&&o;l&&R(!1);var u=t||{},d=e.tagName==="OPTION";for(var b in t)b in s||(s[b]=null);s.class?s.class=Xt(s.class):(r||s[j])&&(s.class=null),s[K]&&(s.style??=null);var S=Je(e);for(const p in s){let m=s[p];if(d&&p==="value"&&m==null){e.value=e.__value="",u[p]=m;continue}if(p==="class"){var w=e.namespaceURI==="http://www.w3.org/1999/xhtml";Zt(e,w,m,r,t?.[j],s[j]),u[p]=m,u[j]=s[j];continue}if(p==="style"){as(e,m,t?.[K],s[K]),u[p]=m,u[K]=s[K];continue}var c=u[p];if(!(m===c&&!(m===void 0&&e.hasAttribute(p)))){u[p]=m;var v=p[0]+p[1];if(v!=="$$")if(v==="on"){const g={},h="$$"+p;let _=p.slice(2);var f=$t(_);if(Vt(_)&&(_=_.slice(0,-7),g.capture=!0),!f&&c){if(m!=null)continue;e.removeEventListener(_,u[h],g),u[h]=null}if(m!=null)if(f)e[`__${_}`]=m,Bt([_]);else{let A=function(T){u[p].call(this,T)};u[h]=zt(_,e,A,g)}else f&&(e[`__${_}`]=void 0)}else if(p==="style")B(e,p,m);else if(p==="autofocus")Ot(e,!!m);else if(!o&&(p==="__value"||p==="value"&&m!=null))e.value=e.__value=m;else if(p==="selected"&&d)os(e,m);else{var y=p;a||(y=Wt(y));var C=y==="defaultValue"||y==="defaultChecked";if(m==null&&!o&&!C)if(n[p]=null,y==="value"||y==="checked"){let g=e;const h=t===void 0;if(y==="value"){let _=g.defaultValue;g.removeAttribute(y),g.defaultValue=_,g.value=g.__value=h?_:null}else{let _=g.defaultChecked;g.removeAttribute(y),g.defaultChecked=_,g.checked=h?_:!1}}else e.removeAttribute(p);else C||S.includes(y)&&(o||typeof m!="string")?(e[y]=m,y in n&&(n[y]=kt)):typeof m!="function"&&B(e,y,m)}}}return l&&R(!0),u}function ce(e,t,s=[],r=[],i,n=!1){At(s,r,o=>{var a=void 0,l={},u=e.nodeName==="SELECT",d=!1;if(W(()=>{var S=t(...o.map(D)),w=us(e,a,S,i,n);d&&u&&"value"in S&&le(e,S.value);for(let v of Object.getOwnPropertySymbols(l))S[v]||q(l[v]);for(let v of Object.getOwnPropertySymbols(S)){var c=S[v];v.description===Ft&&(!a||c!==a[v])&&(l[v]&&q(l[v]),l[v]=P(()=>is(e,()=>c))),w[v]=c}a=w}),u){var b=e;je(()=>{le(b,a.value,!0),ns(b)})}d=!0})}function Ye(e){return e.__attributes??={[We]:e.nodeName.includes("-"),[$e]:e.namespaceURI===Tt}}var ke=new Map;function Je(e){var t=e.getAttribute("is")||e.nodeName,s=ke.get(t);if(s)return s;ke.set(t,s=[]);for(var r,i=e,n=Element.prototype;n!==i;){r=Dt(i);for(var o in r)r[o].set&&s.push(o);i=Mt(i)}return s}function js(e,t,s=t){var r=new WeakSet;ye(e,"input",async i=>{var n=i?e.defaultValue:e.value;if(n=ie(e)?ae(n):n,s(n),I!==null&&r.add(I),await Lt(),n!==(n=t())){var o=e.selectionStart,a=e.selectionEnd;e.value=n??"",a!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(a,e.value.length))}}),(E&&e.defaultValue!==e.value||He(t)==null&&e.value)&&(s(ie(e)?ae(e.value):e.value),I!==null&&r.add(I)),_e(()=>{var i=t();if(e===document.activeElement){var n=Pt??I;if(r.has(n))return}ie(e)&&i===ae(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}const re=new Set;function Ks(e,t,s,r,i=r){var n=s.getAttribute("type")==="checkbox",o=e;let a=!1;if(t!==null)for(var l of t)o=o[l]??=[];o.push(s),ye(s,"change",()=>{var u=s.__value;n&&(u=Te(o,u,s.checked)),i(u)},()=>i(n?[]:null)),_e(()=>{var u=r();if(E&&s.defaultChecked!==s.checked){a=!0;return}n?(u=u||[],s.checked=u.includes(s.__value)):s.checked=Ke(s.__value,u)}),xe(()=>{var u=o.indexOf(s);u!==-1&&o.splice(u,1)}),re.has(o)||(re.add(o),oe(()=>{o.sort((u,d)=>u.compareDocumentPosition(d)===4?-1:1),re.delete(o)})),oe(()=>{if(a){var u;if(n)u=Te(o,u,s.checked);else{var d=o.find(b=>b.checked);u=d?.__value}i(u)}})}function xs(e,t,s=t){ye(e,"change",r=>{var i=r?e.defaultChecked:e.checked;s(i)}),(E&&e.defaultChecked!==e.checked||He(t)==null)&&s(e.checked),_e(()=>{var r=t();e.checked=!!r})}function Te(e,t,s){for(var r=new Set,i=0;i<e.length;i+=1)e[i].checked&&r.add(e[i].__value);return s||r.delete(t),Array.from(r)}function ie(e){var t=e.type;return t==="number"||t==="range"}function ae(e){return e===""?null:+e}/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const ls={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var cs=qt("<svg><!><!></svg>");function fs(e,t){Ge(t,!0);const s=N(t,"color",3,"currentColor"),r=N(t,"size",3,24),i=N(t,"strokeWidth",3,2),n=N(t,"absoluteStrokeWidth",3,!1),o=N(t,"iconNode",19,()=>[]),a=me(t,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var l=cs();ce(l,b=>({...ls,...a,width:r(),height:r(),stroke:s(),"stroke-width":b,class:["lucide-icon lucide",t.name&&`lucide-${t.name}`,t.class]}),[()=>n()?Number(i())*24/Number(r()):i()]);var u=Ut(l);ss(u,17,o,es,(b,S)=>{var w=xt(()=>Ht(D(S),2));let c=()=>D(w)[0],v=()=>D(w)[1];var f=V(),y=z(f);Be(y,c,!0,(C,p)=>{ce(C,()=>({...v()}))}),H(b,f)});var d=jt(u);pe(d,()=>t.children??be),Kt(l),H(e,l),Qe()}function Hs(e,t){Ge(t,!0);/**
 * @license @lucide/svelte v0.535.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let s=me(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];fs(e,Yt({name:"x"},()=>s,{get iconNode(){return r},children:(i,n)=>{var o=V(),a=z(o);pe(a,()=>t.children??be),H(i,o)},$$slots:{default:!0}})),Qe()}function Gs(e,t){const s=N(t,"as",3,"button"),r=N(t,"variant",3,"secondary"),i=me(t,["$$slots","$$events","$$legacy","as","variant","class","children"]);var n=V(),o=z(n);Be(o,s,!1,(a,l)=>{ce(a,()=>({class:[t.class,r(),"button"],...i}),void 0,void 0,"svelte-e22opd");var u=V(),d=z(u);pe(d,()=>t.children??be),H(l,u)}),H(e,n)}var Xe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},J=typeof window>"u"||"Deno"in globalThis;function Me(){}function Qs(e,t){return typeof e=="function"?e(t):e}function hs(e){return typeof e=="number"&&e>=0&&e!==1/0}function ds(e,t){return Math.max(e+(t||0)-Date.now(),0)}function vs(e,t){return typeof e=="function"?e(t):e}function ys(e,t){return typeof e=="function"?e(t):e}function Vs(e,t){const{type:s="all",exact:r,fetchStatus:i,predicate:n,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==_s(o,t.options))return!1}else if(!ge(t.queryKey,o))return!1}if(s!=="all"){const l=t.isActive();if(s==="active"&&!l||s==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||n&&!n(t))}function zs(e,t){const{exact:s,status:r,predicate:i,mutationKey:n}=e;if(n){if(!t.options.mutationKey)return!1;if(s){if(fe(t.options.mutationKey)!==fe(n))return!1}else if(!ge(t.options.mutationKey,n))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function _s(e,t){return(t?.queryKeyHashFn||fe)(e)}function fe(e){return JSON.stringify(e,(t,s)=>he(s)?Object.keys(s).sort().reduce((r,i)=>(r[i]=s[i],r),{}):s)}function ge(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>ge(e[s],t[s])):!1}function Ze(e,t){if(e===t)return e;const s=Ne(e)&&Ne(t);if(s||he(e)&&he(t)){const r=s?e:Object.keys(e),i=r.length,n=s?t:Object.keys(t),o=n.length,a=s?[]:{},l=new Set(r);let u=0;for(let d=0;d<o;d++){const b=s?d:n[d];(!s&&l.has(b)||s)&&e[b]===void 0&&t[b]===void 0?(a[b]=void 0,u++):(a[b]=Ze(e[b],t[b]),a[b]===e[b]&&e[b]!==void 0&&u++)}return i===o&&u===i?e:a}return t}function Bs(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Ne(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function he(e){if(!Re(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!Re(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Re(e){return Object.prototype.toString.call(e)==="[object Object]"}function bs(e){return new Promise(t=>{setTimeout(t,e)})}function ps(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?Ze(e,t):t}function Ws(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function $s(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var et=Symbol();function ms(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===et?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var gs=class extends Xe{#e;#s;#t;constructor(){super(),this.#t=e=>{if(!J&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#s||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(e){this.#t=e,this.#s?.(),this.#s=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},ws=new gs,Ss=class extends Xe{#e=!0;#s;#t;constructor(){super(),this.#t=e=>{if(!J&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#s||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(e){this.#t=e,this.#s?.(),this.#s=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},tt=new Ss;function Cs(){let e,t;const s=new Promise((i,n)=>{e=i,t=n});s.status="pending",s.catch(()=>{});function r(i){Object.assign(s,i),delete s.resolve,delete s.reject}return s.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},s.reject=i=>{r({status:"rejected",reason:i}),t(i)},s}function Es(e){return Math.min(1e3*2**e,3e4)}function st(e){return(e??"online")==="online"?tt.isOnline():!0}var rt=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function As(e){let t=!1,s=0,r;const i=Cs(),n=()=>i.status!=="pending",o=v=>{n()||(S(new rt(v)),e.abort?.())},a=()=>{t=!0},l=()=>{t=!1},u=()=>ws.isFocused()&&(e.networkMode==="always"||tt.isOnline())&&e.canRun(),d=()=>st(e.networkMode)&&e.canRun(),b=v=>{n()||(r?.(),i.resolve(v))},S=v=>{n()||(r?.(),i.reject(v))},w=()=>new Promise(v=>{r=f=>{(n()||u())&&v(f)},e.onPause?.()}).then(()=>{r=void 0,n()||e.onContinue?.()}),c=()=>{if(n())return;let v;const f=s===0?e.initialPromise:void 0;try{v=f??e.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(b).catch(y=>{if(n())return;const C=e.retry??(J?0:3),p=e.retryDelay??Es,m=typeof p=="function"?p(s,y):p,g=C===!0||typeof C=="number"&&s<C||typeof C=="function"&&C(s,y);if(t||!g){S(y);return}s++,e.onFail?.(s,y),bs(m).then(()=>u()?void 0:w()).then(()=>{t?S(y):c()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r?.(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?c():w().then(c),i)}}var Fs=e=>setTimeout(e,0);function Os(){let e=[],t=0,s=a=>{a()},r=a=>{a()},i=Fs;const n=a=>{t?e.push(a):i(()=>{s(a)})},o=()=>{const a=e;e=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{s(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{n(()=>{a(...l)})},schedule:n,setNotifyFunction:a=>{s=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var ks=Os(),Ts=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),hs(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(J?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},Ys=class extends Ts{#e;#s;#t;#a;#r;#o;#n;constructor(e){super(),this.#n=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#t=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Ns(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#t.remove(this)}setData(e,t){const s=ps(this.state.data,e,this.options);return this.#i({data:s,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),s}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(Me).catch(Me):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>ys(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===et||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>vs(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ds(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#n?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#t.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const a=this.observers.find(l=>l.options.queryFn);a&&this.setOptions(a.options)}const s=new AbortController,r=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#n=!0,s.signal)})},i=()=>{const a=ms(this.options,t),u=(()=>{const d={client:this.#a,queryKey:this.queryKey,meta:this.meta};return r(d),d})();return this.#n=!1,this.options.persister?this.options.persister(a,u,this):a(u)},o=(()=>{const a={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:i};return r(a),a})();this.options.behavior?.onFetch(o,this),this.#s=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#i({type:"fetch",meta:o.fetchOptions?.meta}),this.#r=As({initialPromise:t?.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onFail:(a,l)=>{this.#i({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const a=await this.#r.start();if(a===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#t.config.onSuccess?.(a,this),this.#t.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof rt){if(a.silent)return this.#r.promise;if(a.revert){if(this.setState({...this.#s,fetchStatus:"idle"}),this.state.data===void 0)throw a;return this.state.data}}throw this.#i({type:"error",error:a}),this.#t.config.onError?.(a,this),this.#t.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#i(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Ms(s.data,this.options),fetchMeta:e.meta??null};case"success":const r={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#s=e.manual?r:void 0,r;case"error":const i=e.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),ks.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#t.notify({query:this,type:"updated",action:e})})}};function Ms(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:st(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Ns(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}const it="$$_queryClient",Js=()=>{const e=Ve(it);if(!e)throw new Error("No QueryClient was found in Svelte context. Did you forget to wrap your component with QueryClientProvider?");return e},Xs=e=>{Gt(it,e)},Rs="$$_isRestoring",Zs=()=>{try{const e=Ve(Rs);return e||Ae(!1)}catch{return Ae(!1)}};export{ys as A,Gs as B,Bs as C,J as D,hs as E,ds as F,Ms as G,ps as H,fs as I,Zs as J,Js as K,Ys as Q,Ts as R,Xe as S,Hs as X,ce as a,Ks as b,xs as c,js as d,ss as e,As as f,zs as g,_s as h,Me as i,ms as j,$s as k,Ws as l,Vs as m,ks as n,ws as o,tt as p,vs as q,Us as r,B as s,Qs as t,fe as u,ge as v,et as w,Xs as x,L as y,Cs as z};
